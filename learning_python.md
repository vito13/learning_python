---
é˜…è¯»è¿›åº¦
Pythonç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°å®è·µï¼ˆç¬¬2ç‰ˆï¼‰		ç»§ç»­ç¬¬12ç« ï¼Œåé¢éƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘å…ˆä¸ç”¨çœ‹äº†

pythonåŸºç¡€æ•™ç¨‹ï¼ˆç¬¬ä¸‰ç‰ˆï¼‰				ç»§ç»­ç¬¬12ç« ï¼Œåé¢éƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘å…ˆä¸ç”¨çœ‹äº†

pythonè¯­è¨€åŠå…¶åº”ç”¨						ç»§ç»­ç¬¬11ç« ï¼Œåé¢éƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘å…ˆä¸ç”¨çœ‹äº†

æµç•…çš„Python							ç»§ç»­ç¬¬16ç« ï¼ˆæš‚æœªçœ‹10-13ï¼‰

Python Cookbookï¼ˆç¬¬3ç‰ˆï¼‰

çœ‹æ¼«ç”»å­¦Python							ç»§ç»­ç¬¬11.3.3ç« 
---
# åŸºç¡€çŸ¥è¯†

> Python æœ€åº•å±‚çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼šå¸ƒå°”å‹ã€æ•´å‹ã€æµ®ç‚¹å‹ä»¥åŠå­—ç¬¦ä¸²å‹ã€‚

## æ•°æ®ç±»å‹
- åœ¨Pythonä¸­æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æ˜¯ç±»ï¼Œæ¯ä¸ªæ•°æ®å€¼éƒ½æ˜¯ç±»çš„â€œå®ä¾‹â€ã€‚
- åœ¨Pythonä¸­æœ‰6ç§ä¸»è¦çš„å†…ç½®æ•°æ®ç±»å‹ï¼šæ•°å­—ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆå’Œå­—å…¸ã€‚
- åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆå’Œå­—å…¸å¯ä»¥å®¹çº³å¤šé¡¹æ•°æ®ï¼Œç»Ÿç§°ä¸ºå®¹å™¨ç±»å‹çš„æ•°æ®ã€‚
- Pythonä¸­çš„æ•°å­—ç±»å‹æœ‰4ç§ï¼šæ•´æ•°ç±»å‹ã€æµ®ç‚¹ç±»å‹ã€å¤æ•°ç±»å‹å’Œå¸ƒå°”ç±»å‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¸ƒå°”ç±»å‹ä¹Ÿæ˜¯æ•°å­—ç±»å‹ï¼Œå®ƒäº‹å®ä¸Šæ˜¯æ•´æ•°ç±»å‹çš„ä¸€ç§ã€‚

å¦‚æœæŠŠæœ€åº•å±‚çš„åŸºæœ¬æ•°æ®ç±»å‹çœ‹ä½œç»„æˆ Python çš„åŸå­ï¼Œæ•°æ®ç»“æ„å°±åƒåˆ†å­ä¸€æ ·ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæœ€å¸¸è§çš„å·¥ä½œå°±æ˜¯å°†æ•°æ®è¿›è¡Œæ‹†åˆ†æˆ–åˆå¹¶ï¼Œå°†å…¶åŠ å·¥ä¸ºç‰¹å®šçš„å½¢å¼ï¼Œè€Œæ•°æ®ç»“æ„å°±æ˜¯ç”¨ä»¥åˆ‡åˆ†æ•°æ®çš„é’¢é”¯ä»¥åŠåˆå¹¶æ•°æ®çš„ç²˜åˆæªã€‚
## å˜é‡
- ä¸ºäº†ç†è§£ Python ä¸­çš„èµ‹å€¼è¯­å¥ï¼Œåº”è¯¥å§‹ç»ˆå…ˆè¯»å³è¾¹ã€‚å¯¹è±¡åœ¨å³è¾¹åˆ›å»ºæˆ–è·å–ï¼Œåœ¨æ­¤ä¹‹åå·¦è¾¹çš„å˜é‡æ‰ä¼šç»‘å®šåˆ°å¯¹è±¡ä¸Šï¼Œè¿™å°±åƒä¸ºå¯¹è±¡è´´ä¸Šæ ‡æ³¨ã€‚å› ä¸ºå˜é‡åªä¸è¿‡æ˜¯æ ‡æ³¨ï¼Œæ‰€ä»¥æ— æ³•é˜»æ­¢ä¸ºå¯¹è±¡è´´ä¸Šå¤šä¸ªæ ‡æ³¨ã€‚è´´çš„å¤šä¸ªæ ‡æ³¨ï¼Œå°±æ˜¯åˆ«åã€‚
- æ¯ä¸ªå˜é‡éƒ½æœ‰æ ‡è¯†ã€ç±»å‹å’Œå€¼ã€‚å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå®ƒçš„æ ‡è¯†ç»ä¸ä¼šå˜ï¼›ä½ å¯ä»¥æŠŠæ ‡è¯†ç†è§£ä¸ºå¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚is è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ ‡è¯†ï¼›id() å‡½æ•°è¿”å›å¯¹è±¡æ ‡è¯†çš„æ•´æ•°è¡¨ç¤ºã€‚


## æ•°å€¼
- æ•´å‹ï¼ˆæ•´æ•°ï¼Œä¾‹å¦‚ 42ã€100000000ï¼‰
- æµ®ç‚¹å‹ï¼ˆå°æ•°ï¼Œä¾‹å¦‚ 3.14159ï¼Œæˆ–ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºçš„æ•°å­—ï¼Œä¾‹å¦‚ 1.0e8ï¼Œå®ƒè¡¨ç¤º1ä¹˜ä»¥10çš„8æ¬¡æ–¹ï¼Œä¹Ÿå¯å†™ä½œ100000000.0ï¼‰
- æ— è®ºæ˜¯å“ªç§è¿ç®—ï¼Œåªè¦æœ‰æ“ä½œæ•°æ˜¯æµ®ç‚¹æ•°ï¼ŒPythoné»˜è®¤å¾—åˆ°çš„æ€»æ˜¯æµ®ç‚¹æ•°ï¼Œå³ä¾¿ç»“æœåŸæœ¬ä¸ºæ•´æ•°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
- ä¹¦å†™å¾ˆå¤§çš„æ•°æ—¶ï¼Œå¯ä½¿ç”¨ä¸‹åˆ’çº¿å°†å…¶ä¸­çš„æ•°å­—åˆ†ç»„ï¼Œå¦‚ universe_age = 14_000_000_000
- å¯ä»¥åŒæ—¶èµ‹å€¼å¤šä¸ªå˜é‡ x, y, z = 0, 0, 0
## bool
è¡¨ç¤ºçœŸå‡çš„ç±»å‹ï¼Œä»…åŒ…å« True å’Œ False ä¸¤ç§å–å€¼
- bool()
- True
- False
```
print(bool('I think, therefore I am'))
print(bool(42))
print(bool(''))
print(True)
print(False)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
True
True
False
True
False
```

## ä¹˜æ–¹
print(3 ** 2)
## å¸¸é‡
Pythonæ²¡æœ‰å†…ç½®çš„å¸¸é‡ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨å…¨å¤§å†™å°†æŸä¸ªå˜é‡è§†ä¸ºå¸¸é‡ï¼Œå¦‚MAX_CONNECTIONS = 5000
## æ³¨é‡Š
ç”¨ä¸€ä¸ªâ€œ#â€
## minã€maxã€sumã€len
```
even_numbers = list(range(2, 11, 2))	# å¯ä»¥æŒ‡å®šæ­¥é•¿
print(min(even_numbers))
print(max(even_numbers))
print(sum(even_numbers))
print(len(even_numbers))

```
## inputã€intã€float
- int()å¯ä»¥å–å€¼
- int(False)ä¹Ÿå¯ä»¥è½¬æ¢boolå¾—åˆ°1å’Œ0
- float()å¯ä»¥å°†å…¶ä»–æ•°å­—ç±»å‹è½¬æ¢ä¸ºæµ®ç‚¹å‹
```
#!/usr/bin/python3
height = input("How tall are you, in inches? ")
height = int(height)
if height >= 48:
 print("\nYou're tall enough to ride!")
else:
 print("\nYou'll be able to ride when you're a little older.")

```
## æ‰“å°è¾“å‡º
```
print('Age:', 42) 
name = 'Gumby' 
salutation = 'Mr.' 
greeting = 'Hello,' 
print(greeting, salutation, name) 	# å¤šä¸ªå˜é‡é—´é»˜è®¤æ˜¯ç©ºæ ¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®é—´éš”ç¬¦ï¼Œè§ä¸‹é¢
print(greeting, ',', salutation, name) 
print(greeting + ',', salutation, name)  # å°†ç¬¬ä¸€ä¸ªå˜é‡ä¸é€—å·è¿æ¥çš„ç»“æœä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°
print("I", "wish", "to", "register", "a", "complaint", sep="_")  # è®¾ç½®é—´éš”ç¬¦å· 
print('Hello,', end='\n\n\n') # è®¾ç½®æ‰“å°çš„ç»“æŸç¬¦å·
print('world!')


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Age: 42
Hello, Mr. Gumby
Hello, , Mr. Gumby
Hello,, Mr. Gumby
I_wish_to_register_a_complaint
Hello,


world!
```
å¦‚æœè¦æ‰“å°çš„æ•°æ®ç»“æ„å¤ªå¤§ï¼Œä¸€è¡Œå®¹çº³ä¸ä¸‹ï¼Œå¯ä½¿ç”¨æ¨¡å—pprintä¸­çš„å‡½æ•°pprintï¼ˆè€Œä¸æ˜¯æ™®é€šprintè¯­å¥ï¼‰ã€‚pprintæ˜¯ä¸ªå“è¶Šçš„æ‰“å°å‡½æ•°ï¼Œèƒ½å¤Ÿæ›´å¦¥å–„åœ°æ‰“å°è¾“å‡ºã€‚

```
#!/usr/bin/python3
import sys, pprint 
pprint.pprint(sys.path) 

[huawei@n148 pytest]$ python3 pyth.py 
['/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest',
 '/usr/local/lib/python3.6/site-packages/setuptools-19.6-py3.6.egg',
 '/usr/lib64/python36.zip',
 '/usr/lib64/python3.6',
 '/usr/lib64/python3.6/lib-dynload',
 '/usr/local/lib64/python3.6/site-packages',
 '/usr/local/lib/python3.6/site-packages',
 '/usr/lib64/python3.6/site-packages',
 '/usr/lib/python3.6/site-packages']
```

## éšæœºæ•°
- éšæœºæ•´æ•° randint
- éšæœºåˆ—è¡¨å…ƒç´  choice
```
#!/usr/bin/python3

from random import randint
print(randint(1, 6))
from random import choice
players = ['charles', 'martina', 'michael', 'florence', 'eli']
first_up = choice(players)
print(first_up)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
3
michael
```
## pass
é˜²æ­¢åœ¨ifé‡Œä»€ä¹ˆéƒ½ä¸å†™æ— æ³•è¿è¡Œï¼Œå¯æš‚æ—¶ç”¨passå ä½
```
#!/usr/bin/python3
name = "Enid"
if name == 'Ralph Auldus Melish': 
	print('Welcome!') 
elif name == 'Enid': 
	# è¿˜æœªå®Œæˆâ€¦â€¦
	pass 
elif name == 'Bill Gates': 
	print('Access Denied')

```
åœ¨å¼‚å¸¸å¤„ç†ä¸­å¦‚æœæ²¡æ‰¾åˆ°æ–‡ä»¶ä¹Ÿå°±ä»€ä¹ˆéƒ½ä¸åšäº†
```
def count_words(filename):
	try:
		with open(filename, encoding='utf-8') as f:
			contents = f.read()
	except FileNotFoundError:
		pass
	else:
		words = contents.split()
		num_words = len(words)
		print(f"The file {filename} has about {num_words} words.")


filenames = ['alice.txt', 'siddhartha.txt', 'moby_dick.txt', 'little_women.txt']
for filename in filenames:
	count_words(filename)

[huawei@n148 pytest]$ python3 pyth.py 
The file alice.txt has about 29465 words.
```
## del
ä¸ä»…ä¼šåˆ é™¤åˆ°å¯¹è±¡çš„å¼•ç”¨ï¼Œè¿˜ä¼šåˆ é™¤åç§°æœ¬èº«
## execã€eval
## å‘½åç©ºé—´ã€ä½œç”¨åŸŸ
- å˜é‡å¯ä»¥åœ¨æ¨¡å—ä¸­åˆ›å»ºï¼Œä½œç”¨åŸŸï¼ˆå˜é‡çš„æœ‰æ•ˆèŒƒå›´ï¼‰æ˜¯æ•´ä¸ªæ¨¡å—ï¼Œè¢«ç§°ä¸ºå…¨å±€å˜é‡ã€‚
- å˜é‡ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ä¸­åˆ›å»ºï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå‡½æ•°ï¼Œè¢«ç§°ä¸ºå±€éƒ¨å˜é‡ã€‚

varså‡½æ•°è¿”å›å½“å‰ä½œç”¨åŸŸçš„å­—å…¸ï¼Œä½†ä¸è¦ä¿®æ”¹å®ƒè¿™æ ·ä¸å®‰å…¨...
```
x = 1 
scope = vars() 
print(scope['x'])
scope['x'] += 1 
print(x)
[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
1
2
```
## å…¨å±€å˜é‡
- Pythonä¸è¦æ±‚å£°æ˜å˜é‡ï¼Œä½†æ˜¯å‡å®šåœ¨å‡½æ•°å®šä¹‰ä½“ä¸­èµ‹å€¼çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸‹ä¸ªæ¡ˆä¾‹ä¼šerr
```
b = 6
def f3(a):
	# global b		æ²¡æœ‰è¿™è¡Œä¼šè®¤ä¸ºbæ˜¯ä¸‹é¢çš„bï¼Œæ˜¯æœªå®šä¹‰çš„å±€éƒ¨å˜é‡
	print(a)
	print(b)
	b = 9

f3(3)
```
- å¯ä½¿ç”¨å‡½æ•°globalsæ¥è®¿é—®å…¨å±€å˜é‡ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å…¨å±€å˜é‡çš„å­—å…¸
```
def combine(parameter): # ä¸å…¨å±€å˜é‡åŒåçš„å‚æ•°
	print(parameter + globals()['parameter']) 

parameter = 'berry' 	# å…¨å±€å˜é‡
combine('Shrub') 

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Shrubberry
```
- åœ¨å‡½æ•°å†…éƒ¨ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œè¯¥å˜é‡é»˜è®¤ä¸ºå±€éƒ¨å˜é‡ï¼Œé™¤éæ˜ç¡®è¯´æ˜å®ƒæ˜¯å…¨å±€å˜é‡ã€‚
```
x = 1 
def change_global(): 
	global x 
	x = x + 1 

change_global() 
print(x)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2
```


## rangeè‡ªç„¶æ•°åºåˆ—
- range() å‡½æ•°çš„ç”¨æ³•ç±»ä¼¼äºä½¿ç”¨åˆ‡ç‰‡
- range(startï¼Œstopï¼Œstep)
- start çš„é»˜è®¤å€¼ä¸º 0ã€‚å”¯ä¸€è¦æ±‚çš„å‚æ•°å€¼æ˜¯ stopï¼Œäº§ç”Ÿçš„æœ€åä¸€ä¸ªæ•°çš„å€¼æ˜¯ stop çš„å‰ä¸€ä¸ª
- step çš„é»˜è®¤å€¼æ˜¯1ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åå‘åˆ›å»ºè‡ªç„¶æ•°åºåˆ—ï¼Œè¿™æ—¶ step çš„å€¼ä¸º -1ã€‚
```
å¦‚ï¼š
list( range(0, 11, 2) )
for x in range(2, -1, -1):
for x in range(0,3):
list( range(0, 3) )
```

## å…¨å±€å˜é‡

å‡½æ•°å†…éƒ¨ä½¿ç”¨globalå£°æ˜ä¸€ä¸‹å³å¯
```
animal = 'fruitbat'
def change_and_print_global():
	global animal
	animal = 'wombat'
	print('inside change_and_print_global:', animal)

print(animal)
change_and_print_global()
print(animal)

[huawei@n148 postdb_doc]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py"
fruitbat
('inside change_and_print_global:', 'wombat')
wombat
```

## å‘½åç©ºé—´

Python æä¾›äº†ä¸¤ä¸ªè·å–å‘½åç©ºé—´å†…å®¹çš„å‡½æ•°ï¼š
- locals() è¿”å›ä¸€ä¸ªå±€éƒ¨å‘½åç©ºé—´å†…å®¹çš„å­—å…¸ï¼›
- globals() è¿”å›ä¸€ä¸ªå…¨å±€å‘½åç©ºé—´å†…å®¹çš„å­—å…¸ã€‚

```
animal = 'fruitbat'
def change_local():
	animal = 'wombat'
	print('locals:',locals())


print(animal)
change_local()
print('globals:', globals())
print(animal)

[huawei@n148 postdb_doc]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py"
fruitbat
('locals:', {'animal': 'wombat'})
('globals:', {'__builtins__': <module '__builtin__' (built-in)>, '__file__': '/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py', '__package__': None, 'change_local': <function change_local at 0x7f9b8b392758>, 'animal': 'fruitbat', '__name__': '__main__', '__doc__': None})
fruitbat
```
# å‘½ä»¤è¡Œ

## å‚æ•°sys.argv
æ˜¯ä¸ªåˆ—è¡¨
```
import sys
print('Program arguments:',sys.argv)

[huawei@n148 pltest]$ python3 pyth.py 
Program arguments: ['pyth.py']
[huawei@n148 pltest]$ python3 pyth.py  tra la la
Program arguments: ['pyth.py', 'tra', 'la', 'la']
[huawei@n148 postdb_doc]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py"
('Program arguments:', ['/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py'])
[huawei@n148 postdb_doc]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py" tra la la
('Program arguments:', ['/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py', 'tra', 'la', 'la'])
[huawei@n148 postdb_doc]$ 
```
# åºåˆ—çš„åˆ†ç±»

## æ‰å¹³åºåˆ—
æ˜¯ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´ã€‚å­˜æ”¾å¦‚å­—ç¬¦ã€å­—èŠ‚å’Œæ•°å€¼è¿™ç§åŸºç¡€ç±»å‹ï¼Œå­˜å‚¨çš„æ˜¯å€¼è€Œä¸æ˜¯å¼•ç”¨ã€‚ä½“ç§¯æ›´å°ã€é€Ÿåº¦æ›´å¿«è€Œä¸”ç”¨èµ·æ¥æ›´ç®€å•ï¼Œä½†æ˜¯å®ƒåªèƒ½ä¿å­˜ä¸€äº›åŸå­æ€§çš„æ•°æ®ï¼Œæ¯”å¦‚æ•°å­—ã€å­—ç¬¦å’Œå­—èŠ‚ã€‚æ‰å¹³åºåˆ—å› ä¸ºåªèƒ½åŒ…å«åŸå­æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°æˆ–å­—ç¬¦ï¼Œæ‰€ä»¥ä¸èƒ½åµŒå¥—ä½¿ç”¨ã€‚

- str
- bytes
- bytearray
- memoryview
- array.array

## å®¹å™¨åºåˆ—
å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„å¯¹è±¡çš„å¼•ç”¨ã€‚å®¹å™¨åºåˆ—åˆ™æ¯”è¾ƒçµæ´»ï¼Œä½†æ˜¯å½“å®¹å™¨åºåˆ—é‡åˆ°å¯å˜å¯¹è±¡æ—¶ï¼Œç”¨æˆ·å°±éœ€è¦æ ¼å¤–å°å¿ƒäº†ï¼Œå› ä¸ºè¿™ç§ç»„åˆæ—¶å¸¸ä¼šæå‡ºä¸€äº›â€œæ„å¤–â€ï¼Œç‰¹åˆ«æ˜¯å¸¦åµŒå¥—çš„æ•°æ®ç»“æ„å‡ºç°æ—¶ï¼Œç”¨æˆ·è¦å¤šè´¹ä¸€äº›å¿ƒæ€æ¥ä¿è¯ä»£ç çš„æ­£ç¡®ã€‚


- list
- tuple
- collections.deque

## éå®¹å™¨åºåˆ—
- æ˜ å°„å…³ç³»çš„å®¹å™¨dict
- åªæœ‰keyçš„å®¹å™¨set
## å¯å˜åºåˆ—

listã€bytearrayã€array.arrayã€collections.deque å’Œ memoryviewã€‚

## ä¸å¯å˜åºåˆ—

tupleã€str å’Œ bytesã€‚


# æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼
åˆ—è¡¨æ¨å¯¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼åˆ™æä¾›äº†çµæ´»æ„å»ºå’Œåˆå§‹åŒ–åºåˆ—çš„æ–¹å¼ï¼Œè¿™ä¸¤ä¸ªå·¥å…·éƒ½å¼‚å¸¸å¼ºå¤§ã€‚
## åˆ—è¡¨æ¨å¯¼
## å­—å…¸æ¨å¯¼
å°†å…ƒç¥–çš„åˆ—è¡¨æ¨å¯¼ä¸ºå­—å…¸
```
DIAL_CODES = [
	(86, 'China'),
	(91, 'India'),
	(1, 'United States'),
	(62, 'Indonesia'),
	(55, 'Brazil'),
	(92, 'Pakistan'),
	(880, 'Bangladesh'),
	(234, 'Nigeria'),
	(7, 'Russia'),
	(81, 'Japan'),
]

# è¿­ä»£åˆ—è¡¨ï¼Œå°†itemæ‹†åŒ…ä¸ºcodeä¸countryï¼Œå¹¶ä½¿ç”¨æ­¤2æ„å»ºå­—å…¸
country_code = {country: code for code, country in DIAL_CODES}
print(country_code)
country_code = {code: country.upper() for country, code in country_code.items() if code < 66}
print(country_code)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
{'China': 86, 'India': 91, 'United States': 1, 'Indonesia': 62, 'Brazil': 55, 'Pakistan': 92, 'Bangladesh': 880, 'Nigeria': 234, 'Russia': 7, 'Japan': 81}
{1: 'UNITED STATES', 62: 'INDONESIA', 55: 'BRAZIL', 7: 'RUSSIA'}
```

## é›†åˆæ¨å¯¼
```
ä¸€ä¸ªLatin-1 å­—ç¬¦é›†åˆï¼Œè¯¥é›†åˆé‡Œçš„æ¯ä¸ªå­—ç¬¦çš„ Unicode åå­—é‡Œéƒ½æœ‰â€œSIGNâ€è¿™ä¸ªå•è¯
# ä» unicodedata æ¨¡å—é‡Œå¯¼å…¥ name å‡½æ•°ï¼Œç”¨ä»¥è·å–å­—ç¬¦çš„åå­—ã€‚
from unicodedata import name
# æŠŠç¼–ç åœ¨ 32~255 ä¹‹é—´çš„å­—ç¬¦çš„åå­—é‡Œæœ‰â€œSIGNâ€å•è¯çš„æŒ‘å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªé›†åˆé‡Œ
s = {chr(i) for i in range(32, 256) if 'SIGN' in name(chr(i),'')}
print(s)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
{'Â®', 'Â§', 'Â±', '<', '%', 'Â°', 'Â©', 'Â¥', 'Â¶', '+', 'Â¤', '#', 'Â¬', 'Ã·', '$', '=', 'Â£', '>', 'Â¢', 'Âµ', 'Ã—'}
```

# å­—ç¬¦ä¸² str
- å­—ç¬¦ç»„æˆçš„åºåˆ—
- å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤æ‰€æœ‰çš„å…ƒç´ èµ‹å€¼å’Œåˆ‡ç‰‡èµ‹å€¼éƒ½æ˜¯éæ³•çš„ã€‚
- å¤šè¡Œçš„ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·
- Python3ä¸­çš„å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ä½¿ç”¨Unicodeç¼–ç æ–¹å¼ï¼Œä¸æ˜¯å­—èŠ‚æ•°ç»„

## ä¸‰ç§è¡¨ç¤ºæ–¹å¼
å­—ç¬¦ä¸²æœ‰ä¸‰ç§è¡¨ç¤ºæ–¹å¼ï¼š
- æ™®é€šå­—ç¬¦ä¸²  
æ™®é€šå­—ç¬¦ä¸²æŒ‡ç”¨å•å¼•å·ï¼ˆ'ï¼‰æˆ–åŒå¼•å·ï¼ˆï¼‚ï¼‰æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ã€‚è½¬ä¹‰å­—ç¬¦èµ·ä½œç”¨ã€‚

 
- åŸå§‹å­—ç¬¦ä¸² raw string  
ç”¨rå‰ç¼€çš„å­—ç¬¦ä¸²å†…å®¹ä¸ä¼šè½¬ä¹‰
```
s2=r"hello\nworld"
print(s2)

[huawei@n161 ccc]$ python3 1.py
hello\nworld
```

- é•¿å­—ç¬¦ä¸²  
ä½¿ç”¨3ä¸ªå¼•å·ï¼ˆå•åŒéƒ½å¯ä»¥ï¼‰åŒ…å›´çš„å­—ç¬¦ä¸²ï¼Œä¼šåŒ…å«æ¢è¡Œã€æ’ç‰ˆã€ç¼©è¿›ç­‰


è¿˜æœ‰å›¾æ ‡çš„ï¼Œè§ä¸‹ä¾‹æœ€åã€‚
```
#!/usr/bin/python3
print('''This is a very long string. It continues here. 
And it's not over yet. "Hello, world!" 
Still here.''')
print(r'C:\Program Files\fnord\foo\bar\baz\frozz\bozz')
print(r'Let\'s go!') 
print('C:\\nowhere') 
print(r'C:\Program Files\foo\bar' '\\') 
print("This is a cat: \N{Cat}")

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
This is a very long string. It continues here. 
And it's not over yet. "Hello, world!" 
Still here.
C:\Program Files\fnord\foo\bar\baz\frozz\bozz
Let\'s go!
C:\nowhere
C:\Program Files\foo\bar\
This is a cat: ğŸˆ
```
## è¡Œè¿æ¥ç¬¦ \
```

alphabet = 'abcdefg' + \
'hijklmnop' + \
'qrstuv' + \
'wxyz'

print(alphabet)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
abcdefghijklmnopqrstuvwxyz
```
## å¤§å†™ã€å°å†™ã€é¦–å­—æ¯å¤§å°
```
#!/usr/bin/python3
name = "ada lovelace"
print(name.title())
print(name.upper())
print(name.lower())

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Ada Lovelace
ADA LOVELACE
ada lovelace
```
## strè½¬intã€float
```
print(int('80'))
print(float('80.0'))
print(int('AB', 16))	# æŒ‡å®š16è¿›åˆ¶å¯ä»¥è½¬æ¢
# print(int('AB'))	# é»˜è®¤å°†å‚æ•°è¿›è¡Œåè¿›åˆ¶è½¬æ¢ï¼Œä¼šå¤±è´¥
# print(int('80.0'))	# å‚æ•°éåè¿›åˆ¶ï¼Œæµ®ç‚¹ä¹Ÿå¤±è´¥

[huawei@n161 ccc]$ python3 1.py
80
80.0
171
```

## intã€floatã€boolè½¬str

```
print(str(321))
print(str(123.321))
print(str(True))

[huawei@n161 ccc]$ python3 1.py
321
123.321
True
```
## å­—ç¬¦æ•°é‡ len
å­—ç¬¦ä¸²å‡½æ•° len å¯ä»¥è®¡ç®—å­—ç¬¦ä¸²ä¸­ Unicode å­—ç¬¦çš„ä¸ªæ•°ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•°

```
letters = 'abcdefghijklmnopqrstuvwxyz'
print(len(letters))
```

## å­—èŠ‚æ•°é‡
å–å­—èŠ‚æ•°è§ç¼–ç encodeæ¡ˆä¾‹
## åˆ¤æ–­å¼€å¤´ã€ç»“å°¾
```
letters = 'abcdefghijklmnopqrstuvwxyz'
print(letters.startswith('abc'))
print(letters.endswith('abc'))
[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
True
False
```
è·å–æŒ‡å®šæ‰©å±•åæ–‡ä»¶åˆ—è¡¨
```
filenames = [ 'Makefile', 'foo.c', 'bar.py', 'spam.c', 'spam.h' ] 
print([name for name in filenames if name.endswith(('.c', '.h')) ])

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
['foo.c', 'spam.c', 'spam.h']
```
## åˆ¤æ–­éƒ½æ˜¯å­—æ¯æ•°å­—
poem.isalnum()
## é¦–å­—æ¯å˜å¤§å†™
setup.capitalize()
## æ‰€æœ‰å•è¯çš„å¼€å¤´å­—æ¯å˜å¤§å†™
setup.title()

## æ‰€æœ‰å­—æ¯éƒ½å¤§å†™
setup.upper()

## æ‰€æœ‰å­—æ¯éƒ½å°å†™
setup.lower()

## æ‰€æœ‰å­—æ¯å¤§å°å†™äº’æ¢
setup.swapcase()
## å·¦å¯¹é½ã€å³å¯¹é½ã€å±…ä¸­
- setup.ljust(30)
- setup.rjust(30)
- setup.center(30)

## å–å­—ç¬¦
å½“åšæ•°æ®è¿›è¡Œç´¢å¼•å³å¯
```
letters = 'abcdefghijklmnopqrstuvwxyz'
print(letters[0])
print(letters[1])
print(letters[2])
print(letters[-1])
print(letters[-2])

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
a
b
c
z
y
```
## æ ¼å¼åŒ–
- cé£æ ¼%æ–¹å¼
- shellé£æ ¼
- formatæ–¹æ³•ï¼Œå…³äºæ›´å¤šformatæ§åˆ¶ç¬¦å·å‚è§ã€ŠpythonåŸºç¡€ç»§æ‰¿ç¬¬äºŒç‰ˆ 3.3ã€‹
	- è¦å¯¹å­—å…¸æ‰§è¡Œå­—ç¬¦ä¸²æ ¼å¼è®¾ç½®æ“ä½œï¼Œä¸èƒ½ä½¿ç”¨formatå’Œå‘½åå‚æ•°ï¼Œè€Œå¿…é¡»ä½¿ç”¨format_mapã€‚è§å­—å…¸çš„formatéƒ¨åˆ†æ¡ˆä¾‹
- fæ–¹å¼ï¼Œæ˜¯Python 3.6å¼•å…¥çš„ï¼Œç”¨äºç®€åŒ–format

è¯¦ç»†å±…å·¦ä¿ç•™æ•°ä½ç­‰å‚åŠ pythonè¯­è¨€åŠå…¶åº”ç”¨7.1.2 æ ¼å¼åŒ–

```
#!/usr/bin/python3
from math import pi
from string import Template
from math import e
import math 

# cé£æ ¼
format = "Hello, %s. %s enough for ya?"
values = ('world', 'Hot') 
sss = format % values
print(sss)	# Hello, world. Hot enough for ya?

# shellé£æ ¼
tmpl = Template("Hello, $who! $what enough for ya?") 
sss = tmpl.substitute(who="Mars", what="Dusty")
print(sss)	# Hello, Mars! Dusty enough for ya?

# formaté£æ ¼ï¼Œ{}é‡Œä½¿ç”¨éœ€è¦åˆ™ä»0å¼€å§‹
sss = "{}, {} and {}".format("first", "second", "third") 
print(sss)	# first, second and third
print("{0}, {1} and {2}".format("first", "second", "third"))	# first, second and third
print("{3} {0} {2} {1} {3} {0}".format("be", "not", "or", "to"))	# to be or not to be
print("{name} is approximately {value:2f}".format(value=pi, name="Ï€"))	# Ï€ is approximately 3.141593
print("{name} is approximately {value}.".format(value=pi, name="Ï€")) 	# Ï€ is approximately 3.141592653589793.
print("{{ceci n'est pas une replacement field}}".format()) # {ceci n'est pas une replacement field}, åŒ…å«{}çš„å­—ç¬¦ä¸²
print("{foo} {} {bar} {}".format(1, 2, bar=4, foo=3))	# 3 1 4 2
print("{foo} {1} {bar} {0}".format(1, 2, bar=4, foo=3))	# 3 2 4 1

print("Euler's constant is roughly {e}.".format(e=e))	# Euler's constant is roughly 2.718281828459045.
print(f"Euler's constant is roughly {e}.") # python3.6ä¹‹åä½¿ç”¨ç®€å†™fï¼Œæ•ˆæœä¸ä¸Šä¸€å¥ç­‰ä»·
first_name = "ada"
last_name = "lovelace"
full_name = f"{first_name} {last_name}"
print(full_name)	# ada lovelace
message = f"Hello, {full_name.title()}!"
print(message)	# Hello, Ada Lovelace!

fullname = ["Alfred", "Smoketoomuch"] 
print("Mr {name[1]}".format(name=fullname))	# Mr Smoketoomuchï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ—è¡¨å…ƒç´ 

tmpl = "The {mod.__name__} module defines the value {mod.pi} for Ï€" 
sss = tmpl.format(mod=math)	# è¿˜å¯ä»¥ä½¿ç”¨åŒ…ï¼ˆåŒ…åï¼šmod.__name__ã€åŒ…é‡Œçš„å˜é‡ï¼šmod.piï¼‰
print(sss)	# The math module defines the value 3.141592653589793 for Ï€
```
## å±…ä¸­
ç”¨æŒ‡å®šå­—ç¬¦å¡«å……ä¸¤è¾¹
```
print("The Middle by Jimmy Eat World".center(39, "*")) 

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
*****The Middle by Jimmy Eat World*****
```
## åˆ ä¸¤ç«¯ç©ºç™½æˆ–å­—ç¬¦
- lstrip
- strip
	åˆ é™¤ä¸¤ç«¯ç©ºæ ¼ï¼Œä¹Ÿå¯åˆ é™¤é€šè¿‡å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä»¬ï¼Œè§ä¸‹ä¾‹
- rstrip
	å¯ç”¨äºåœ¨readæ–‡ä»¶åå»é™¤æ–‡ä»¶æœ«å°¾å¤šä½™çš„ç©ºç™½æˆ–æ¢è¡Œï¼Œè§æ–‡ä»¶è¯»å–æ¡ˆä¾‹
```
åˆ é™¤å¼€å¤´æˆ–æœ«å°¾çš„æŒ‡å®šå­—ç¬¦ï¼Œå› æ­¤ä¸­é—´çš„æ˜Ÿå·æœªè¢«åˆ é™¤ã€‚
print('*** SPAM * for * everyone!!! ***'.strip(' *!'))

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
SPAM * for * everyone
```
ä½¿ç”¨stripåˆ é™¤æ¯è¡Œçš„ä¸¤è¾¹ç©ºç™½
```
with open('pi_digits.txt') as file_object:
    lines = file_object.readlines()
pi_string = ''
for line in lines:
	pi_string += line.strip()
print(pi_string)
print(len(pi_string))

[huawei@n148 pytest]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
3.141592653589793238462643383279
32

[huawei@n148 pytest]$ cat pi_digits.txt 
3.1415926535 
  8979323846 
  2643383279
```
## æ¯”è¾ƒ
ä¾ç„¶ä½¿ç”¨==ä¸!=
```
#!/usr/bin/python3
requested_topping = 'mushrooms'
if requested_topping != 'anchovies':
	print("Hold the anchovies!")
car = 'Audi'
print(car.lower() == 'audi')

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Hold the anchovies!
True
```
## nå€å­—ç¬¦ä¸²
ä½¿ç”¨ä¹˜æ³•*ï¼Œæ•ˆæœåŒperl
```
print('python ' * 5) # python python python python python 
```
## æ£€æµ‹åŒ…å«å­—ç¬¦
```
permissions = 'rw' 
print('w' in permissions)	# True
subject = '$$$ Get rich now!!! $$$' 
print('$$$' in subject)		# True
```
## æŸ¥æ‰¾ findã€rfind
rfindæ˜¯ä»åå‘å‰æ‰¾ï¼Œä½†è¿”å›çš„indexè¿˜æ˜¯ä»å‰å‘åçš„æ•°çš„
```
# è¿”å›indexï¼Œå¦åˆ™è¿”å›-1ã€‚èµ·ç‚¹å’Œç»ˆç‚¹å€¼ï¼ˆç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰æŒ‡å®šçš„æœç´¢èŒƒå›´åŒ…å«èµ·ç‚¹ï¼Œä½†ä¸åŒ…å«ç»ˆç‚¹ã€‚
subject = "$$$ Get rich now!!! $$$"
print(subject.find('$$$')) 
print(subject.find('$$$', 1)) # åªæŒ‡å®šäº†èµ·ç‚¹
print(subject.find('!!!'))
print(subject.find('!!!', 0, 16)) # åŒæ—¶æŒ‡å®šäº†èµ·ç‚¹å’Œç»ˆç‚¹

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
0
20
16
-1
```
## joinã€split
splitè¿”å›åˆ—è¡¨
```
#!/usr/bin/python3
seq = ['1', '2', '3', '4', '5'] 
sep = '-'
print(sep.join(seq)) # 1-2-3-4-5ï¼Œ åˆå¹¶ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨
dirs = '', 'usr', 'bin', 'env' # è¿™æ˜¯ä¸ªå…ƒç¥–ï¼Œé¦–å…ƒç´ ä¸ºç©ºç”¨äºjoinåå¼€å¤´çš„â€œ/â€
print(dirs)
print('/'.join(dirs)) 	#  /usr/bin/env
print('C:' + '\\'.join(dirs))  # C:\usr\bin\env



print('1+2+3+4+5'.split('+'))	# ['1', '2', '3', '4', '5']
```
## å‡ºç°çš„æ¬¡æ•° count
```
line = "Row, row, row your boat"
print(line.count('row'))
print(line.lower().count('row'))

[huawei@n148 pytest]$ python3 pyth.py 
2
3
```
## ç»Ÿè®¡å•è¯æ•°é‡
ä½¿ç”¨äº†å¼‚å¸¸å¤„ç†ï¼Œå¹¶ä¸”å¯ä»¥ç»Ÿè®¡å¤šæœ¬ä¹¦çš„è¯æ•°
```
def count_words(filename):
	try:
		with open(filename, encoding='utf-8') as f:
			contents = f.read()
	except FileNotFoundError:
		print(f"Sorry, the file {filename} does not exist.")
	else:
		words = contents.split()
		num_words = len(words)
		print(f"The file {filename} has about {num_words} words.")


filenames = ['alice.txt', 'siddhartha.txt', 'moby_dick.txt', 'little_women.txt']
for filename in filenames:
	count_words(filename)

[huawei@n148 pytest]$ python3 pyth.py 
The file alice.txt has about 29465 words.
Sorry, the file siddhartha.txt does not exist.
Sorry, the file moby_dick.txt does not exist.
Sorry, the file little_women.txt does not exist.
```
## æ›¿æ¢å­—ç¬¦
ç”±äºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤æ— æ³•ç›´æ¥æ’å…¥å­—ç¬¦æˆ–æ”¹å˜æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚ä¸‹é¢æ–¹å¼æ˜¯éæ³•çš„
```
name = 'Henny'
name[0] = 'P'
```
å¯ä»¥ä½¿ç”¨replaceæˆ–åˆ‡ç‰‡è¾¾åˆ°æ›¿æ¢çš„æ•ˆæœ
```
name = 'Henny'
print(name.replace('H', 'P'))
print('P' + name[1:])

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
Penny
Penny
```
## æ›¿æ¢ replace
å‚æ•°ï¼š
- éœ€è¦è¢«æ›¿æ¢çš„å­ä¸²
- ç”¨äºæ›¿æ¢çš„æ–°å­ä¸²
- ä»¥åŠéœ€è¦æ›¿æ¢å¤šå°‘å¤„ï¼Œçœç•¥æ­¤å‚æ•°å°†æ›¿æ¢æ‰€æœ‰
```
s1 = 'This is a test';
s2 = s1.replace('is', 'eez');	# æ›¿æ¢äº†ä¸¤å¤„
print(s1)
print(s2)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
This is a test
Theez eez a test
```
## ä½¿ç”¨ã€start:end:stepã€‘åˆ‡ç‰‡
- ã€:ã€‘ æå–ä»å¼€å¤´åˆ°ç»“å°¾çš„æ•´ä¸ªå­—ç¬¦ä¸²
- ã€start:ã€‘ ä» start æå–åˆ°ç»“å°¾
- ã€:endã€‘ ä»å¼€å¤´æå–åˆ° end - 1
- ã€start:endã€‘ ä» start æå–åˆ° end - 1
- ã€start:end:stepã€‘ ä» start æå–åˆ° end - 1ï¼Œæ¯ stepä¸ªå­—ç¬¦æå–ä¸€ä¸ª
- åç§»é‡ä»å·¦è‡³å³ä» 0ã€1 å¼€å§‹ï¼Œä¾æ¬¡å¢åŠ 
- ä»å³è‡³å·¦ä»-1ã€-2 å¼€å§‹ï¼Œä¾æ¬¡å‡å°
- å¦‚æœçœç•¥ startï¼Œåˆ†ç‰‡ä¼šé»˜è®¤ä½¿ç”¨åç§»é‡0ï¼ˆå¼€å¤´ï¼‰
- å¦‚æœçœç•¥ endï¼Œåˆ†ç‰‡ä¼šé»˜è®¤ä½¿ç”¨åç§»é‡ -1ï¼ˆç»“å°¾ï¼‰
```

letters = 'abcdefghijklmnopqrstuvwxyz'
print(letters[:])	# abcdefghijklmnopqrstuvwxyz	æå–æ•´ä¸ªå­—ç¬¦ä¸²
print(letters[20:])	 # uvwxyz 	ä»åç§»é‡ 20 æå–åˆ°å­—ç¬¦ä¸²ç»“å°¾
print(letters[10:])	# klmnopqrstuvwxyz ä»åç§»é‡ 10 æå–åˆ°ç»“å°¾
print(letters[12:15]) # mno  ä» 12 åˆ° 14 çš„å­—ç¬¦
print(letters[-3:])	# xyz æå–æœ€åä¸‰ä¸ªå­—ç¬¦
print(letters[18:-3]) # stuvw	ä»åç§»é‡ä¸º 18 çš„å­—ç¬¦åˆ°å€’æ•°ç¬¬ 4 ä¸ªå­—ç¬¦, æ³¨æ„ä¸ä¸Šä¸€ä¸ª
ä¾‹å­çš„åŒºåˆ«ï¼šå½“åç§»é‡ -3 ä½œä¸ºå¼€å§‹ä½ç½®æ—¶ï¼Œå°†è·å¾—å­—ç¬¦xï¼›è€Œå½“å®ƒä½œä¸ºç»ˆæ­¢ä½ç½®æ—¶ï¼Œåˆ†ç‰‡å®é™…
ä¸Šä¼šåœ¨åç§»é‡ -4 å¤„åœæ­¢ï¼Œä¹Ÿå°±æ˜¯æå–åˆ°å­—ç¬¦ w

print(letters[-6:-2]) # uvwx	ä»å€’æ•°ç¬¬ 6 ä¸ªå­—ç¬¦åˆ°å€’æ•°ç¬¬ 3 ä¸ªå­—ç¬¦
print(letters[::7])	# ahov	ä»å¼€å¤´æå–åˆ°ç»“å°¾ï¼Œæ­¥é•¿è®¾ä¸º 7
print(letters[4:20:3]) # ehknqt	ä»åç§»é‡ 4 æå–åˆ°åç§»é‡ 19ï¼Œæ­¥é•¿è®¾ä¸º 3
print(letters[19::4]) # tx	ä»åç§»é‡ 19 æå–åˆ°ç»“å°¾ï¼Œæ­¥é•¿è®¾ä¸º 4
print(letters[:21:5]) # afkpu	ä»å¼€å¤´æå–åˆ°åç§»é‡ 20ï¼Œæ­¥é•¿è®¾ä¸º 5,è®°ä½ï¼Œåˆ†ç‰‡
ä¸­ end çš„åç§»é‡éœ€è¦æ¯”å®é™…æå–çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„åç§»é‡å¤š 1

# å¦‚æœæŒ‡å®šçš„æ­¥é•¿ä¸ºè´Ÿæ•°ä¼šä»å³åˆ°å·¦åå‘è¿›è¡Œæå–æ“ä½œã€‚
print(letters[-1::-1]) # zyxwvutsrqponmlkjihgfedcba   ä»å³åˆ°å·¦ä»¥æ­¥é•¿ä¸º 1 è¿›è¡Œæå–ï¼Œä¸‹é¢çš„
æ•ˆæœä¸€æ ·ä¹Ÿæ›´ç®€å•
print(letters[::-1]) # zyxwvutsrqponmlkjihgfedcba æ•ˆæœåŒä¸Š

# åœ¨åˆ†ç‰‡ä¸­ï¼Œå°äºèµ·å§‹ä½ç½®çš„åç§»é‡ä¼šè¢«å½“ä½œ 0ï¼Œå¤§äºç»ˆæ­¢ä½ç½®çš„åç§»é‡ä¼šè¢«å½“ä½œ -1ï¼Œ
print(letters[-50:]) # abcdefghijklmnopqrstuvwxyz æå–å€’æ•° 50 ä¸ªå­—ç¬¦
print(letters[-50:-51]) # å¾—åˆ°ç©ºï¼Œæå–ä»å€’æ•°ç¬¬ 51 åˆ°å€’æ•°ç¬¬ 50 ä¸ªå­—ç¬¦
print(letters[:70])	# abcdefghijklmnopqrstuvwxyz  ä»å¼€å¤´æå–åˆ°åç§»é‡ä¸º 69 çš„å­—ç¬¦
print(letters[70:71])  # å¾—åˆ°ç©ºï¼Œ ä»åç§»é‡ä¸º 70 çš„å­—ç¬¦æå–åˆ°åç§»é‡ä¸º 71 çš„å­—ç¬¦
```
## å–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†
å…¶å®å°±æ˜¯åˆ‡ç‰‡æ“ä½œ...
```
with open('pi_digits.txt') as file_object:
    lines = file_object.readlines()
pi_string = ''
for line in lines:
	pi_string += line.strip()
print(pi_string)
print(f"{pi_string[:20]}...")
print(len(pi_string))

[huawei@n148 pytest]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
3.141592653589793238462643383279
3.141592653589793238...
32
```


## ç¼–ç  encode
- å­—ç¬¦çš„æ ‡è¯†ï¼Œå³ç ä½ï¼Œæ˜¯ 0~1 114 111 çš„æ•°å­—ï¼ˆåè¿›åˆ¶ï¼‰ï¼Œåœ¨ Unicode æ ‡å‡†ä¸­ä»¥ 4~6 ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºï¼Œè€Œä¸”åŠ å‰ç¼€â€œU+â€ã€‚çº¦ 10% çš„æœ‰æ•ˆç ä½æœ‰å¯¹åº”çš„å­—ç¬¦ã€‚
- å­—ç¬¦çš„å…·ä½“è¡¨è¿°å–å†³äºæ‰€ç”¨çš„ç¼–ç ï¼ˆå¦‚utf8ï¼‰ã€‚ç¼–ç æ˜¯åœ¨ç ä½å’Œå­—èŠ‚åºåˆ—ä¹‹é—´è½¬æ¢æ—¶ä½¿ç”¨çš„ç®—æ³•ã€‚
- ç¼–ç æ˜¯å°†ç ä½è½¬æ¢æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹
- encodeæ”¯æŒç¬¬äºŒä¸ªå‚æ•°ç”¨äºæŒ‡å®šå½“ç›®æ ‡ç¼–ç æ— æ­¤å­—ç¬¦æ—¶æ˜¯å¼‚å¸¸è¿˜æ˜¯å¿½ç•¥çš„æ“ä½œ

	å¦‚æœä½ æƒ³è¦ä½¿ç”¨ ascii æ–¹å¼è¿›è¡Œç¼–ç ï¼Œå¿…é¡»ä¿è¯å¾…ç¼–ç çš„å­—ç¬¦ä¸²ä»…åŒ…å« ASCII å­—ç¬¦é›†é‡Œçš„å­—ç¬¦ï¼Œä¸å«æœ‰ä»»ä½•å…¶ä»–çš„ Unicode å­—ç¬¦ï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯
- å°½å¯èƒ½ç»Ÿä¸€ä½¿ç”¨ UTF-8 ç¼–ç ã€‚å‡ºé”™ç‡ä½ï¼Œå…¼å®¹æ€§å¥½ï¼Œå¯ä»¥è¡¨è¾¾æ‰€æœ‰çš„ Unicode å­—ç¬¦ï¼Œç¼–ç å’Œè§£ç çš„é€Ÿåº¦åˆå¿«
- å¯ä»¥æŠŠå­—èŠ‚åºåˆ—æƒ³æˆæ™¦æ¶©éš¾æ‡‚çš„æœºå™¨ç£èŠ¯è½¬å‚¨ï¼ŒæŠŠ Unicode å­—ç¬¦ä¸²æƒ³æˆâ€œäººç±»å¯è¯»â€çš„æ–‡æœ¬ã€‚é‚£ä¹ˆï¼ŒæŠŠå­—èŠ‚åºåˆ—å˜æˆäººç±»å¯è¯»çš„æ–‡æœ¬å­—ç¬¦ä¸²å°±æ˜¯è§£ç ï¼Œè€ŒæŠŠå­—ç¬¦ä¸²å˜æˆç”¨äºå­˜å‚¨æˆ–ä¼ è¾“çš„å­—èŠ‚åºåˆ—å°±æ˜¯ç¼–ç ã€‚

```
snowman = '\u2603'	# å°†Unicode å­—ç¬¦ä¸² '\u2603' èµ‹å€¼ç»™ snowmanã€‚
print(snowman)
print(len(snowman))	# snowman æ˜¯ä¸€ä¸ªä»…åŒ…å«ä¸€ä¸ªå­—ç¬¦çš„ Unicode å­—ç¬¦ä¸²ï¼Œè¿™ä¸å®ƒå­˜å‚¨æ‰€éœ€çš„å­—èŠ‚æ•°æ²¡æœ‰ä»»ä½•å…³ç³»
ds = snowman.encode('utf-8')	# å°†Unicodeå­—ç¬¦ç¼–ç ä¸ºå­—èŠ‚åºåˆ—ã€‚UTF-8 æ˜¯ä¸€ç§å˜é•¿ç¼–ç æ–¹å¼ï¼Œdsæ˜¯ä¸€ä¸ªbytesç±»å‹çš„å˜é‡
print(len(ds))	# å ç”¨äº† 3 å­—èŠ‚çš„ç©ºé—´ï¼Œæ³¨æ„ä¸æ˜¯æ‰€æœ‰å•ä¸ª Unicodeå­—ç¬¦éƒ½æ˜¯3
print(ds)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
â˜ƒ
1
3
b'\xe2\x98\x83'
```
## è§£ç  decode

- è§£ç æ˜¯å°†å­—èŠ‚åºåˆ—è½¬æ¢æˆç ä½çš„è¿‡ç¨‹
```
place = 'caf\u00e9'	# unicodeå­—ç¬¦ä¸²
print(place)
print(len(place))
print(type(place))
place_bytes = place.encode('utf-8')	# å°†å®ƒä»¥ UTF-8 æ ¼å¼ç¼–ç ä¸º bytes å‹å˜é‡
print(place_bytes)
print(len(place_bytes))
print(type(place_bytes))
place2 = place_bytes.decode('utf-8') # å†è§£å›æ¥
print(place2)
print(len(place2))
print(type(place2))

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
cafÃ©
4
<class 'str'>
b'caf\xc3\xa9'
5
<class 'bytes'>
cafÃ©
4
<class 'str'>
```
## ç»Ÿä¸€å­—ç¬¦ç¼–ç ä¾¦æµ‹åŒ… Chardet
èƒ½è¯†åˆ«æ‰€æ”¯æŒçš„ 30 ç§ç¼–ç  https://pypi.python.org/pypi/chardet

# åˆ—è¡¨ã€ã€‘ list
- åˆ—è¡¨éå¸¸é€‚åˆåˆ©ç”¨é¡ºåºå’Œä½ç½®å®šä½æŸä¸€å…ƒç´ 
- åˆ—è¡¨å…ƒç´ æ˜¯å¯å˜çš„
- ä½¿ç”¨ä¸­æ‹¬å·å®šä¹‰
- åœ¨åˆ—è¡¨ä¸­ï¼Œå…·æœ‰ç›¸åŒå€¼çš„å…ƒç´ å…è®¸å‡ºç°å¤šæ¬¡
- å¯ä»¥åŒæ—¶å®¹çº³ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œä½†æ˜¯å®é™…ä¸Šè¿™æ ·åšå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å¥½å¤„ï¼Œæ¯”å¦‚ä¸èƒ½å¯¹åˆ—è¡¨è¿›è¡Œæ’åºã€‚å…ƒç»„åˆ™æ°æ°ç›¸åï¼Œå®ƒç»å¸¸ç”¨æ¥å­˜æ”¾ä¸åŒç±»å‹çš„çš„å…ƒç´ ã€‚è¿™ä¹Ÿç¬¦åˆå®ƒçš„æœ¬è´¨ï¼Œå…ƒç»„å°±æ˜¯ç”¨ä½œå­˜æ”¾å½¼æ­¤ä¹‹é—´æ²¡æœ‰å…³ç³»çš„æ•°æ®çš„è®°å½•ã€‚


## åˆ›å»ºä¸è®¿é—®å…ƒç´ 
### æ‰‹åŠ¨åˆå§‹åŒ–æ•°æ®
- [å…ƒç´ 1ï¼Œå…ƒç´ 2ï¼Œå…ƒç´ 3ï¼Œâ‹¯]ï¼šæŒ‡å®šå…·ä½“çš„åˆ—è¡¨å…ƒç´ ï¼Œå…ƒç´ ä¹‹é—´ä»¥é€—å·åˆ†éš”ï¼Œåˆ—è¡¨å…ƒç´ éœ€è¦ä½¿ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥ã€‚
- ç´¢å¼•-1æŒ‡å‘æœ€åä¸€ä¸ªï¼Œ-2åˆ™æ˜¯å€’æ•°ç¬¬äºŒä¸ªï¼Œä»¥æ­¤ç±»æ¨
```
#!/usr/bin/python3
bicycles = ['trek', 'cannondale', 'redline', 'specialized']
print(bicycles)
print(bicycles[0])
print(bicycles[0].title())
print(bicycles[-1])
print(bicycles[-2])

message = f"My first bicycle was a {bicycles[0].title()}."
print(message)
[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['trek', 'cannondale', 'redline', 'specialized']
trek
Trek
specialized
redline
My first bicycle was a Trek.
```
### ä½¿ç”¨rangeåˆå§‹åŒ–
```
#!/usr/bin/python3
for value in range(1, 6):	# äº§ç”Ÿåˆ—è¡¨[1,2,3,4,5]ï¼Œæ³¨æ„æ²¡æœ‰6
	print(value)
numbers = list(range(1, 6))	# äº§ç”Ÿåˆ—è¡¨èµ‹å€¼
print(numbers)
even_numbers = list(range(2, 11, 2))	# å¯ä»¥æŒ‡å®šæ­¥é•¿
print(min(even_numbers))
print(max(even_numbers))
print(sum(even_numbers))

squares = [value**2 for value in range(1, 11)] # ç±»ä¼¼perl mapæ–¹æ³•
print(squares)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
1
2
3
4
5
[1, 2, 3, 4, 5]
2
10
30
[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
```
### ä½¿ç”¨*åˆå§‹åŒ–
ç”ŸæˆåŒ…å«nä¸ªæŒ‡å®šåˆå€¼å…ƒç´ çš„åˆ—è¡¨
```
sequence = [None] * 10  # [None, None, None, None, None, None, None, None, None, None]
```
### ä½¿ç”¨liståˆå§‹åŒ–
ä½¿ç”¨list(iterable)å°†å…¶ä»–æ•°æ®ç±»å‹è½¬æ¢æˆåˆ—è¡¨ï¼Œå‡½æ•°çš„å‚æ•°iterableæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆå’Œå­—å…¸ç­‰ï¼‰ã€‚

- å­—ç¬¦ä¸²è½¬å­—ç¬¦åˆ—è¡¨
```
arr = list('Hello')
print(arr)	# ['H', 'e', 'l', 'l', 'o']

å¯ä»¥ä½¿ç”¨ ''.join(somelist) å†è¿èµ·æ¥
```
- åˆ›å»ºç©ºçš„åˆ—è¡¨
```
another_empty_list = list()
```
- å…ƒç¥–è½¬åˆ—è¡¨
```
a_tuple = ('ready', 'fire', 'aim')
print(list(a_tuple))
```
## ä½¿ç”¨=èµ‹å€¼ï¼ˆç±»ä¼¼å¼•ç”¨ï¼‰ï¼Œä½¿ç”¨copy()å¤åˆ¶
- å¦‚æœå°†ä¸€ä¸ªåˆ—è¡¨èµ‹å€¼ç»™äº†å¤šä¸ªå˜é‡ï¼Œæ”¹å˜å…¶ä¸­çš„ä»»ä½•ä¸€å¤„ä¼šé€ æˆå…¶ä»–å˜é‡å¯¹åº”çš„å€¼ä¹Ÿè¢«ä¿®æ”¹ï¼Œå³ä¸èƒ½ä½¿ç”¨ç­‰å·è¿›è¡Œå¤åˆ¶ï¼Œè§ä¸‹ä¾‹ï¼Œè¿™é‡Œçš„ç»“æœç±»ä¼¼å¼•ç”¨
```
#!/usr/bin/python3
my_foods = ['pizza', 'falafel', 'carrot cake']
friend_foods = my_foods
my_foods.append('cannoli')
print(my_foods)
print(friend_foods)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['pizza', 'falafel', 'carrot cake', 'cannoli']
['pizza', 'falafel', 'carrot cake', 'cannoli']
```
- ä½¿ç”¨åˆ‡ç‰‡æ–¹å¼[:]ä¸listæ–¹æ³•å¾—åˆ°çš„ä¹Ÿå“Ÿå¯èƒ½è¿˜æ˜¯æµ…æ‹·è´ï¼Œå–å†³äºåˆ—è¡¨æ˜¯å¦åµŒå¥—
- ä½¿ç”¨copyã€deepcopyè¿›è¡Œæ·±æ‹·è´è§£å†³é—®é¢˜
```
#!/usr/bin/python3
my_foods = ['pizza', 'falafel', 'carrot cake']

æ–¹æ³•1æœ‰å¯èƒ½è¿˜æ˜¯æµ…æ‹·è´ï¼š	friend_foods = my_foods[:]
æ–¹æ³•2ï¼š	friend_foods = my_foods.copy()
æ–¹æ³•3æœ‰å¯èƒ½è¿˜æ˜¯æµ…æ‹·è´ï¼š	friend_foods = list(my_foods)

my_foods.append('cannoli')
print(my_foods)
print(friend_foods)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['pizza', 'falafel', 'carrot cake', 'cannoli']
['pizza', 'falafel', 'carrot cake']
```
## åˆå¹¶ extend
- ä½¿ç”¨åŠ å·è¿æ¥ï¼Œäº§ç”Ÿæ–°çš„åˆ—è¡¨ï¼ŒåŸæœ‰åˆ—è¡¨ä¸å˜
- ä½¿ç”¨extendä¼šæ›´æ–°åŸæœ‰åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ +=
```
a = [1, 2, 3] 
b = [4, 5, 6] 
a.extend(b) # ç­‰äº a = a + bï¼Œä½†extendæ•ˆç‡é«˜ï¼Œä¹Ÿå¯ä»¥ a[len(a):] = b ï¼ˆä½†å¯è¯»æ€§å·®ï¼‰
print(a)	# [1, 2, 3, 4, 5, 6]
print(b)	# [4, 5, 6]
c = [7, 8, 9] 
d = b + c
print(b)	# [4, 5, 6]
print(c)	# [7, 8, 9]
print(d)	# [4, 5, 6, 7, 8, 9]
```
## å¢åˆ æ”¹æŸ¥
- append	æ·»åŠ å…ƒç´ è‡³å°¾éƒ¨
- insert	åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ 
- del	åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ 
- remove	åˆ é™¤å…·æœ‰æŒ‡å®šå€¼çš„å…ƒç´ 
- pop	è·å–å¹¶åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ 
```
#!/usr/bin/python3
motorcycles = []	# ç©ºåˆ—è¡¨
motorcycles.append('honda')	# æ·»åŠ åˆ°åˆ—è¡¨æœ«å°¾
motorcycles.append('yamaha')
motorcycles.append('suzuki')
print(motorcycles)
motorcycles[0] = 'ducati'	# ä¿®æ”¹å…ƒç´ 
print(motorcycles)
motorcycles.insert(1, 'aaa')	# æ’å…¥åˆ°æŒ‡å®šä½ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆ‡ç‰‡çš„æ’å…¥æ–¹å¼ï¼ˆå‚è€ƒåˆ‡ç‰‡æ“ä½œï¼‰
print(motorcycles)
del motorcycles[1]	# åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œä½¿ç”¨popå¯ä»¥å¾—åˆ°åˆ é™¤çš„å€¼
print(motorcycles)
popped_motorcycle = motorcycles.pop()	# åˆ é™¤å¹¶è¿”å›æœ«å°¾å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä½ç½®ï¼Œå¦‚ä¸‹
print(motorcycles)
print(popped_motorcycle)
first_owned = motorcycles.pop(0)
print(f"The first motorcycle I owned was a {first_owned.title()}.")

print("----------------")
motorcycles = ['honda', 'yamaha', 'suzuki', 'ducati']
motorcycles.remove('ducati')	# åˆ é™¤æŒ‡å®šå†…å®¹ï¼Œé»˜è®¤ä»…å»é™¤ç¬¬ä¸€ä¸ªï¼Œå…¨éƒ¨å»é™¤éœ€è¦å¾ªç¯ï¼Œå‚è€ƒä¸‹é¢
print(motorcycles)
```
å¾ªç¯å»é™¤æŒ‡å®šå…ƒç´ 
```
#!/usr/bin/python3
pets = ['dog', 'cat', 'dog', 'goldfish', 'cat', 'rabbit', 'cat']
print(pets)
while 'cat' in pets:
	pets.remove('cat')
print(pets)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['dog', 'cat', 'dog', 'goldfish', 'cat', 'rabbit', 'cat']
['dog', 'dog', 'goldfish', 'rabbit']
```
## æ¸…é™¤
```
numbers.clear() 
```
## æ’åºsortã€sorted
- åˆ—è¡¨æ–¹æ³• sort() ä¼šå¯¹åŸåˆ—è¡¨è¿›è¡Œæ’åºï¼Œæ”¹å˜åŸåˆ—è¡¨å†…å®¹
- é€šç”¨å‡½æ•° sorted() åˆ™ä¼šè¿”å›æ’å¥½åºçš„åˆ—è¡¨å‰¯æœ¬ï¼ŒåŸåˆ—è¡¨å†…å®¹ä¸å˜
- å‚æ•°reverseä¸ºtæ˜¯é™åºï¼Œé»˜è®¤f
- è¿˜æ”¯æŒä¸€ä¸ªkeyå›è°ƒç”¨äºè‡ªå®šä¹‰æ¯”è¾ƒæ–¹æ³•
```

fruits = ['grape', 'raspberry', 'apple', 'banana']
print(sorted(fruits))
print(fruits)
print(sorted(fruits, reverse=True))
print(sorted(fruits, key=len))	æ­¤å¤„ä½¿ç”¨é•¿åº¦è¿›è¡Œæ’åº
print(sorted(fruits, key=len, reverse=True))
print(fruits)
fruits.sort()
print(fruits)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
['apple', 'banana', 'grape', 'raspberry']
['grape', 'raspberry', 'apple', 'banana']
['raspberry', 'grape', 'banana', 'apple']
['grape', 'apple', 'banana', 'raspberry']
['raspberry', 'banana', 'grape', 'apple']
['grape', 'raspberry', 'apple', 'banana']
['apple', 'banana', 'grape', 'raspberry']
```
## é¢ å€’ reversed
- reverseå°†æ‰€æœ‰å…ƒç´ ååºï¼ˆç›´æ¥ä¿®æ”¹åˆ—è¡¨ï¼‰
- reversed
```
#!/usr/bin/python3
cars = ['bmw', 'audi', 'toyota', 'subaru']
cars.reverse()
print(cars)
[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['subaru', 'toyota', 'audi', 'bmw']
```

```
s = [4, 3, 6, 8, 3]
s2 = sorted(s)	# è¿”å›ä¸€ä¸ªåˆ—è¡¨
print(s)
print(s2)
s = 'Hello, world!'
s2 = sorted(s)
print(s)
print(s2)

s3 = list(reversed(s)) # reversedè¿”å›å¯è¿­ä»£å¯¹è±¡
print(s3)

s4 = ''.join(reversed(s)) 
print(s4)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
[4, 3, 6, 8, 3]
[3, 3, 4, 6, 8]
Hello, world!
[' ', '!', ',', 'H', 'd', 'e', 'l', 'l', 'l', 'o', 'o', 'r', 'w']
['!', 'd', 'l', 'r', 'o', 'w', ' ', ',', 'o', 'l', 'l', 'e', 'H']
!dlrow ,olleH
```
## åˆ¤æ–­ç©ºåˆ—è¡¨
```
#!/usr/bin/python3
requested_toppings = []
if requested_toppings:
	for requested_topping in requested_toppings:
 		print(f"Adding {requested_topping}.")
else:
	print("Are you sure you want a plain pizza?")
```
## é•¿åº¦ len
```
cars = ['bmw', 'audi', 'toyota', 'subaru']
print(len(cars))
```
## ç»Ÿè®¡å‡ºç°æ¬¡æ•° count
è®¡ç®—æŒ‡å®šçš„å…ƒç´ åœ¨åˆ—è¡¨ä¸­å‡ºç°äº†å¤šå°‘æ¬¡
```
print(['to', 'be', 'or', 'not', 'to', 'be'].count('to'))
x = [[1, 2], 1, 1, [2, 1, [1, 2]]] 
print(x.count(1))
print(x.count([1, 2]))

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2
2
1
```
## æˆå‘˜æµ‹è¯• inã€not in
è¡¨è¾¾å¼v in lï¼ˆå…¶ä¸­læ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼‰æŸ¥æ‰¾çš„æ˜¯å€¼è€Œä¸æ˜¯ç´¢å¼•
```
#!/usr/bin/python3
magicians = ['alice', 'david', 'carolina']
print('david' in magicians)
if 'xxx' not in magicians:
	print("not in")
```
åªè¦å…ƒç´ ç±»å‹ä¸€è‡´å³å¯è¿›è¡Œæ£€æµ‹
```
database = [ 
 ['albert', '1234'], 
 ['dilbert', '4242'], 
 ['smith', '7524'], 
 ['jones', '9843'] 
] 
username = 'smith'
pin = '7524'
if [username, pin] in database: print('Access granted')
```
## æŸ¥æ‰¾ index
åœ¨åˆ—è¡¨ä¸­æŸ¥æ‰¾æŒ‡å®šå€¼ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œä½†æ‰¾ä¸åˆ°åˆ™erräº†...éœ€è¦tryæ‰è¡Œ
```
knights = ['We', 'are', 'the', 'knights', 'who', 'say', 'ni'] 
print(knights.index('who')) 	# 4
knights.index('herring')	# err
```
## è½¬å­—ç¬¦ä¸²
```
marxes = ['Groucho', 'Chico', 'Harpo']
print(', '.join(marxes))

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
Groucho, Chico, Harpo
```
## éå†
- foreachå½¢å¼
```
#!/usr/bin/python3
magicians = ['alice', 'david', 'carolina']
for magician in magicians:
	print(f"{magician.title()}, that was a great trick!")
	print(f"I can't wait to see your next trick, {magician.title()}.\n")

print("Thank you, everyone. That was a great magic show!")


words = ['this', 'is', 'an', 'ex', 'parrot'] 
for word in words:
    print(word) 
for word in [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]:
 	print(word) 
for number in range(1,11):
    print(number) 
```
- enumerate  
  å³å¯ä»¥è·å¾—idxä¹Ÿèƒ½è·å¾—å…ƒç´ å†…å®¹ï¼Œæœ‰äº›æ—¶å€™å¯ä»¥ä»£æ›¿ä¸‹é¢çš„for
```
strings = "abcdefg"
for index, string in enumerate(strings): 
	print(index, string)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
0 a
1 b
2 c
3 d
4 e
5 f
6 g
```
- forå½¢å¼
```
names = ['anne', 'beth', 'george', 'damon'] 
ages = [12, 45, 32, 102] 
for i in range(len(names)): 
	print(names[i], 'is', ages[i], 'years old') 
```
- whileå½¢å¼
```
#!/usr/bin/python3
# é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå¾…éªŒè¯ç”¨æˆ·åˆ—è¡¨
 # å’Œä¸€ä¸ªç”¨äºå­˜å‚¨å·²éªŒè¯ç”¨æˆ·çš„ç©ºåˆ—è¡¨ã€‚
unconfirmed_users = ['alice', 'brian', 'candace']
confirmed_users = []
 # éªŒè¯æ¯ä¸ªç”¨æˆ·ï¼Œç›´åˆ°æ²¡æœ‰æœªéªŒè¯ç”¨æˆ·ä¸ºæ­¢ã€‚
 # å°†æ¯ä¸ªç»è¿‡éªŒè¯çš„ç”¨æˆ·éƒ½ç§»åˆ°å·²éªŒè¯ç”¨æˆ·åˆ—è¡¨ä¸­ã€‚
while unconfirmed_users:
	current_user = unconfirmed_users.pop()
	print(f"Verifying user: {current_user.title()}")
	confirmed_users.append(current_user)
# æ˜¾ç¤ºæ‰€æœ‰å·²éªŒè¯çš„ç”¨æˆ·ã€‚
print("\nThe following users have been confirmed:")
for confirmed_user in confirmed_users:
	print(confirmed_user.title())
```
## åˆ›å»ºåˆ‡ç‰‡
- ä½¿ç”¨åˆ‡ç‰‡ï¼ˆslicingï¼‰æ¥è®¿é—®ç‰¹å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ä¸¤ä¸ªç´¢å¼•æ¥æŒ‡å®šåˆ‡ç‰‡çš„è¾¹ç•Œ
- ç¬¬ä¸€ä¸ªç´¢å¼•æŒ‡å®šçš„å…ƒç´ åŒ…å«åœ¨åˆ‡ç‰‡å†…ï¼Œä½†ç¬¬äºŒä¸ªç´¢å¼•æŒ‡å®šçš„å…ƒç´ ä¸åŒ…å«åœ¨åˆ‡ç‰‡å†…ã€‚
- åˆ‡ç‰‡çš„æ­¥é•¿é»˜è®¤ä¸º1ï¼Œä½†ä¹Ÿå¯ä»¥è®¾ç½®
- åˆ‡ç‰‡éƒ½æ˜¯å‰¯æœ¬ï¼Œä¸åŸåˆ—è¡¨æ˜¯ä¸åŒå†…å­˜ï¼Œäº’ä¸å¹²æ¶‰
- åˆ—è¡¨çš„åˆ‡ç‰‡ä»ç„¶æ˜¯ä¸€ä¸ªåˆ—è¡¨

```
#!/usr/bin/python3
players = ['charles', 'martina', 'michael', 'florence', 'eli']
print(players[0:3])	# 0ã€1ã€2
print(players[1:4])	# 1ã€2ã€3
print(players[:4])	# å‰4ä¸ªï¼Œ0ã€1ã€2ã€3
print(players[2:])	# ä»ç¬¬3ä¸ªåˆ°æœ€åï¼Œä¸å«0ã€1çš„å…¶ä½™
print(players[-3:]) # æœ€å3ä¸ª

for player in players[:3]:	# éå†åˆ‡ç‰‡
	print(player.title())

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['charles', 'martina', 'michael']
['martina', 'michael', 'florence']
['charles', 'martina', 'michael', 'florence']
['michael', 'florence', 'eli']
['michael', 'florence', 'eli']
Charles
Martina
Michael
```
## åˆ‡ç‰‡çš„æ­¥é•¿
```
#!/usr/bin/python3
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
print(numbers)
print(numbers[0:10:2])	# ä»èµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´æ¯éš”ä¸€ä¸ªå…ƒç´ æå–ä¸€ä¸ªå…ƒç´ 
print(numbers[::4])	# ä»åºåˆ—ä¸­æ¯éš”3ä¸ªå…ƒç´ æå–1ä¸ªï¼Œåªéœ€æä¾›æ­¥é•¿4å³å¯ã€‚
print(numbers[8:3:-1])
print(numbers[10:0:-2]) 
print(numbers[0:10:-2])
print(numbers[::-2])
print(numbers[5::-2]) 
print(numbers[:5:-2])

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[1, 3, 5, 7, 9]
[1, 5, 9]
[9, 8, 7, 6, 5]
[10, 8, 6, 4, 2]
[]
[10, 8, 6, 4, 2]
[6, 4, 2]
[10, 8]
```
## åˆ‡ç‰‡çš„æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢
- å¦‚æœèµ‹å€¼çš„å¯¹è±¡æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œé‚£ä¹ˆèµ‹å€¼è¯­å¥çš„å³ä¾§å¿…é¡»æ˜¯ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚
- å³ä¾¿åªæœ‰å•ç‹¬ä¸€ä¸ªå€¼ï¼Œä¹Ÿè¦æŠŠå®ƒè½¬æ¢æˆå¯è¿­ä»£çš„åºåˆ—ã€‚
```
#!/usr/bin/python3
name = list('Perl')
name[1:] = list('ython') # ç›¸å½“äºæ›¿æ¢nä¸ªè¿ç»­çš„å…ƒç´ ï¼Œä¸”æ— éœ€æ•°é‡ä¸€è‡´
print(name)	# ['P', 'y', 't', 'h', 'o', 'n']


numbers = [1, 5] 
numbers[1:1] = [2, 3, 4] # ç›¸å½“äºæ’å…¥nä¸ªå…ƒç´ ï¼ˆå¯è¯»æ€§æ¯”ä½¿ç”¨insertå·®å¾ˆå¤šï¼‰
print(numbers) # [1, 2, 3, 4, 5]
numbers[1:4] = []  # ç›¸å½“äºåˆ é™¤è¿ç»­çš„nä¸ªå…ƒç´ ï¼Œè¿™é‡Œè¿˜åŠ å…¥æ­¥é•¿ï¼ˆå¤§äº1æˆ–è´Ÿæ•°çš„æ­¥é•¿ï¼‰ï¼Œé‚£å°±å¯ä»¥è·³è·ƒæ¸…é™¤äº†
print(numbers)	# [1, 5]
```
## zip
- ä¾¿äºåŒæ—¶è¿­ä»£nä¸ªåˆ—è¡¨
- è¿”å›ç”±å…ƒç»„ç»„æˆçš„å¯è¿­ä»£åºåˆ—
- å¯ä½¿ç”¨listå°†å…¶è½¬æ¢ä¸ºåˆ—è¡¨
- å¯ä½¿ç”¨dictå°†å…¶è½¬æ¢ä¸ºå­—å…¸

```
names = ['anne', 'beth', 'george', 'damon'] 
ages = [12, 45, 32, 102] 
for name, age in zip(names, ages): 
	print(name, 'is', age, 'years old') 

print(list(zip(range(5), range(100000000))))

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
anne is 12 years old
beth is 45 years old
george is 32 years old
damon is 102 years old
[(0, 0), (1, 1), (2, 2), (3, 3), (4, 4)]
```
```
english = 'Monday', 'Tuesday', 'Wednesday'
french = 'Lundi', 'Mardi', 'Mercredi'
print(list(zip(english, french)))
print(dict(zip(english, french)))

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
[('Monday', 'Lundi'), ('Tuesday', 'Mardi'), ('Wednesday', 'Mercredi')]
{'Monday': 'Lundi', 'Tuesday': 'Mardi', 'Wednesday': 'Mercredi'}
```
# å…ƒç»„ ( ) tuple
- å…ƒç»„ç»å¸¸ç”¨æ¥å­˜æ”¾ä¸åŒç±»å‹çš„çš„å…ƒç´ ã€‚è¿™ä¹Ÿç¬¦åˆå®ƒçš„æœ¬è´¨ï¼Œå…ƒç»„å°±æ˜¯ç”¨ä½œå­˜æ”¾å½¼æ­¤ä¹‹é—´æ²¡æœ‰å…³ç³»çš„æ•°æ®çš„è®°å½•ã€‚
- ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œå…ƒç»„ä¹Ÿæ˜¯ç”±ä»»æ„ç±»å‹å…ƒç´ ç»„æˆçš„åºåˆ—ã€‚
- ä¸åˆ—è¡¨ä¸åŒçš„æ˜¯ï¼Œå…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦å…ƒç»„è¢«å®šä¹‰ï¼Œå°†æ— æ³•å†è¿›è¡Œå¢åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å…ƒç´ ç­‰æ“ä½œã€‚å› æ­¤ï¼Œå…ƒç»„å°±åƒæ˜¯ä¸€ä¸ªå¸¸é‡åˆ—è¡¨ã€‚
- ä¸è¦æŠŠå¯å˜å¯¹è±¡æ”¾åœ¨å…ƒç»„é‡Œé¢ã€‚
- ä½¿ç”¨åœ†æ‹¬å·å®šä¹‰
- ç©ºå…ƒç»„ç”¨ä¸¤ä¸ªä¸åŒ…å«ä»»ä½•å†…å®¹çš„åœ†æ‹¬å·è¡¨ç¤º
- ä¸€ä¸ªå€¼çš„å…ƒç»„è¦æœ‰é€—å·
- å…ƒç»„çš„åˆ‡ç‰‡è¿˜æ˜¯å…ƒç»„
- å…ƒç»„å ç”¨çš„ç©ºé—´è¾ƒå°
- å¯ä»¥å°†å…ƒç»„ç”¨ä½œå­—å…¸çš„é”®
- å‡½æ•°çš„å‚æ•°æ˜¯ä»¥å…ƒç»„å½¢å¼ä¼ é€’çš„
- å‘½åå…ƒç»„å¯ä»¥ä½œä¸ºå¯¹è±¡çš„æ›¿ä»£
- å…ƒç»„ä¸å¤šæ•° Python é›†åˆï¼ˆåˆ—è¡¨ã€å­—å…¸ã€é›†ï¼Œç­‰ç­‰ï¼‰ä¸€æ ·ï¼Œä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚

```
#!/usr/bin/python3
dimensions = (200, 50)	# å®šä¹‰tuple
print(dimensions[0])	# å–å…ƒç´ 
print(dimensions[1])
# dimensions[0] = 250 	ä¸èƒ½ä¿®æ”¹å…ƒç´ 
dimensions = (400, 100)	# èƒ½é‡æ–°å…¨éƒ¨èµ‹å€¼
print(dimensions)	
for dimension in dimensions:	# éå†
	print(dimension)
```

## ä½¿ç”¨()åˆ›å»ºå…ƒç»„
ï¼ˆå…ƒç´ 1ï¼Œå…ƒç´ 2ï¼Œå…ƒç´ 3ï¼Œâ‹¯ï¼‰ï¼šæŒ‡å®šå…·ä½“çš„å…ƒç»„å…ƒç´ ï¼Œå…ƒç´ ä¹‹é—´ä»¥é€—å·åˆ†éš”ã€‚å¯¹äºå…ƒç»„å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨å°æ‹¬å·æ‹¬èµ·æ¥ï¼Œä¹Ÿå¯ä»¥çœç•¥å°æ‹¬å·ã€‚

```
empty_tuple = ()	# å¯ä»¥ç”¨ () åˆ›å»ºä¸€ä¸ªç©ºå…ƒç»„
print(empty_tuple)
one_marx = 'Groucho',	# åˆ›å»ºåªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„å…ƒç¥–è¦æœ‰é€—å·ã€‚å®šä¹‰å…ƒç»„çœŸæ­£é çš„æ˜¯æ¯ä¸ªå…ƒç´ çš„åç¼€é€—å·ï¼Œè€Œä¸æ˜¯ï¼ˆï¼‰
print(one_marx)
marx_tuple = 'Groucho', 'Chico', 'Harpo'	# åˆ›å»ºçš„å…ƒç»„æ‰€åŒ…å«çš„å…ƒç´ æ•°é‡è¶…è¿‡ 1ï¼Œæœ€åä¸€ä¸ªå…ƒç´ åé¢çš„é€—å·å¯ä»¥çœç•¥
print(marx_tuple)
a, b, c = marx_tuple	# å°†å…ƒç»„èµ‹å€¼ç»™å¤šä¸ªå˜é‡
print(a)
print(b)
print(c)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
()
('Groucho',)
('Groucho', 'Chico', 'Harpo')
Groucho
Chico
Harpo

```
## æ‰“å°å…ƒç´ 
```
lax_coordinates = (33.9425, -118.408056)
city, year, pop, chg, area = ('Tokyo', 2003, 32450, 0.66, 8014)
traveler_ids = [('USA', '31195855'), ('BRA', 'CE342567'), ('ESP', 'XDA205856')]
for passport in sorted(traveler_ids):
	print('%s/%s' % passport)		# passportä»£è¡¨æ¯ä¸ªå…ƒç»„, %èƒ½åŒ¹é…åˆ°å¯¹åº”çš„å…ƒç»„å…ƒç´ ä¸Š
for country, _ in traveler_ids:		# å…ƒç¥–æ‹†åŒ…åçš„ç¬¬äºŒä¸ªå…ƒç´ æ²¡æœ‰ï¼Œç”¨å ä½ç¬¦ä»£æ›¿
	print(country)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
BRA/CE342567
ESP/XDA205856
USA/31195855
USA
BRA
ESP
```

## æ‹†åŒ…
å¯è®¤ä¸ºåˆ›å»ºå…ƒç¥–ä¸ºæ‰“åŒ…ï¼Œåæ“ä½œå³ä¸ºæ‹†åŒ…ã€‚å°†å…ƒç¥–è§£åŒ…ï¼Œå¹¶å°†å¾—åˆ°çš„å€¼å­˜å‚¨åˆ°ä¸€ç³»åˆ—å˜é‡ä¸­ã€‚å¯ç”¨äº  
- å¹¶è¡Œèµ‹å€¼
- äº¤æ¢å˜é‡å€¼
- å°†åºåˆ—èµ‹å€¼ç»™å…ƒç¥–values
- è§£å¼€å…ƒç¥–åˆ°å¤šä¸ªå˜é‡
- ä½¿ç”¨*æ¥æ”¶å¤šä¸ªå€¼åˆ°åˆ—è¡¨ä¸­ï¼Œ*å¥æ³•è®©å…ƒç»„æ‹†åŒ…çš„ä¾¿åˆ©æ€§æ›´ä¸Šä¸€å±‚æ¥¼ï¼Œè®©ç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§å¿½ç•¥ä¸éœ€è¦çš„å­—æ®µ
- å‡½æ•°å‚æ•°ä¼ é€’ï¼ˆä¸»è¦æ˜¯ä¸Šä¸€ç§æ–¹å¼ï¼‰
- å‡½æ•°å¯ä»¥ç”¨å…ƒç»„çš„å½¢å¼è¿”å›å¤šä¸ªå€¼

```
x, y, z = 1, 2, 3 # å¹¶è¡Œèµ‹å€¼
print(x, y, z) 
x, y = y, x	# äº¤æ¢å˜é‡å€¼
print(x, y) 
values = 10, 20, 30 # å°†åºåˆ—èµ‹å€¼ç»™å…ƒç¥–values
print(values)
x, y, z = values # è§£å¼€å…ƒç¥–åˆ°å¤šä¸ªå˜é‡
print(x, y, z) 

scoundrel = {'name': 'Robin', 'girlfriend': 'Marion'} 
key, value = scoundrel.popitem() # è¿”å›å…ƒç¥–èµ‹å€¼ç»™kå’Œv
print(key, value)
a, b, *rest = [1, 2, 3, 4] 	# å¯ä½¿ç”¨æ˜Ÿå·è¿ç®—ç¬¦ï¼ˆ*ï¼‰æ¥æ”¶é›†å¤šä½™çš„å€¼ï¼Œè¿™æ ·æ— éœ€ç¡®ä¿å€¼å’Œå˜é‡çš„ä¸ªæ•°ç›¸åŒï¼Œrestä¸ºåˆ—è¡¨
print(rest)

name = "Albus Percival Wulfric Brian Dumbledore" 
first, *middle, last = name.split() # *å˜é‡ä¹Ÿå¯åœ¨å…¶ä»–ä½ç½®
print(middle)

a, *b, c = "abc" # å¸¦æ˜Ÿå·çš„å˜é‡å§‹ç»ˆä¹Ÿæ˜¯åˆ—è¡¨ï¼Œå³ä½¿å…ƒç´ ä»…1ä¸ª
print(a, b, c)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
1 2 3
2 1
(10, 20, 30)
10 20 30
girlfriend Marion
[3, 4]
['Percival', 'Wulfric', 'Brian']
a ['b'] c
```

## æ‹†åŒ…åµŒå¥—å…ƒç»„

```
metro_areas = [
	('Tokyo','JP',36.933,(35.689722,139.691667)),
	('Delhi NCR', 'IN', 21.935, (28.613889, 77.208889)),
	('Mexico City', 'MX', 20.142, (19.433333, -99.133333)),
	('New York-Newark', 'US', 20.104, (40.808611, -74.020386)),
	('Sao Paulo', 'BR', 19.649, (-23.547778, -46.635833)),
]
print('{:15} | {:^9} | {:^9}'.format('', 'lat.', 'long.'))
fmt = '{:15} | {:9.4f} | {:9.4f}'
for name, cc, pop, (latitude, longitude) in metro_areas:
	if longitude <= 0:
		print(fmt.format(name, latitude, longitude))

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
                |   lat.    |   long.  
Mexico City     |   19.4333 |  -99.1333
New York-Newark |   40.8086 |  -74.0204
Sao Paulo       |  -23.5478 |  -46.6358

```
## ä½¿ç”¨tuple()åˆ›å»ºå…ƒç»„

å‡½æ•°tupleçš„å·¥ä½œåŸç†ä¸listå¾ˆåƒï¼šå®ƒå°†ä¸€ä¸ªåºåˆ—ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆå’Œå­—å…¸ç­‰ï¼‰ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå…ƒç»„ã€‚å¦‚æœå‚æ•°
å·²ç»æ˜¯å…ƒç»„ï¼Œå°±åŸå°ä¸åŠ¨åœ°è¿”å›å®ƒã€‚
```
print(3 * (40 + 2))	# è¿™ä¸ªä¸æ˜¯å…ƒç¥–ï¼Œå› ä¸ºæ²¡æœ‰é€—å·
print(3 * (40 + 2,))
print(tuple([1, 2, 3]))
print(tuple('abc'))
print(tuple((1, 2, 3)))
x = 1, 2, 3
print(x[0:2])

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
126
(42, 42, 42)
(1, 2, 3)
('a', 'b', 'c')
(1, 2, 3)
(1, 2)
```
## å…·åå…ƒç¥– namedtuple
- å‘½åå…ƒç»„æ˜¯å…ƒç»„çš„å­ç±»ï¼Œæ—¢å¯ä»¥é€šè¿‡åç§°ï¼ˆä½¿ç”¨ .nameï¼‰æ¥è®¿é—®å…¶ä¸­çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½ç½®è¿›è¡Œè®¿é—®ï¼ˆä½¿ç”¨[offset]ï¼‰
- å®ƒæ— è®ºçœ‹èµ·æ¥è¿˜æ˜¯ä½¿ç”¨èµ·æ¥éƒ½å’Œä¸å¯å˜å¯¹è±¡éå¸¸ç›¸ä¼¼
- å…·åå…ƒç»„çš„å®ä¾‹ä¹Ÿå¾ˆèŠ‚çœç©ºé—´ï¼Œä¸ä½¿ç”¨å¯¹è±¡ç›¸æ¯”ï¼Œä½¿ç”¨å‘½åå…ƒç»„åœ¨æ—¶é—´å’Œç©ºé—´ä¸Šæ•ˆç‡æ›´é«˜ã€‚
- å¯ä»¥ä½¿ç”¨ç‚¹å·ï¼ˆ.ï¼‰å¯¹ç‰¹æ€§è¿›è¡Œè®¿é—®ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å­—å…¸é£æ ¼çš„æ–¹æ‹¬å·
- å¯ä»¥æŠŠå®ƒä½œä¸ºå­—å…¸çš„é”®
- ç”¨ä»¥æ„å»ºåªæœ‰å°‘æ•°å±æ€§ä½†æ˜¯æ²¡æœ‰æ–¹æ³•çš„å¯¹è±¡

ç®€å•ä½¿ç”¨
```
from collections import namedtuple
Duck = namedtuple('Duck', 'bill tail')
duck = Duck('wide orange', 'long')
print(duck)
print(duck.bill)
print(duck.tail)

parts = {'bill': 'wide orange', 'tail': 'long'} # ç”¨å­—å…¸æ¥æ„é€ å‘½åå…ƒç»„
duck2 = Duck(**parts) # **ä½œç”¨æ˜¯å°† parts å­—å…¸ä¸­çš„é”®å’Œå€¼æŠ½å–å‡ºæ¥ä½œä¸ºå‚æ•°æä¾›ç»™ Duck() ä½¿ç”¨ã€‚ç­‰åŒäº duck2 = Duck(bill = 'wide orange', tail = 'long')
print(duck2)
duck3 = duck2._replace(tail='magnificent', bill='crushing')	# å‘½åå…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼Œä½†å¯ä»¥æ›¿æ¢å…¶ä¸­æŸäº›åŸŸçš„å€¼å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‘½åå…ƒç»„
print(duck3)


duck_dict = {'bill': 'wide orange', 'tail': 'long'}
print(duck_dict)
duck_dict['color'] = 'green'	# å¯ä»¥å‘å­—å…¸é‡Œæ·»åŠ æ–°çš„é”®å€¼å¯¹
print(duck_dict)

duck.color = 'green'	# err ä½†æ— æ³•å¯¹å‘½åå…ƒç»„è¿™ä¹ˆåš

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Duck(bill='wide orange', tail='long')
wide orange
long
Duck(bill='wide orange', tail='long')
Duck(bill='crushing', tail='magnificent')
{'bill': 'wide orange', 'tail': 'long'}
{'bill': 'wide orange', 'tail': 'long', 'color': 'green'}
Traceback (most recent call last):
  File "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py", line 22, in <module>
    duck.color = 'green'        # ä½†æ— æ³•å¯¹å‘½åå…ƒç»„è¿™ä¹ˆåš
AttributeError: 'Duck' object has no attribute 'color'
```


é«˜çº§ä½¿ç”¨ï¼Œç±»ä¼¼structï¼Œå¯ä»¥å¿«é€Ÿå®šä¹‰ç»“æ„å¹¶åˆ›å»ºå˜é‡ï¼Œä½†ä»…æœ‰å±æ€§ä¸èƒ½æœ‰æ–¹æ³•
- _fields
- _make()
- _asdict()

```
from collections import namedtuple
City = namedtuple('City', 'name country population coordinates')	# å‚æ•°æ˜¯ç±»åï¼Œå¦ä¸€ä¸ªæ˜¯ç±»çš„å„ä¸ªå­—æ®µçš„åå­—
tokyo = City('Tokyo', 'JP', 36.933, (35.689722, 139.691667))	# åˆ›å»ºå¯¹è±¡
print(tokyo)	# è®¿é—®
print(tokyo.population)
print(tokyo.coordinates)
print(tokyo[1])
print(City._fields)	# _fields å±æ€§æ˜¯ä¸€ä¸ªåŒ…å«è¿™ä¸ªç±»æ‰€æœ‰å­—æ®µåç§°çš„å…ƒç»„ã€‚


LatLong = namedtuple('LatLong', 'lat long')
delhi_data = ('Delhi NCR', 'IN', 21.935, LatLong(28.613889, 77.208889))
delhi = City._make(delhi_data)	# ç”¨_make()é€šè¿‡æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡æ¥ç”Ÿæˆè¿™ä¸ªç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒçš„ä½œç”¨è·ŸCity(*delhi_data)æ˜¯ä¸€æ ·çš„

print(delhi._asdict())	#_asdict()æŠŠå…·åå…ƒç»„ä»¥collections.OrderedDictçš„å½¢å¼è¿”å›ï¼Œä¸‹é¢æ˜¯è¿­ä»£æ¯ä¸€é¡¹
for key, value in delhi._asdict().items():
	print(key + ':', value)



[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
City(name='Tokyo', country='JP', population=36.933, coordinates=(35.689722, 139.691667))
36.933
(35.689722, 139.691667)
JP
('name', 'country', 'population', 'coordinates')
OrderedDict([('name', 'Delhi NCR'), ('country', 'IN'), ('population', 21.935), ('coordinates', LatLong(lat=28.613889, long=77.208889))])
name: Delhi NCR
country: IN
population: 21.935
coordinates: LatLong(lat=28.613889, long=77.208889)
```
## å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§
- ä¸‹é¢çš„æè¿°è²Œä¼¼çœ¼ç†Ÿï¼Œè¯¦è§ä»£ç è¯´æ˜ï¼Œæ„Ÿè§‰å°±åƒæ˜¯æ”¹å˜å¸¸é‡æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ã€‚ã€‚ã€‚
- å…ƒç»„ä¸å¤šæ•° Python é›†åˆï¼ˆåˆ—è¡¨ã€å­—å…¸ã€é›†ï¼Œç­‰ç­‰ï¼‰ä¸€æ ·ï¼Œä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚1 å¦‚æœå¼•ç”¨çš„å…ƒç´ æ˜¯å¯å˜çš„ï¼Œå³ä¾¿å…ƒç»„æœ¬èº«ä¸å¯å˜ï¼Œå…ƒç´ ä¾ç„¶å¯å˜ã€‚
```
t1 = (1, 2, [30, 40])
t2 = (1, 2, [30, 40])
print(t1 == t2)		# è™½ç„¶ t1 å’Œ t2 æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä½†æ˜¯äºŒè€…ç›¸ç­‰ï¼Œå› ä¸º==æ¯”å€¼
print(id(t1[-1]))
t1[-1].append(99)	# é‡ç‚¹åœ¨æ­¤ï¼Œt1 ä¸å¯å˜ï¼Œä½†æ˜¯ t1[-1] å¯å˜ã€‚å³t1[-1] çš„æ ‡è¯†æ²¡å˜ï¼Œåªæ˜¯å€¼å˜äº†ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºæ ˆä¸Šçš„æŒ‡é’ˆæ²¡æŒ‡å‘åˆ«å¤„ï¼Œä½†æ˜¯å †ä¸Šçš„æ•°æ®å˜äº†ï¼‰
print(t1)
print(id(t1[-1]))
print(t1 == t2)

[huawei@n161 aaa]$ python3 test.py 
True
140324783818056
(1, 2, [30, 40, 99])
140324783818056
False
```


# å­—å…¸ { } dict
- å­—å…¸ç”±é”®åŠå…¶ç›¸åº”çš„å€¼ç»„æˆï¼Œè¿™ç§é”®å€¼å¯¹ç§°ä¸ºé¡¹ï¼ˆitemï¼‰ã€‚
- æ¯ä¸ªé”®ä¸å…¶å€¼ä¹‹é—´éƒ½ç”¨å†’å·ï¼ˆ:ï¼‰åˆ†éš”ï¼Œé¡¹ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œè€Œæ•´ä¸ªå­—å…¸æ”¾åœ¨èŠ±æ‹¬å·å†…ã€‚
- ç©ºå­—å…¸ï¼ˆæ²¡æœ‰ä»»ä½•é¡¹ï¼‰ç”¨ä¸¤ä¸ªèŠ±æ‹¬å·è¡¨ç¤ºï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š{}ã€‚
- åœ¨å­—å…¸ï¼ˆä»¥åŠå…¶ä»–æ˜ å°„ç±»å‹ï¼‰ä¸­ï¼Œé”®å¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œè€Œå­—å…¸ä¸­çš„å€¼æ— éœ€å¦‚æ­¤ã€‚
- å­—å…¸çš„é”®å¿…é¡»ä¸ºä¸å¯å˜å¯¹è±¡ï¼Œå› æ­¤åˆ—è¡¨ã€å­—å…¸ä»¥åŠé›†åˆéƒ½ä¸èƒ½ä½œä¸ºå­—å…¸çš„é”®ï¼Œä½†å…ƒç»„å¯ä»¥ä½œä¸ºå­—å…¸çš„é”®
- å­—å…¸æ˜¯Pythonä¸­å”¯ä¸€çš„å†…ç½®æ˜ å°„ç±»å‹ï¼Œå…¶ä¸­çš„å€¼ä¸æŒ‰é¡ºåºæ’åˆ—ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨é”®ä¸‹ã€‚é”®å¯èƒ½æ˜¯æ•°ã€å­—ç¬¦ä¸²æˆ–å…ƒç»„ï¼ˆå³kå¾—æ˜¯ä¸å¯å˜çš„ç±»å‹ï¼‰ã€‚
- æ‰€æœ‰çš„å­—å…¸æ–¹æ³•è§æµç¨‹çš„python3.3
## æ„å»ºæ–¹æ³•
- ä½¿ç”¨dictæ–¹æ³•
- {key1ï¼švalue1ï¼Œkey2ï¼švalue2ï¼Œ...ï¼Œkey_nï¼švalue_n}ï¼šæŒ‡å®šå…·ä½“çš„å­—å…¸é”®å€¼å¯¹ï¼Œé”®å€¼å¯¹ä¹‹é—´ä»¥é€—å·åˆ†éš”ï¼Œæœ€åç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚
- ä½¿ç”¨dict.fromkeysæ„å»ºæ‰€æœ‰véƒ½ä¸€æ ·çš„å­—å…¸
```
# dictï¼ˆtupleåˆ—è¡¨å½¢å¼ï¼‰,tupleå¿…é¡»2ä¸ªå…ƒç´ ï¼Œå¦åˆ™å¤±è´¥
items = [('name', 'Gumby'), ('age', 42)] 
d = dict(items)  
print(d)	# {'name': 'Gumby', 'age': 42}
print(d['name'])	# Gumby

# dictï¼ˆåµŒå¥—åˆ—è¡¨å½¢å¼ï¼‰,å†…éƒ¨åˆ—è¡¨åªèƒ½2ä¸ªå…ƒç´ ï¼Œå¦åˆ™å¤±è´¥
lol = [ ['a', 'b'], ['c', 'd'], ['e', 'f'] ] 
m = dict(lol)
print(m)	# {'a': 'b', 'c': 'd', 'e': 'f'}

# ä½¿ç”¨dictæ–¹æ³•æ„å»ºï¼Œkvå½¢å¼ï¼Œkvè¦é½å…¨ï¼Œå¦åˆ™å¤±è´¥
d = dict(name='Gumby', age=42) 	
print(d) # {'name': 'Gumby', 'age': 42}

empty_dict = {} # ç©ºå­—å…¸

# ä½¿ç”¨é”®å€¼å¯¹æ–¹å¼æ„å»ºï¼Œkvè¦é½å…¨ï¼Œå¦åˆ™å‡ºé”™
phonebook = {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
print(phonebook)	# {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}


# åŒå­—ç¬¦çš„å­—ç¬¦ä¸²ç»„æˆçš„åˆ—è¡¨ï¼Œåªèƒ½2ä¸ªå­—ç¬¦ï¼Œå¦åˆ™å‡ºé”™
m = [ 'ab', 'cd', 'ef' ]
print(dict(m))	# {'a': 'b', 'c': 'd', 'e': 'f'}

# åŒå­—ç¬¦çš„å­—ç¬¦ä¸²ç»„æˆçš„å…ƒç»„ï¼Œåªèƒ½2ä¸ªå­—ç¬¦ï¼Œå¦åˆ™å‡ºé”™
m = ( 'ab', 'cd', 'ef' )
print(dict(m))	# {'a': 'b', 'c': 'd', 'e': 'f'}


# ä½¿ç”¨dict.fromkeys
print(dict.fromkeys(['name', 'age']))	# {'name': None, 'age': None}
print(dict.fromkeys(['name', 'age'], '(unknown)'))	# {'name': '(unknown)', 'age': '(unknown)'}
```
## è®¿é—®ã€ã€‘ã€get
- [ ]
	è®¿é—®ä¸å­˜åœ¨çš„å…ƒç´ ä¼šerror
- get
	å®‰å…¨çš„è·å–å…ƒç´ æ–¹å¼ï¼Œæ²¡æœ‰åˆ™è¿”å›æŒ‡å®šçš„å­—ç¬¦ä¸²
- setdefault
	è·å–ä¸æŒ‡å®šé”®ç›¸å…³è”çš„å€¼ï¼Œå­—å…¸ä¸åŒ…å«æŒ‡å®šçš„é”®æ—¶ï¼Œåœ¨å­—å…¸ä¸­æ·»åŠ æŒ‡å®šçš„é”®å€¼å¯¹ã€‚ä¹Ÿå¯æŒ‡å®šé»˜è®¤çš„å­—ç¬¦ä¸²ä½œä¸ºvï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤vä¸ºNoneã€‚
```
#!/usr/bin/python3
alien_0 = {'color': 'green', 'points': 5}		# å®šä¹‰å­—å…¸
print(alien_0['color'])		# green,	è®¿é—®å…ƒç´ 
# print(alien_0['color1'])	è®¿é—®ä¸å­˜åœ¨çš„å…ƒç´ ä¼šerrorï¼Œä¸‹å¥ä½¿ç”¨getè¿›è¡Œå®‰å…¨è®¿é—®
point_value = alien_0.get('not', 'No point value assigned.') # å®‰å…¨çš„è·å–å…ƒç´ æ–¹å¼ï¼Œæ²¡æœ‰åˆ™è¿”å›ç¬¬äºŒä¸ªå­—ç¬¦ä¸²
print(point_value)	# No point value assigned.		
print(alien_0)	# {'color': 'green', 'points': 5}
point_value  = alien_0.setdefault('not')	# æ²¡æœ‰æ‰¾åˆ°å°±æ·»åŠ åˆ°å­—å…¸ä¸­
print(point_value)	# None
print(alien_0)	# {'color': 'green', 'points': 5, 'not': None}
```
## å¢åˆ æ”¹æŸ¥
- del	åˆ é™¤å…·æœ‰æŒ‡å®šé”®çš„å…ƒç´ 

```
#!/usr/bin/python3
alien_0 = {'color': 'green', 'points': 5}		# å®šä¹‰å­—å…¸
print(alien_0)
alien_0['x_position'] = 0		# æ·»åŠ å…ƒç´ 
alien_0['y_position'] = 25
print(alien_0)

alien_0 = {}			# åˆ›å»ºç©ºå­—å…¸ï¼Œè¿™é‡Œå…¶å®æ˜¯æŠŠä¸Šé¢çš„å­—å…¸æ¸…äº†
alien_0['color'] = 'green'
alien_0['points'] = 5
print(alien_0)
alien_0['color'] = 'yellow'		# ä¿®æ”¹å…ƒç´ 
print(f"The alien is now {alien_0['color']}.")
del alien_0['points']		# åˆ é™¤å…ƒç´ ï¼Œåˆ é™¤è¿˜æœ‰pop
print(alien_0)


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
{'color': 'green', 'points': 5}
{'color': 'green', 'points': 5, 'x_position': 0, 'y_position': 25}
{'color': 'green', 'points': 5}
The alien is now yellow.
{'color': 'yellow'}
```
## åˆå¹¶ update
å¯ä»¥å°†ä¸€ä¸ªå­—å…¸çš„é”®å€¼å¯¹å¤åˆ¶åˆ°å¦ä¸€ä¸ªå­—å…¸ä¸­å»ã€‚å­—å…¸æœ‰æ­¤kåˆ™æ›´æ–°vï¼Œæ²¡æœ‰kåˆ™æ·»åŠ åˆ°å­—å…¸é‡Œ
```
d = { 
'title': 'Python Web Site', 
'url': 'http://www.python.org', 
'changed': 'Mar 14 22:09:15 MET 2016' 
} 

x = {'title': 'Python Language Website'} 
d.update(x)
print(d);

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
{'title': 'Python Language Website', 'url': 'http://www.python.org', 'changed': 'Mar 14 22:09:15 MET 2016'}
```
## popã€popitem
```
phonebook = {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
print(phonebook.pop('Beth'))	# 9102	è¿”å›æŒ‡å®škè¿›è¡Œpopçš„v
print(phonebook)	# {'Alice': '2341', 'Cecil': '3258'}	å‰©ä½™2ä¸ªkv
print(phonebook.popitem())	# ('Cecil', '3258')	è¿”å›éšæœºpopçš„kvï¼Œè¿”å›å€¼æ˜¯å…ƒç¥–ï¼Œä½†æµ‹è¯•æ¯æ¬¡éƒ½ç›¸åŒ
print(phonebook)	# {'Alice': '2341'}		å‰©ä½™1ä¸ªkv
key, value = phonebook.popitem() # å°†popçš„å…ƒç¥–èµ‹å€¼ç»™kå’Œv
print(key, value)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
{'Alice': '2341', 'Cecil': '3258'}
('Cecil', '3258')
{'Alice': '2341'}
Alice 2341
```
## æ£€æµ‹Kå­˜åœ¨ in
è¡¨è¾¾å¼k in dï¼ˆå…¶ä¸­dæ˜¯ä¸€ä¸ªå­—å…¸ï¼‰æŸ¥æ‰¾çš„æ˜¯é”®è€Œä¸æ˜¯å€¼
```
phonebook = {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}	# ä½¿ç”¨é”®å€¼å¯¹æ–¹å¼æ„å»º
print(phonebook)	# {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
print('Beth' in phonebook);	# True
```
## å­—å…¸è§†å›¾ items
-	è¿”å›å€¼å±äºä¸€ç§åä¸ºå­—å…¸è§†å›¾çš„ç‰¹æ®Šç±»å‹ã€‚å­—å…¸è§†å›¾å¯ç”¨äºè¿­ä»£ï¼Œè¿˜å¯æ‰§è¡Œlenä¸inæ£€æµ‹ã€‚å…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ºé”®å€¼å¯¹ï¼Œä¸”é¡ºåºä¸ç¡®å®šã€‚
-	ä¿®æ”¹å­—å…¸åè§†å›¾ä¼šåŒæ­¥ï¼Œä½†è§†å›¾æ˜¯åªè¯»çš„ä¸å…è®¸ä¿®æ”¹
```
phonebook = {'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
pairs = phonebook.items() 
print("ä¿®æ”¹å‰")
print(pairs)
print(len(pairs))
print(phonebook)
print(('Beth', '9102') in pairs)
print(phonebook.get('Beth', "not find") == '9102');


print("ä¿®æ”¹å­—å…¸å")
phonebook['Beth'] = '9999'
print(pairs)
print(phonebook)
print(('Beth', '9102') in pairs)
print(phonebook.get('Beth', "not find") == '9102');

print("ä¿®æ”¹è§†å›¾å")
pairs[1] = ('Beth', '0000')  ä¸æ”¯æŒèµ‹å€¼
print(pairs)
print(phonebook)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
ä¿®æ”¹å‰
dict_items([('Alice', '2341'), ('Beth', '9102'), ('Cecil', '3258')])
3
{'Alice': '2341', 'Beth': '9102', 'Cecil': '3258'}
True
True
ä¿®æ”¹å­—å…¸å
dict_items([('Alice', '2341'), ('Beth', '9999'), ('Cecil', '3258')])
{'Alice': '2341', 'Beth': '9999', 'Cecil': '3258'}
False
False
ä¿®æ”¹è§†å›¾å
Traceback (most recent call last):
  File "/home/huawei/playground/pythontest/pyth.py", line 20, in <module>
    pairs[1] = ('Beth', '0000')
TypeError: 'dict_items' object does not support item assignment
```
## éå†
```
d = {'x': 1, 'y': 2, 'z': 3} 
for key in d: 
	print(key, 'corresponds to', d[key]) 
for key, value in d.items(): 
	print(key, 'corresponds to', value) 

```
## keysã€valuesã€itemsã€sortã€set
- keys
  	è·å–ä»…åŒ…å«å­—å…¸ä¸­çš„é”®çš„è§†å›¾ï¼ˆdict_keys()ï¼Œå®ƒæ˜¯é”®çš„è¿­ä»£å½¢å¼ï¼‰
- values
	è¿”å›ä¸€ä¸ªç”±å­—å…¸ä¸­çš„å€¼ç»„æˆçš„å­—å…¸è§†å›¾ï¼Œå¦‚æœå­—å…¸ä¸­æœ‰é‡å¤çš„våˆ™è§†å›¾ä¸­ä¹ŸåŒ…å«è¿™äº›é‡å¤å†…å®¹ã€‚
- items
  	å‡½æ•°å¯ä»¥è·å–å­—å…¸ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹
- keysã€valuesã€itemsçš„è¿”å›ç»“æœå‡å¯ä½œä¸ºlist()æ–¹æ³•çš„å‚æ•°ï¼Œè¿”å›åˆ—è¡¨
```
#!/usr/bin/python3
favorite_languages = {
	'jen': 'python',
	'sarah': 'c',
	'edward': 'ruby',
	'phil': 'python',
}
for name, language in favorite_languages.items():	# éå†kv
	print(f"{name.title()}'s favorite language is {language.title()}.")
for name in favorite_languages.keys():		# éå†k
	print(name.title())
for name in sorted(favorite_languages.keys()):	# å¯¹è¿”å›çš„keysæ’åºåå†éå†
 	print(f"{name.title()}, thank you for taking the poll.") 
if 'erin' not in favorite_languages.keys():	# åˆ¤æ–­å­˜åœ¨kï¼Œæ­¤å¤„æ˜¯æ£€æµ‹ä¸€ä¸ªå€¼åœ¨ä¸åœ¨åˆ—è¡¨é‡Œï¼Œéæ£€æµ‹k in d
	print("Erin, please take our poll!")

for language in favorite_languages.values():	# éå†values
	print(language.title())
for language in set(favorite_languages.values()):	# å¯¹è¿”å›çš„valuesé›†åˆè¿›è¡Œå»é‡åå†éå†
	print(language.title())


```
## æ ¼å¼åŒ–format
åªè¦åœ¨å­—å…¸ä¸­æœ‰æ­¤kvåˆ™å°±å¯ä»¥æ›¿æ¢åˆ°formatçš„å‚æ•°é‡Œ
```
#!/usr/bin/python3
template = '''<html> 
<head><title>{title}</title></head> 
<body> 
<h1>{title}</h1> 
<p>{text}</p> 
</body>''' 
data = {'title': 'My Home Page', 'text': 'Welcome to my home page!'} 
print(template.format_map(data)) 


print("Cecil's phone number is {Cecil}.".format_map({'Beth': '9102', 'Alice': '2341', 'Cecil': '3258'}))


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
<html> 
<head><title>My Home Page</title></head> 
<body> 
<h1>My Home Page</h1> 
<p>Welcome to my home page!</p> 
</body>
Cecil's phone number is 3258.
```
## æ¸…é™¤ clear
```
x.clear() 
```
## ä½¿ç”¨=èµ‹å€¼ï¼Œä½¿ç”¨copy()å¤åˆ¶
- ç­‰å·ä¾ç„¶ä»…æ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å¤åˆ¶......
- æµ…æ‹·è´
  
  2ä¸ªå­—å…¸ä¸­machinesçš„vï¼ˆå€¼æ˜¯åˆ—è¡¨ï¼‰yä¿®æ”¹åxçš„ä¹Ÿè·Ÿç€å˜äº†ï¼Œè¯´æ˜æŒ‡å‘åŒä¸€ä¸ªå †åœ°å€
```
x = {'username': 'admin', 'machines': ['foo', 'bar', 'baz']} 
y = x.copy() 
y['username'] = 'mlh' 
y['machines'].remove('bar') 
print(x)
print(y)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
{'username': 'admin', 'machines': ['foo', 'baz']}
{'username': 'mlh', 'machines': ['foo', 'baz']}
```
- æ·±æ‹·è´
	- ä½¿ç”¨copy
	- ä½¿ç”¨å‡½æ•°deepcopyè¿›è¡Œæ‹·è´
```
signals = {'green': 'go', 'yellow': 'go faster', 'red': 'smilefor the camera'}
original_signals = signals.copy()
signals['blue'] = 'confuse everyone'
print(signals)
print(original_signals)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
{'green': 'go', 'yellow': 'go faster', 'red': 'smilefor the camera', 'blue': 'confuse everyone'}
{'green': 'go', 'yellow': 'go faster', 'red': 'smilefor the camera'}
```  
```
#!/usr/bin/python3
from copy import deepcopy
x = {'username': 'admin', 'machines': ['foo', 'bar', 'baz']} 
y = deepcopy(x)  
y['username'] = 'mlh' 
y['machines'].remove('bar') 
print(x)
print(y)

d = {} 
d['names'] = ['Alfred', 'Bertrand'] 
c = d.copy() 
dc = deepcopy(d) 
d['names'].append('Clive') 
print(c)
print(dc)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
{'username': 'admin', 'machines': ['foo', 'bar', 'baz']}
{'username': 'mlh', 'machines': ['foo', 'baz']}
{'names': ['Alfred', 'Bertrand', 'Clive']}
{'names': ['Alfred', 'Bertrand']}
```
# é›†åˆ set
- é›†åˆï¼ˆsetï¼‰æ˜¯ä¸€ç§å¯è¿­ä»£çš„ã€æ— åºçš„ã€ä¸èƒ½åŒ…å«é‡å¤å…ƒç´ çš„å®¹å™¨ç±»å‹çš„æ•°æ®ã€‚
- å°½ç®¡éƒ½ç”±èŠ±æ‹¬å·åŒ…è£¹ï¼Œé›†åˆä»…ä»…æ˜¯ä¸€ç³»åˆ—å€¼ç»„æˆçš„åºåˆ—ï¼Œè€Œå­—å…¸æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹ç»„æˆçš„åºåˆ—ã€‚
- æ‰€æœ‰æ–¹æ³•è§æµç¨‹çš„python3.8.3
  
## åˆ›å»º
- {å…ƒç´ 1ï¼Œå…ƒç´ 2ï¼Œå…ƒç´ 3ï¼Œâ‹¯}ï¼šæŒ‡å®šå…·ä½“çš„é›†åˆå…ƒç´ ï¼Œå…ƒç´ ä¹‹é—´ä»¥é€—å·åˆ†éš”ã€‚å¯¹äºé›†åˆå…ƒç´ ï¼Œéœ€è¦ä½¿ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚
- ä½¿ç”¨set()åˆ›å»ºç©ºé›†åˆ
- ä½¿ç”¨set(iterable)å°†å…¶ä»–ç±»å‹è½¬æ¢ä¸ºé›†åˆï¼Œå‚æ•°iterableæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼ˆå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆå’Œå­—å…¸ç­‰ï¼‰ã€‚
```
empty_set = set()	# ç©ºset
print(empty_set)
even_numbers = {0, 2, 4, 6, 8}	# æ™®é€šæ„å»ºæ–¹å¼
print(even_numbers)
print(set('letters'))	# åŸºäºå­—ç¬¦ä¸²
print(set(['Dasher', 'Dancer', 'Prancer', 'Mason-Dixon']))	# åŸºäºåˆ—è¡¨
print(set(('Ummagumma', 'Echoes', 'Atom Heart Mother')))	# åŸºäºå…ƒç»„
print(set({'apple': 'red', 'orange': 'orange', 'cherry': 'red'}))	# åŸºäºå­—å…¸ï¼Œä»…ä½¿ç”¨k

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
set()
{0, 2, 4, 6, 8}
{'s', 'l', 'e', 't', 'r'}
{'Dancer', 'Dasher', 'Prancer', 'Mason-Dixon'}
{'Atom Heart Mother', 'Echoes', 'Ummagumma'}
{'orange', 'cherry', 'apple'}
```
## å¢åˆ æŸ¥ã€clearã€lenã€copy
- add
- update
- remove
- discard
- pop
- len
- clear
- copy
- 
```
set1 = {'pear', 'banana', 'orange', 'apple'}
set1.add('kkk')	# æ·»åŠ ä¸€ä¸ªå…ƒç´ 
print(set1)
set1.update({'kkk', 'ppp'})	# æ·»åŠ å¤šä¸ªå…ƒç´ 
print(set1)

# æ–¹æ³•remove()å’Œæ–¹æ³•discard()çš„åŒºåˆ«åœ¨äºï¼Œæ–¹æ³•remove()åœ¨ç§»é™¤å…ƒç´ æ—¶ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œä¼šæŠ¥é”™ï¼Œä¸­æ­¢ç¨‹åºè¿è¡Œï¼Œè€Œæ–¹æ³•discard()ä¸ä¼šã€‚
set1.remove('pear')	# å°†æŒ‡å®šå…ƒç´ ä»é›†åˆä¸­ç§»é™¤
print(set1)
set1.pop()	# éšæœºåˆ é™¤é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ 
print(set1)
print(len(set1))	# å¾—åˆ°é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°
set1.clear()	# æ¸…ç©ºé›†åˆ
print(set1)	
set1 = {'pear', 'banana', 'orange', 'apple'}
bool1 = 'apple' in set1	# æ£€æµ‹å­˜åœ¨
print(bool1)
x = set1.copy()	# æ·±æ‹·è´
print(x)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
{'apple', 'kkk', 'banana', 'pear', 'orange'}
{'ppp', 'apple', 'kkk', 'banana', 'pear', 'orange'}
{'ppp', 'apple', 'kkk', 'banana', 'orange'}
{'apple', 'kkk', 'banana', 'orange'}
4
set()
True
{'banana', 'pear', 'orange', 'apple'}
```
## æ£€æµ‹ in
ä½¿ç”¨inæµ‹è¯•kæ˜¯å¦å­˜åœ¨
```
drinks = {
'martini': {'vodka', 'vermouth'},
'black russian': {'vodka', 'kahlua'},
'white russian': {'cream', 'kahlua', 'vodka'},
'manhattan': {'rye', 'vermouth', 'bitters'},
'screwdriver': {'orange juice', 'vodka'}
}
for name, contents in drinks.items():
	if 'vodka' in contents and not ('vermouth' in contents or 'cream' in contents):
		print(name)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
black russian
screwdriver
```
## äº¤é›†ã€å¹¶é›†
ç»™å®šä¸¤ä¸ªé›†åˆ a å’Œ bï¼Œa | b è¿”å›çš„æ˜¯å®ƒä»¬çš„åˆé›†ï¼Œa & b å¾—åˆ°çš„æ˜¯äº¤é›†ï¼Œè€Œ a - b å¾—åˆ°çš„æ˜¯å·®é›†
https://blog.csdn.net/wenhao_ir/article/details/125424671
## å·®é›†
a-bå¾—åˆ°çš„æ˜¯å·®é›†

```
è®¡ç®—å·®é›†ï¼Œç„¶åæ’åºï¼Œå¾—åˆ°ç±»çš„å®ä¾‹æ²¡æœ‰è€Œå‡½æ•°æœ‰çš„å±æ€§åˆ—è¡¨

class C: pass
obj = C()
def func(): pass
print(sorted(set(dir(func)) - set(dir(obj))))


[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
['__annotations__', '__call__', '__closure__', '__code__', '__defaults__', '__get__', '__globals__', '__kwdefaults__', '__name__', '__qualname__']
```
# å¤æ‚æ•°æ®ç»“æ„
## å…ƒç¥–é‡Œå­˜åˆ—è¡¨
```
marxes = ['Groucho', 'Chico', 'Harpo']
pythons = ['Chapman', 'Cleese', 'Gilliam', 'Jones', 'Palin']
stooges = ['Moe', 'Curly', 'Larry']
tuple_of_lists = marxes, pythons, stooges
print(tuple_of_lists)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
(['Groucho', 'Chico', 'Harpo'], ['Chapman', 'Cleese', 'Gilliam', 'Jones', 'Palin'], ['Moe', 'Curly', 'Larry'])
```
## å­—å…¸çš„kæ˜¯å…ƒç¥–
```

houses = {
	(44.79, -93.14, 285): 'My House',
	(38.89, -77.03, 13): 'The White House'
}

print(houses)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
{(44.79, -93.14, 285): 'My House', (38.89, -77.03, 13): 'The White House'}
```
## åˆ—è¡¨é‡Œå­˜åˆ—è¡¨
- ç®€å•çš„ä½¿ç”¨
```
small_birds = ['hummingbird', 'finch']
extinct_birds = ['dodo', 'passenger pigeon', 'Norwegian Blue']
carol_birds = [3, 'French hens', 2, 'turtledoves']
all_birds = [small_birds, extinct_birds, 'macaw', carol_birds]

print(all_birds)
print(all_birds[0])
print(all_birds[1][0])

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest/pyth.py"
[['hummingbird', 'finch'], ['dodo', 'passenger pigeon', 'Norwegian Blue'], 'macaw', [3, 'French hens', 2, 'turtledoves']]
['hummingbird', 'finch']
dodo
```
- ç›¸å¯¹å¤æ‚ä¸€ç‚¹çš„

ä¸¤ç§æ–¹å¼ç»“æœç›¸åŒ
```
æ–¹å¼1
board = [['_'] * 3 for i in range(3)]
print(board)
board[1][2] = 'X'
print(board)

æ–¹å¼2
board = []
for i in range(3):
	row=['_'] * 3
	board.append(row)
print(board)
board[2][0] = 'X'
print(board)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
[['_', '_', '_'], ['_', '_', '_'], ['_', '_', '_']]
[['_', '_', '_'], ['_', '_', 'X'], ['_', '_', '_']]


[['_', '_', '_'], ['_', '_', '_'], ['_', '_', '_']]
[['_', '_', '_'], ['_', '_', '_'], ['X', '_', '_']]

```
é”™è¯¯çš„èµ‹å€¼æ¼”ç¤º
```
weird_board = [['_'] * 3] * 3	# weird_boardåŒ…å« 3 ä¸ªæŒ‡å‘åŒä¸€ä¸ªåˆ—è¡¨çš„å¼•ç”¨
print(weird_board)
weird_board[1][2] = 'O'
print(weird_board)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
[['_', '_', '_'], ['_', '_', '_'], ['_', '_', '_']]
[['_', '_', 'O'], ['_', '_', 'O'], ['_', '_', 'O']]
```
## åˆ—è¡¨é‡Œå­˜å­—å…¸
```
#!/usr/bin/python3
# åˆ›å»ºä¸€ä¸ªç”¨äºå­˜å‚¨å¤–æ˜Ÿäººçš„ç©ºåˆ—è¡¨ã€‚
aliens = []
# åˆ›å»º30ä¸ªç»¿è‰²çš„å¤–æ˜Ÿäººã€‚
for alien_number in range (30):
	new_alien = {'color': 'green', 'points': 5, 'speed': 'slow'}
	aliens.append(new_alien)
for alien in aliens[:3]:
	if alien['color'] == 'green':
		alien['color'] = 'yellow'
		alien['speed'] = 'medium'
		alien['points'] = 10
# æ˜¾ç¤ºå‰5ä¸ªå¤–æ˜Ÿäººã€‚
for alien in aliens[:5]:
	print(alien)
print("...")

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
{'color': 'yellow', 'points': 10, 'speed': 'medium'}
{'color': 'yellow', 'points': 10, 'speed': 'medium'}
{'color': 'yellow', 'points': 10, 'speed': 'medium'}
{'color': 'green', 'points': 5, 'speed': 'slow'}
{'color': 'green', 'points': 5, 'speed': 'slow'}
...
```
## å­—å…¸é‡Œå­˜åˆ—è¡¨
```
#!/usr/bin/python3
favorite_languages = {
	'jen': ['python', 'ruby'],
	'sarah': ['c'],
	'edward': ['ruby', 'go'],
	'phil': ['python', 'haskell'],
}
for name, languages in favorite_languages.items():
	print(f"\n{name.title()}'s favorite languages are:")
	for language in languages:
		print(f"\t{language.title()}")

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"

Jen's favorite languages are:
        Python
        Ruby

Sarah's favorite languages are:
        C

Edward's favorite languages are:
        Ruby
        Go

Phil's favorite languages are:
        Python
        Haskell
```
## å­—å…¸é‡Œå­˜å­—å…¸
```
#!/usr/bin/python3
users = {
	'aeinstein': {
		'first': 'albert',
		'last': 'einstein',
		'location': 'princeton',
	},
	'mcurie': {
		'first': 'marie',
		'last': 'curie',
		'location': 'paris',
	},
}
for username, user_info in users.items():
	print(f"\nUsername: {username}")
	full_name = f"{user_info['first']} {user_info['last']}"
	location = user_info['location']
	print(f"\tFull name: {full_name.title()}")
	print(f"\tLocation: {location.title()}")


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"

Username: aeinstein
        Full name: Albert Einstein
        Location: Princeton

Username: mcurie
        Full name: Marie Curie
        Location: Paris
```
### é€šè®¯å½•æ¡ˆä¾‹
æ¼”ç¤ºäº†é€šè¿‡"[][]"æ¥è®¿é—®å†…å±‚å­—å…¸çš„å…ƒç´ å€¼
```
#!/usr/bin/python3

people = { 
 'Alice': { 
 'phone': '2341', 
 'addr': 'Foo drive 23' 
 }, 
 'Beth': { 
 'phone': '9102', 
 'addr': 'Bar street 42' 
 }, 
'Cecil': { 
 'phone': '3158', 
 'addr': 'Baz avenue 90' 
 } 
}

# ç”µè¯å·ç å’Œåœ°å€çš„æè¿°æ€§æ ‡ç­¾ï¼Œä¾›æ‰“å°è¾“å‡ºæ—¶ä½¿ç”¨
labels = { 
 'phone': 'phone number', 
 'addr': 'address' 
} 
name = input('Name: ') 
# è¦æŸ¥æ‰¾ç”µè¯å·ç è¿˜æ˜¯åœ°å€ï¼Ÿ
request = input('Phone number (p) or address (a)? ') 
# ä½¿ç”¨æ­£ç¡®çš„é”®ï¼š
if request == 'p': key = 'phone' 
if request == 'a': key = 'addr' 
# ä½¿ç”¨getæä¾›é»˜è®¤å€¼
person = people.get(name, {}) 
label = labels.get(key, key) 
result = person.get(key, 'not available') 
print("{}'s {} is {}.".format(name, label, result)) 


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Name: Beth
Phone number (p) or address (a)? a
Beth's address is Bar street 42.
[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Name: Cecil
Phone number (p) or address (a)? p
Cecil's phone number is 3158.
```

# å…¶å®ƒç±»å‹ä¸å®¹å™¨

## æ•°ç»„ array
- æ•°ç»„æ”¯æŒæ‰€æœ‰è·Ÿå¯å˜åºåˆ—æœ‰å…³çš„æ“ä½œåŒ…æ‹¬ .popã€.insert å’Œ .extendã€‚
- æ•°ç»„è¿˜æä¾›ä»æ–‡ä»¶è¯»å–å’Œå­˜å…¥æ–‡ä»¶çš„æ›´å¿«çš„æ–¹æ³•ï¼Œå¦‚ .frombytes å’Œ .tofileã€‚
- åˆ›å»ºæ•°ç»„éœ€è¦ä¸€ä¸ªç±»å‹ç ï¼Œè¿™ä¸ªç±»å‹ç ç”¨æ¥è¡¨ç¤ºåœ¨åº•å±‚çš„ C è¯­è¨€åº”è¯¥å­˜æ”¾æ€æ ·çš„æ•°æ®ç±»å‹ã€‚
- å…·ä½“æ•°ç»„æ”¯æŒçš„æ–¹æ³•å‚åŠ â€œæµç•…çš„python 2.9.1â€
- ä¸‹é¢çš„â€˜dâ€™ä»£è¡¨å­—èŠ‚ç±»å‹ï¼Œå³byteï¼Œ-128~127
```
from array import array
from random import random
floats = array('d', (random() for i in range(10**7)))	# åŒç²¾åº¦æµ®ç‚¹æ•°ç»„ç”Ÿæˆå™¨
print(floats[-1])	# æœ€æœ«å…ƒç´ 
fp = open('floats.bin', 'wb')
floats.tofile(fp)	# å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶
fp.close()
floats2 = array('d')	# æ–°å»ºæ•°ç»„
fp = open('floats.bin', 'rb')
floats2.fromfile(fp, 10**7)	# å°†æ–‡ä»¶å†…å®¹å†™åˆ°æ•°ç»„é‡Œ
fp.close()
print(floats2[-1])	# æœ€æœ«å…ƒç´ 
print(floats2 == floats)	# åˆ¤æ–­æ•°ç»„ç›¸åŒ

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
0.4028576664776865
0.4028576664776865
True
```

## å­—èŠ‚ bytes
- å­—èŠ‚bytesæ˜¯ä¸å¯å˜çš„ï¼Œåƒå­—èŠ‚æ•°æ®ç»„æˆçš„å…ƒç»„
- bytes ç±»å‹å€¼çš„è¡¨ç¤ºä»¥ b å¼€å¤´ï¼Œæ¥ç€æ˜¯ä¸€ä¸ªå•å¼•å·ï¼Œåé¢è·Ÿç€ç”±åå…­è¿›åˆ¶æ•°ï¼ˆä¾‹å¦‚ \x02ï¼‰æˆ– ASCII ç ç»„æˆçš„åºåˆ—ï¼Œæœ€åä»¥é…å¯¹çš„å•å¼•å·ç»“æŸ
- Python ä¼šå°†è¿™äº›åå…­è¿›åˆ¶æ•°æˆ–è€… ASCII ç è½¬æ¢ä¸ºæ•´æ•°ï¼Œå¦‚æœè¯¥å­—èŠ‚çš„å€¼ä¸ºæœ‰æ•ˆ ASCIIç¼–ç åˆ™ä¼šæ˜¾ç¤º ASCII å­—ç¬¦ã€‚
- ä½¿ç”¨ 8 æ¯”ç‰¹åºåˆ—å­˜å‚¨å°æ•´æ•°çš„æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œæ¯ 8æ¯”ç‰¹ï¼ˆå³ä¸€å­—èŠ‚ï¼‰å¯ä»¥å­˜å‚¨ä» 0~255 çš„å€¼
- æ‰“å° bytes æˆ– bytearray æ•°æ®æ—¶ï¼ŒPython ä¼šä»¥ \xxx çš„å½¢å¼è¡¨ç¤ºä¸å¯æ‰“å°çš„å­—ç¬¦
- ä»¥ ASCII å­—ç¬¦çš„å½¢å¼è¡¨ç¤ºå¯æ‰“å°çš„å­—ç¬¦ï¼ˆä»¥åŠä¸€äº›è½¬ä¹‰å­—ç¬¦ï¼Œä¾‹å¦‚ \n è€Œä¸æ˜¯ \x0aï¼‰

```
blist = [1, 2, 3, 255]
the_bytes = bytes(blist)	# ä½¿ç”¨åˆ—è¡¨åˆ›å»ºä¸€ä¸ªbytes ç±»å‹çš„å˜é‡
print(the_bytes)
# the_bytes[1] = 127	# errï¼Œä¸å¯æ”¹å˜
print(b'\x61')	# æ˜¾ç¤ºaï¼Œå› ä¸º61å¯¹åº”asciiçš„a
print(b'\x01abc\xff')	# æ— å¯¹åº”ï¼ŒåŸæ ·æ˜¾ç¤º
the_bytes = bytes(range(0, 256))	# å»ºä¸€ä¸ªåŒ…å« 0åˆ°255 çš„æ‰€æœ‰æ•°çš„bytes 
print(the_bytes)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
b'\x01\x02\x03\xff'
b'a'
b'\x01abc\xff'
b'\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\x7f\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8a\x8b\x8c\x8d\x8e\x8f\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9a\x9b\x9c\x9d\x9e\x9f\xa0\xa1\xa2\xa3\xa4\xa5\xa6\xa7\xa8\xa9\xaa\xab\xac\xad\xae\xaf\xb0\xb1\xb2\xb3\xb4\xb5\xb6\xb7\xb8\xb9\xba\xbb\xbc\xbd\xbe\xbf\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf7\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff'
```

## å­—èŠ‚æ•°ç»„ bytearray

- å­—èŠ‚æ•°ç»„bytearrayæ˜¯å¯å˜çš„ï¼Œåƒå­—èŠ‚æ•°æ®ç»„æˆçš„åˆ—è¡¨ã€‚
- æ‰“å°bytearrayé€šå¸¸æ‰‹åŠ¨åŠ å…¥æ¢è¡Œç”¨äºæ˜¾ç¤ºæ•ˆæœï¼Œå¦‚ä¸€è¡Œæ˜¾ç¤º 16 ä¸ªå­—èŠ‚

```
blist = [1, 2, 3, 255]
the_byte_array = bytearray(blist) # ä½¿ç”¨åˆ—è¡¨åˆ›å»ºä¸€ä¸ªbytearrayç±»å‹çš„å˜é‡
print(the_byte_array)
the_byte_array[1] = 127	# bytearray ç±»å‹çš„å˜é‡æ˜¯å¯å˜çš„
print(the_byte_array)
the_byte_array = bytearray(range(0, 256))	# å»ºä¸€ä¸ªåŒ…å« 0åˆ°255 çš„æ‰€æœ‰æ•°çš„bytearray
print(the_byte_array)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
bytearray(b'\x01\x02\x03\xff')
bytearray(b'\x01\x7f\x03\xff')
bytearray(b'\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !"#$%&\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\x7f\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8a\x8b\x8c\x8d\x8e\x8f\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9a\x9b\x9c\x9d\x9e\x9f\xa0\xa1\xa2\xa3\xa4\xa5\xa6\xa7\xa8\xa9\xaa\xab\xac\xad\xae\xaf\xb0\xb1\xb2\xb3\xb4\xb5\xb6\xb7\xb8\xb9\xba\xbb\xbc\xbd\xbe\xbf\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xde\xdf\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf7\xf8\xf9\xfa\xfb\xfc\xfd\xfe\xff')
```
## å†…å­˜è§†å›¾ memoryview
## NumPy
## SciPy

## åŒå‘é˜Ÿåˆ— deque
- æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨ã€å¯ä»¥å¿«é€Ÿä»ä¸¤ç«¯æ·»åŠ æˆ–è€…åˆ é™¤å…ƒç´ çš„æ•°æ®ç±»å‹ã€‚
- ä¸»è¦çš„æ–¹æ³•å‚è§â€œæµç•…çš„python 2.9.4â€
```
from collections import deque
dq = deque(range(10), maxlen=10)	# maxlen æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œä»£è¡¨è¿™ä¸ªé˜Ÿåˆ—å¯ä»¥å®¹çº³çš„å…ƒç´ çš„æ•°é‡ï¼Œè€Œä¸”ä¸€æ—¦è®¾å®šï¼Œè¿™ä¸ªå±æ€§å°±ä¸èƒ½ä¿®æ”¹äº†ã€‚
print(dq)
dq.rotate(3)	# é˜Ÿåˆ—çš„æ—‹è½¬æ“ä½œæ¥å—ä¸€ä¸ªå‚æ•° nï¼Œå½“ n > 0 æ—¶ï¼Œé˜Ÿåˆ—çš„æœ€å³è¾¹çš„ n ä¸ªå…ƒç´ ä¼šè¢«ç§»åŠ¨åˆ°é˜Ÿåˆ—çš„å·¦è¾¹ã€‚å½“ n < 0 æ—¶ï¼Œæœ€å·¦è¾¹çš„ n ä¸ªå…ƒç´ ä¼šè¢«ç§»åŠ¨åˆ°å³è¾¹ã€‚
print(dq)
dq.rotate(-4) 
print(dq)
dq.appendleft(-1)	# å½“è¯•å›¾å¯¹ä¸€ä¸ªå·²æ»¡ï¼ˆlen(d) == d.maxlenï¼‰çš„é˜Ÿåˆ—åšå¤´éƒ¨æ·»åŠ æ“ä½œçš„æ—¶å€™ï¼Œå®ƒå°¾éƒ¨çš„å…ƒç´ ä¼šè¢«åˆ é™¤æ‰ã€‚æ³¨æ„åœ¨ä¸‹ä¸€è¡Œé‡Œï¼Œå…ƒç´  0 è¢«åˆ é™¤äº†ã€‚
print(dq)
dq.extend([11, 22, 33])	# åœ¨å°¾éƒ¨æ·»åŠ  3 ä¸ªå…ƒç´ çš„æ“ä½œä¼šæŒ¤æ‰ -1ã€1 å’Œ 2ã€‚
print(dq)
dq.extendleft([10, 20, 30, 40])	# extendleft(iter) æ–¹æ³•ä¼šæŠŠè¿­ä»£å™¨é‡Œçš„å…ƒç´ é€ä¸ªæ·»åŠ åˆ°åŒå‘é˜Ÿåˆ—çš„å·¦è¾¹ï¼Œå› æ­¤è¿­ä»£å™¨é‡Œçš„å…ƒç´ ä¼šé€†åºå‡ºç°åœ¨é˜Ÿåˆ—é‡Œã€‚
print(dq)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
deque([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)
deque([7, 8, 9, 0, 1, 2, 3, 4, 5, 6], maxlen=10)
deque([1, 2, 3, 4, 5, 6, 7, 8, 9, 0], maxlen=10)
deque([-1, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)
deque([3, 4, 5, 6, 7, 8, 9, 11, 22, 33], maxlen=10)
deque([40, 30, 20, 10, 3, 4, 5, 6, 7, 8], maxlen=10)
``` 

# åˆ¤æ–­
## æ¯”è¾ƒæ•°å€¼ä¸å­—ç¬¦ä¸²
```
#!/usr/bin/python3
requested_topping = 'mushrooms'
if requested_topping != 'anchovies':
	print("Hold the anchovies!")
car = 'Audi'
print(car.lower() == 'audi')

answer = 17
if answer != 42:
	print("That is not the correct answer. Please try again!")

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Hold the anchovies!
True
That is not the correct answer. Please try again!
```
## æ¯”è¾ƒè¿ç®—ç¬¦
- 0 < age < 100  
  Pythonæ”¯æŒé“¾å¼æ¯”è¾ƒï¼Œå¯åŒæ—¶ä½¿ç”¨å¤šä¸ªæ¯”è¾ƒè¿ç®—ç¬¦
- == ç”¨æ¥æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œæ¯”å€¼ï¼ˆå¯¹è±¡ä¸­ä¿å­˜çš„æ•°æ®ï¼‰
- x != y  
  xä¸ç­‰äºy

```
names = ['Mrs. Entity', 'Mrs. Thing'] 
n = names[:] 
print(n is names)
print(n == names)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
False
True
```
## isã€is notã€id()
is è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ ‡è¯†ï¼ˆæ ‡è¯†çš„æè¿°è§â€œå˜é‡â€ï¼‰ï¼›id() å‡½æ•°è¿”å›å¯¹è±¡æ ‡è¯†çš„æ•´æ•°è¡¨ç¤ºã€‚å¯¹è±¡ ID çš„çœŸæ­£æ„ä¹‰åœ¨ä¸åŒçš„å®ç°ä¸­æœ‰æ‰€ä¸åŒã€‚åœ¨ CPython ä¸­ï¼Œid() è¿”å›å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œä½†æ˜¯åœ¨å…¶ä»– Python è§£é‡Šå™¨ä¸­å¯èƒ½æ˜¯åˆ«çš„å€¼ã€‚å…³é”®æ˜¯ï¼ŒID ä¸€å®šæ˜¯å”¯ä¸€çš„æ•°å€¼æ ‡æ³¨ï¼Œè€Œä¸”åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­ç»ä¸ä¼šå˜ã€‚


- x is y  
  isç”¨æ¥æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒï¼ˆæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰
- x is not y  
  xå’Œyæ˜¯ä¸åŒçš„å¯¹è±¡

```
charles = {'name': 'Charles L. Dodgson', 'born': 1832}
print(charles)
lewis = charles	# lewisä¸charlesæŒ‡å‘åŒä¸€åœ°å€
print(lewis is charles)	 # isæ¯”åœ°å€ï¼Œæ‰€ä»¥ç›¸åŒ
print(id(charles))
print(id(lewis))
lewis['balance'] = 950
print(charles)

alex = {'name': 'Charles L. Dodgson', 'born': 1832, 'balance': 950}
print(alex == charles)	# å­—å…¸çš„==ï¼ˆå³__eq__ï¼‰æ˜¯æ¯”å€¼ï¼Œæ‰€ä»¥ç›¸åŒ
print(alex is not charles)	# ä½†isæ˜¯æ¯”åœ°å€

[huawei@n161 aaa]$ python3 test.py 
{'name': 'Charles L. Dodgson', 'born': 1832}
True
140107530622368
140107530622368
{'name': 'Charles L. Dodgson', 'born': 1832, 'balance': 950}
True
True
```

## inã€not in
- x in y  
  xæ˜¯å®¹å™¨ï¼ˆå¦‚åºåˆ—ï¼‰yçš„æˆå‘˜
- x not in y  
  xä¸æ˜¯å®¹å™¨ï¼ˆå¦‚åºåˆ—ï¼‰yçš„æˆå‘˜
## if else
```
#!/usr/bin/python3
age = 17
if age >= 18:
	print("You are old enough to vote!")
	print("Have you registered to vote yet?")
else:
	print("Sorry, you are too young to vote.")
	print("Please register to vote as soon as you turn 18!")
	
```
## æ¡ä»¶è¡¨è¾¾å¼
å³éƒ½å†™åœ¨ä¸€è¡Œé‡Œ
```
status = "friend" if name.endswith("Gumby") else "stranger" 
```
## else if
```
#!/usr/bin/python3
age = 12
if age < 4:
	price = 0
elif age < 18:
	price = 25
elif age < 65:
	price = 40
else:
	price = 20
print(f"Your admission cost is ${price}.")
```
```
#!/usr/bin/python3
requested_toppings = ['mushrooms', 'extra cheese']
if 'mushrooms' in requested_toppings:
	print("Adding mushrooms.")
elif 'pepperoni' in requested_toppings:
	print("Adding pepperoni.")
elif 'extra cheese' in requested_toppings:
	print("Adding extra cheese.")
print("\nFinished making your pizza!")
```
## å¸ƒå°”è¿ç®—ç¬¦ andã€or
```
(age_0 >= 21) and (age_1 >= 21)
(age_0 >= 21) or (age_1 >= 21)
å¦‚æœæ˜¯ç®€å•çš„æ¯”è¾ƒåˆ™å¯ä»¥ä½¿ç”¨é“¾å¼ 1 <= number <= 10
```
## æ–­è¨€
```
age = 10 
assert 0 < age < 100 
age = -1 
assert 0 < age < 100, 'The age must be realistic'  # å¯ä»¥è‡ªå®šä¹‰è¾“å‡ºï¼Œå¦åˆ™å°±æ˜¯é»˜è®¤
assert 0 < age < 100 
```
# å¾ªç¯
## while
```
#!/usr/bin/python3
prompt = "\nTell me something, and I will repeat it back to you:"
prompt += "\nEnter 'quit' to end the program. "
message = ""
while message != 'quit':
 message = input(prompt)
 if message != 'quit':
     print(message)
```
## for
```
words = ['this', 'is', 'an', 'ex', 'parrot'] 
for word in words:
    print(word) 

for word in [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]:
 	print(word) 

for number in range(1,11):
    print(number) 

d = {'x': 1, 'y': 2, 'z': 3} 
for key in d: 
	print(key, 'corresponds to', d[key]) 
for key, value in d.items(): 
	print(key, 'corresponds to', value) 


names = ['anne', 'beth', 'george', 'damon'] 
ages = [12, 45, 32, 102] 
for i in range(len(names)): 
	print(names[i], 'is', ages[i], 'years old') 
```
## breakã€continue
```
from math import sqrt 
for n in range(99, 0, -1): 
	root = sqrt(n) 
	if root == int(root): 
		print(n) 
		break

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
81		
```
## else
- for  
ä»…å½“ for å¾ªç¯è¿è¡Œå®Œæ¯•æ—¶ï¼ˆå³ for å¾ªç¯æ²¡æœ‰è¢« break è¯­å¥ä¸­æ­¢ï¼‰æ‰è¿è¡Œ else å—ã€‚
- while  
ä»…å½“ while å¾ªç¯å› ä¸ºæ¡ä»¶ä¸ºå‡å€¼è€Œé€€å‡ºæ—¶ï¼ˆå³ while å¾ªç¯æ²¡æœ‰è¢« break è¯­å¥ä¸­æ­¢ï¼‰æ‰è¿
è¡Œ else å—ã€‚
- try  
ä»…å½“ try å—ä¸­æ²¡æœ‰å¼‚å¸¸æŠ›å‡ºæ—¶æ‰è¿è¡Œ else å—ã€‚

# è¿­ä»£

## è¿­ä»£å™¨
- è¿­ä»£å™¨æ˜¯è¿™æ ·çš„å¯¹è±¡ï¼šå®ç°äº†æ— å‚æ•°çš„ __next__ æ–¹æ³•ï¼Œè¿”å›åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼›
- å¦‚æœæ²¡æœ‰å…ƒç´ äº†ï¼Œé‚£ä¹ˆæŠ›å‡º StopIteration å¼‚å¸¸ã€‚
- Python ä¸­çš„è¿­ä»£å™¨è¿˜å®ç°äº† __iter__ æ–¹æ³•ï¼Œå› æ­¤è¿­ä»£å™¨ä¹Ÿå¯ä»¥è¿­ä»£ã€‚

## ç”Ÿæˆå™¨å‡½æ•° yield
- åªè¦ Python å‡½æ•°çš„å®šä¹‰ä½“ä¸­æœ‰ yield å…³é”®å­—ï¼Œè¯¥å‡½æ•°å°±æ˜¯ç”Ÿæˆå™¨å‡½æ•°ã€‚
- è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”Ÿæˆå™¨å‡½æ•°æ˜¯ç”Ÿæˆå™¨å·¥å‚ã€‚
- æ™®é€šçš„å‡½æ•°ä¸ç”Ÿæˆå™¨å‡½æ•°åœ¨å¥æ³•ä¸Šå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œåœ¨åè€…çš„å®šä¹‰ä½“ä¸­æœ‰yield å…³é”®å­—ã€‚
- è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°è¿”å›ç”Ÿæˆå™¨å¯¹è±¡ï¼›ç”Ÿæˆå™¨äº§å‡ºæˆ–ç”Ÿæˆå€¼ã€‚
- æŠŠç”Ÿæˆå™¨ä¼ ç»™nextå‡½æ•°æ—¶ï¼Œç”Ÿæˆå™¨å‡½æ•°ä¼šå‘å‰ï¼Œæ‰§è¡Œåˆ°å‡½æ•°å®šä¹‰ä¸­çš„ä¸‹ä¸€ä¸ªyieldè¯­å¥ï¼Œè¿”å›äº§å‡ºçš„å€¼


```
def gen_AB():
	print('start')
	yield 'A'
	print('continue')
	yield 'B'
	print('end.')

for c in gen_AB():	# for æœºåˆ¶ä¼šæ•è·StopIteration å¼‚å¸¸ï¼Œå› æ­¤å¾ªç¯ç»ˆæ­¢æ—¶æ²¡æœ‰æŠ¥é”™ã€‚
	print('-->', c)

a = gen_AB()	# åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡
print(next(a))	# æ‰“å°startã€A
print(next(a))	# æ‰“å°continueã€B
print(next(a))	# æ‰“å°end.åç”±äºæ²¡æœ‰åç»­å…ƒç´ ï¼Œç”Ÿæˆå™¨å¯¹è±¡ä¼šæŠ›å‡º StopIteration å¼‚å¸¸


[huawei@n161 ccc]$ python3 1.py
start
--> A
continue
--> B
end.
start
A
continue
B
end.
Traceback (most recent call last):
  File "1.py", line 16, in <module>
    print(next(a))
StopIteration
```
## æ ‡å‡†åº“æä¾›çš„ç”Ÿæˆå™¨

è¯¦è§æµç•…çš„python14.9ã€14.11
### ç”¨äºè¿‡æ»¤çš„ç”Ÿæˆå™¨å‡½æ•°
```
import itertools
 
# itertools.compress(it,selector_it)
# å¹¶è¡Œå¤„ç†ä¸¤ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚æœselector_itä¸­çš„å…ƒç´ æ˜¯çœŸå€¼ï¼Œäº§å‡ºitä¸­å¯¹åº”çš„å…ƒç´ 
print([i for i in itertools.compress(range(10), [0, 0, 1, 1])])
 
# itertools.takewhile(predicate,it)
# ä½¿ç”¨ä¼ å…¥çš„ç”Ÿæˆå™¨ç”Ÿæˆå¦ä¸€ä¸ªç”Ÿæˆå™¨ï¼ŒpredicateæŒ‡å®šç»ˆæ­¢æ¡ä»¶
print([i for i in itertools.takewhile(lambda n: n < 5, range(10))])
 
# itertools.dropwhile(prdicate,it)
# ä¸itertools.takewhileçš„ä½œç”¨ç›¸å
print([i for i in itertools.dropwhile(lambda n: n < 5, range(10))])
 
# filter(predicate,it)
# å°†itä¸­çš„å„ä¸ªå…ƒç´ ä¼ ç»™predicateï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™äº§å‡ºitä¸­å¯¹åº”çš„å…ƒç´ 
print([i for i in filter(lambda a: a % 2, range(10))])  # ä¿ç•™å¥‡æ•°
 
# itertools.filterfalse(predicate,it)
# ä¸filterçš„ä½œç”¨ç›¸å
print([i for i in itertools.filterfalse(lambda a: a % 2, range(10))])  # ä¿ç•™å¶æ•°
 
# itertools.islice(it,stop)æˆ–è€…itertools.islice(it,start,stop,step=1)
# äº§å‡ºitçš„åˆ‡ç‰‡ å®ç°çš„æ˜¯æƒ°æ€§æ“ä½œ
print([i for i in itertools.islice(range(10), 2)])
print([i for i in itertools.islice(range(10), 2, 9, 3)])

[huawei@n161 ccc]$ python3 1.py
[2, 3]
[0, 1, 2, 3, 4]
[5, 6, 7, 8, 9]
[1, 3, 5, 7, 9]
[0, 2, 4, 6, 8]
[0, 1]
[2, 5, 8]
```

### ç”¨äºæ˜ å°„çš„ç”Ÿæˆå™¨å‡½æ•°
```
import itertools
import fractions
import operator
 
# itertools.accumulate(it,func)
# äº§å‡ºç´¯ç§¯çš„æ€»å’Œï¼Œå¦‚æœæä¾›äº†funcï¼Œé‚£ä¹ˆæŠŠå‰ä¸¤ä¸ªå…ƒç´ ä¼ ç»™å®ƒï¼Œç„¶åæŠŠè®¡ç®—çš„ç»“æœå’Œä¸‹ä¸€ä¸ªå…ƒç´ ä¼ ç»™å®ƒï¼Œä»¥æ­¤ç±»æ¨
print([i for i in itertools.accumulate(range(10), lambda a, b: a + b)])  # è®¡ç®—å‰né¡¹çš„å’Œ
 
# enunerate(it,start=0)
# äº§å‡ºç”±ä¸¤ä¸ªå…ƒç´ æ„æˆçš„å…ƒç»„ ç»“æ„æ˜¯(index,item) indexä»startå¼€å§‹ï¼Œæ¯æ¬¡åŠ ä¸€ itemçš„å€¼ä¸­itä¸­å–
print([i for i in enumerate(range(10), start=10)])
 
# map(func,iter,[it2,...itn])
# æŠŠitä¸­çš„å„ä¸ªå…ƒç´ ä¼ ç»™funcï¼Œäº§å‡ºç»“æœï¼Œå¦‚æœä¼ å…¥nä¸ªitï¼Œfuncçš„å‚æ•°å¿…é¡»æœ‰nä¸ª
print([i for i in map(lambda a, b, c: a + b + c, range(-10, 0, 1), range(10), range(10, 20))])  # å¯¹it1ï¼Œit2ï¼Œit3å¯¹åº”ä½ç½®çš„å…ƒç´ è¿›è¡Œæ±‚å’Œ
# itertools.startmap(func,it)
# æŠŠitä¸­çš„å„ä¸ªå…ƒç´ ä¼ ç»™funcï¼Œäº§å‡ºç»“æœ
print([i for i in itertools.starmap(operator.mul, enumerate('hello world', 1))])  # ä»1å¼€å§‹ï¼Œæ ¹æ®å­—æ¯æ‰€åœ¨ä½ç½®ï¼ŒæŠŠå­—æ¯é‡å¤ç›¸åº”çš„æ¬¡æ•°

[huawei@n161 ccc]$ python3 1.py
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45]
[(10, 0), (11, 1), (12, 2), (13, 3), (14, 4), (15, 5), (16, 6), (17, 7), (18, 8), (19, 9)]
[0, 3, 6, 9, 12, 15, 18, 21, 24, 27]
['h', 'ee', 'lll', 'llll', 'ooooo', '      ', 'wwwwwww', 'oooooooo', 'rrrrrrrrr', 'llllllllll', 'ddddddddddd']
```

### åˆå¹¶å¤šä¸ªå¯è¿­ä»£å¯¹è±¡çš„ç”Ÿæˆå™¨å‡½æ•°
```
import itertools
 
# itertools.chain(it1,[it2...it2])
# å…ˆäº§å‡ºit1ä¸­çš„å…ƒç´ ï¼Œç„¶åäº§å‡ºit2ä¸­çš„å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæ— ç¼è¿æ¥åœ¨ä¸€èµ·
print([i for i in itertools.chain(range(10), range(11, 20), 'hello world')])
 
# itertools.chain.from_iterable(it)
# åŠŸèƒ½åŒitertools.chain ä¸è¿‡ä¼ å…¥çš„å‚æ•°çš„ç»“æ„æœ‰æ‰€å˜åŒ–   itçš„ç»“æ„ï¼šit=[iter1,[iter2...itern]]
print([i for i in itertools.chain.from_iterable([range(10), 'hello'])])
 
# itertools.product(it1,...itn,repeat=1)
# è®¡ç®—ç¬›å¡å°”ç§¯ï¼Œä»è¾“å…¥çš„å„ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­è·å–å…ƒç´ ï¼Œåˆå¹¶æˆç”±Nä¸ªå…ƒç´ ç»„æˆçš„å…ƒç»„ï¼Œä¸åµŒå¥—çš„forå¾ªç¯æ•ˆæœä¸€æ ·ï¼ŒrepeatæŒ‡æ˜é‡å¤å¤„ç†å¤šå°‘æ¬¡è¾“å…¥çš„å¯è¿­ä»£å¯¹è±¡
print([i for i in itertools.product(range(3), 'hello', 'world', repeat=1)])
 
# zip(it1,...itn)
# å¹¶è¡Œä»è¾“å…¥çš„å„ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­è·å–å…ƒç´ ï¼Œäº§å‡ºç”±Nä¸ªå…ƒç´ ç»„æˆçš„å…ƒç»„ï¼Œåªè¦æœ‰ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡åˆ°äº†å¤´ï¼Œè¿­ä»£å°±ç»ˆæ­¢
print([i for i in zip(range(5), 'hello')])
 
# zip_longest(it1,..itn,fillvalue=None)
# ä¸zipä½œç”¨ä¸€æ ·ï¼Œä½†æ˜¯ç»ˆæ­¢æ¡ä»¶æ˜¯æœ€é•¿çš„å¯è¿­ä»£å¯¹è±¡åˆ°å¤´äº†æ‰ç»ˆæ­¢ï¼Œå…¶ä»–å¯è¿­ä»£å¯¹è±¡ç©ºç¼ºçš„å€¼ç”¨fillvalueè¿›è¡Œè¡¥å……
print([i for i in itertools.zip_longest(range(10), 'hello', fillvalue='world')])

[huawei@n161 ccc]$ python3 1.py
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 16, 17, 18, 19, 'h', 'e', 'l', 'l', 'o', ' ', 'w', 'o', 'r', 'l', 'd']
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'h', 'e', 'l', 'l', 'o']
[(0, 'h', 'w'), (0, 'h', 'o'), (0, 'h', 'r'), (0, 'h', 'l'), (0, 'h', 'd'), (0, 'e', 'w'), (0, 'e', 'o'), (0, 'e', 'r'), (0, 'e', 'l'), (0, 'e', 'd'), (0, 'l', 'w'), (0, 'l', 'o'), (0, 'l', 'r'), (0, 'l', 'l'), (0, 'l', 'd'), (0, 'l', 'w'), (0, 'l', 'o'), (0, 'l', 'r'), (0, 'l', 'l'), (0, 'l', 'd'), (0, 'o', 'w'), (0, 'o', 'o'), (0, 'o', 'r'), (0, 'o', 'l'), (0, 'o', 'd'), (1, 'h', 'w'), (1, 'h', 'o'), (1, 'h', 'r'), (1, 'h', 'l'), (1, 'h', 'd'), (1, 'e', 'w'), (1, 'e', 'o'), (1, 'e', 'r'), (1, 'e', 'l'), (1, 'e', 'd'), (1, 'l', 'w'), (1, 'l', 'o'), (1, 'l', 'r'), (1, 'l', 'l'), (1, 'l', 'd'), (1, 'l', 'w'), (1, 'l', 'o'), (1, 'l', 'r'), (1, 'l', 'l'), (1, 'l', 'd'), (1, 'o', 'w'), (1, 'o', 'o'), (1, 'o', 'r'), (1, 'o', 'l'), (1, 'o', 'd'), (2, 'h', 'w'), (2, 'h', 'o'), (2, 'h', 'r'), (2, 'h', 'l'), (2, 'h', 'd'), (2, 'e', 'w'), (2, 'e', 'o'), (2, 'e', 'r'), (2, 'e', 'l'), (2, 'e', 'd'), (2, 'l', 'w'), (2, 'l', 'o'), (2, 'l', 'r'), (2, 'l', 'l'), (2, 'l', 'd'), (2, 'l', 'w'), (2, 'l', 'o'), (2, 'l', 'r'), (2, 'l', 'l'), (2, 'l', 'd'), (2, 'o', 'w'), (2, 'o', 'o'), (2, 'o', 'r'), (2, 'o', 'l'), (2, 'o', 'd')]
[(0, 'h'), (1, 'e'), (2, 'l'), (3, 'l'), (4, 'o')]
[(0, 'h'), (1, 'e'), (2, 'l'), (3, 'l'), (4, 'o'), (5, 'world'), (6, 'world'), (7, 'world'), (8, 'world'), (9, 'world')]
```

### æŠŠè¾“å…¥çš„å„ä¸ªå…ƒç´ æ‰©å±•æˆå¤šä¸ªè¾“å‡ºå…ƒç´ çš„ç”Ÿæˆå™¨å‡½æ•°
```

import itertools
 
# itertools.combinations(it,out_len)  ç»„åˆ å’Œé¡ºåºæ— å…³
# æŠŠitäº§å‡ºçš„out_lenä¸ªå…ƒç´ ç»„åˆåœ¨ä¸€èµ·ï¼Œç„¶åäº§å‡º
print([i for i in itertools.combinations('ABC', 2)])  # äº§å‡ºä¸¤ä¸¤ç»„åˆçš„å…ƒç´ 
 
# itertools.combinations_with_replacement ç»„åˆ
# åŠŸèƒ½åŒitertools.combinationsï¼Œä½†æ˜¯ä¹ŸåŒ…å«è‡ªå·±å’Œè‡ªå·±çš„ç»„åˆ
print([i for i in itertools.combinations_with_replacement('ABC', 2)])
 
# itertools.count(start=0,step=1)
# ä»startå¼€å§‹ï¼Œä»¥stepä¸ºæ­¥é•¿ï¼Œä¸æ–­äº§å‡ºæ•°å­—
for i in itertools.count(1, 2):
    print(i, end=' ')
    if i > 10: break
print()
 
# itertools.permutations(it,out_len=len(list(it)))
# æŠŠitäº§å‡ºçš„out_lenä¸ªå…ƒç´ æ’åˆ—åœ¨ä¸€èµ·  æ’åˆ—  å’Œé¡ºåºæœ‰å…³
print([i for i in itertools.permutations('ABC', 2)])
 
# repeat(item,[times])
# é‡å¤ä¸æ–­çš„äº§å‡ºæŒ‡å®šçš„å…ƒç´ ï¼Œé™¤éæä¾›timesæŒ‡å®šæ¬¡æ•°
print([i for i in itertools.repeat('hello', 10)])
 
# itertools.cycle(it)
# ä»itä¸­äº§å‡ºå„ä¸ªå…ƒç´ ï¼Œå­˜å‚¨å„ä¸ªå…ƒç´ çš„å‰¯æœ¬ï¼Œç„¶åæŒ‰é¡ºåºé‡å¤ä¸æ–­åœ°äº§å‡ºå„ä¸ªå…ƒç´ 
cy = itertools.cycle('ABC')  # å°†ité¦–ä½ç›¸è¿
while True:
    print(next(cy))
    break

[huawei@n161 ccc]$ python3 1.py
[('A', 'B'), ('A', 'C'), ('B', 'C')]
[('A', 'A'), ('A', 'B'), ('A', 'C'), ('B', 'B'), ('B', 'C'), ('C', 'C')]
1 3 5 7 9 11 
[('A', 'B'), ('A', 'C'), ('B', 'A'), ('B', 'C'), ('C', 'A'), ('C', 'B')]
['hello', 'hello', 'hello', 'hello', 'hello', 'hello', 'hello', 'hello', 'hello', 'hello']
A
```

### ç”¨äºé‡æ–°æ’åˆ—å…ƒç´ çš„ç”Ÿæˆå™¨å‡½æ•°
```
import itertools
 
# itertools.groupby(it,key=None)
# äº§å‡ºç”±ç»ƒä¸ªå…ƒç´ ç»„æˆçš„å…ƒç´ ï¼Œå½¢å¼ä¸º(key,group)ï¼Œå…¶ä¸­keyæ˜¯åˆ†ç»„æ ‡å‡†ï¼Œgroupæ˜¯ç”Ÿæˆå™¨ï¼Œç”¨äºäº§å‡ºåˆ†ç»„é‡Œçš„å…ƒç´ 
strs_list = ['hello', 'world', 'we', 'price', 'the', 'things', 'when', 'we', 'have', 'lost', 'them', '.']
strs_list.sort(key=len)  # å…ˆæ’åº
for key, group in itertools.groupby(strs_list, key=len):  # æ ¹æ®å…ƒç´ çš„é•¿åº¦è¿›è¡Œåˆ†ç»„
    print(key, list(group))
 
# reversed(seq)
# ä»åå‘å‰ï¼Œå€’åºäº§å‡ºseq seqå¿…é¡»æ˜¯åºåˆ—ï¼Œæˆ–è€…æ˜¯å®ç°äº†__reversed__çš„å¯¹è±¡
print(list(reversed(strs_list)))
 
# itertools.tee(it,n=2)
# äº§å‡ºä¸€ä¸ªç”±nä¸ªç”Ÿæˆå™¨ç»„æˆçš„å…ƒç»„ï¼Œæ¯ä¸ªç”Ÿæˆå™¨ç”¨äºå•ç‹¬äº§å‡ºè¾“å…¥çš„å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ 
g1, g2 = itertools.tee('ABC')
print(list(g1))
print(list(g2))

[huawei@n161 ccc]$ python3 1.py
1 ['.']
2 ['we', 'we']
3 ['the']
4 ['when', 'have', 'lost', 'them']
5 ['hello', 'world', 'price']
6 ['things']
['things', 'price', 'world', 'hello', 'them', 'lost', 'have', 'when', 'the', 'we', 'we', '.']
['A', 'B', 'C']
['A', 'B', 'C']
```
### å¯è¿­ä»£çš„å½’çº¦å‡½æ•°
```
import functools
import itertools
 
# å½’çº¦å‡½æ•°:æ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œç„¶åè¿”å›å•ä¸ªç»“æœçš„å‡½æ•°ã€‚
 
# all(it)
# itä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸ºçœŸæ—¶è¿”å›Trueï¼Œå¦è€…è¿”å›False
print(all(range(10)))  # å› ä¸ºå‡ºç°äº†0ï¼Œæ‰€ä»¥è¿”å›False
 
# any(it)
# åªæœ‰æœ‰ä¸€ä¸ªå…ƒç´ æ˜¯Trueå°±è¿”å›Trueï¼Œå¦è€…è¿”å›False
print(any(range(10)))
 
# max(it,[key=],[default=])
# è¿”å›itä¸­çš„æœ€å¤§å€¼ï¼ŒkeyæŒ‡å®šæ’åºè§„åˆ™ï¼Œå¦‚æœitä¸ºç©ºï¼Œè¿”å›defaultçš„å€¼
print(max(['apple', 'banana', 'orange', 'peach'], key=len, default='apple'))  # æŒ‰ç…§é•¿åº¦è¿›è¡Œæ¯”è¾ƒ
 
# min(it,[key=],[default=])
# è¿”å›itä¸­çš„æœ€å°å€¼ï¼ŒkeyæŒ‡å®šæ’åºè§„åˆ™ï¼Œå¦‚æœitä¸ºç©ºï¼Œè¿”å›defaultçš„å€¼
print(min([1, 2, -4, -9, 6], key=abs, default=0))  # æŒ‰ç…§ç»å¯¹å€¼è¿›è¡Œæ¯”è¾ƒ
 
# itertools.reduce(func,it,[initial])
# æŠŠå‰ä¸¤ä¸ªå…ƒç´ ä¼ ç»™funcï¼Œç„¶åæŠŠè®¡ç®—ç»“æœå’Œç¬¬ä¸‰ä¸ªå…ƒç´ ä¼ ç»™funcï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿”å›æœ€åçš„ç»“æœï¼Œå¦‚æœæä¾›äº†initial
# å°±ä¼šæŠŠå®ƒå½“åšç¬¬ä¸€ä¸ªå…ƒç´ ä¼ å…¥
print(functools.reduce(lambda a, b: a * b, range(1, 11)))  # è®¡ç®—10ï¼
print(list(itertools.accumulate(range(1, 11), lambda a, b: a * b)))  # ä¾æ¬¡è®¡ç®—1! 2! 3!...10!
 
# sum(it,start=0)
# itä¸­æ‰€æœ‰å…ƒç´ çš„æ€»å’Œï¼Œå¦‚æœæä¾›å¯é€‰çš„startï¼Œä¼šæŠŠå®ƒåŠ ä¸Š
# 0+1+2+10=13
print(sum(range(3), 10))

[huawei@n161 ccc]$ python3 1.py
False
True
banana
1
3628800
[1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800]
13
```

## yield from
https://blog.csdn.net/max_LLL/article/details/124242358

## ç”Ÿæˆå™¨è¡¨è¾¾å¼
- ç”Ÿæˆå™¨è¡¨è¾¾å¼å¯ä»¥ç†è§£ä¸ºåˆ—è¡¨æ¨å¯¼çš„æƒ°æ€§ç‰ˆæœ¬ï¼šä¸ä¼šè¿«åˆ‡åœ°æ„å»ºåˆ—è¡¨ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼ŒæŒ‰éœ€æƒ°æ€§ç”Ÿæˆå…ƒç´ ã€‚
- å¦‚æœåˆ—è¡¨æ¨å¯¼æ˜¯åˆ¶é€ åˆ—è¡¨çš„å·¥å‚ï¼Œé‚£ä¹ˆç”Ÿæˆå™¨è¡¨è¾¾å¼å°±æ˜¯åˆ¶é€ ç”Ÿæˆå™¨çš„å·¥å‚ã€‚
- å¦‚æœç”Ÿæˆå™¨è¡¨è¾¾å¼è¦åˆ†æˆå¤šè¡Œå†™ï¼Œåˆ™æ¨èä½¿ç”¨ç”Ÿæˆå™¨å‡½æ•°ï¼Œä»¥ä¾¿æé«˜å¯è¯»æ€§ã€‚æ­¤å¤–ï¼Œç”Ÿæˆå™¨å‡½æ•°æœ‰åç§°ï¼Œå› æ­¤å¯ä»¥é‡ç”¨ã€‚
- ç”Ÿæˆå™¨è¡¨è¾¾å¼æ˜¯åˆ›å»ºç”Ÿæˆå™¨çš„ç®€æ´å¥æ³•ï¼Œè¿™æ ·æ— éœ€å…ˆå®šä¹‰å‡½æ•°å†è°ƒç”¨ã€‚ä¸è¿‡ï¼Œç”Ÿæˆå™¨å‡½æ•°çµæ´»å¾—å¤šï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªè¯­å¥å®ç°å¤æ‚çš„é€»è¾‘ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåç¨‹ä½¿ç”¨
  
```
def gen_AB():
	print('start')
	yield 'A'
	print('continue')
	yield 'B'
	print('end.')

res1 = [x*3 for x in gen_AB()]	# æ‰“å°startã€continueã€end.æ­¤å¤„æ˜¯åˆ—è¡¨æ¨å¯¼ï¼Œå…¨åˆ›å»ºå‡ºæ¥äº†ï¼Œélazy
for i in res1:
    print('-->', i)	# æ‰“å°AAAã€BBB
print("------------")
res2 = (x*3 for x in gen_AB())	# lazyï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼ä¼šäº§å‡ºç”Ÿæˆå™¨å¯¹è±¡ï¼Œæœªæ‰§è¡Œç”Ÿæˆå™¨å†…çš„ä»£ç 
for i in res2:	# å¾ªç¯æ—¶åˆ»æ‰æ‰§è¡Œç”Ÿæˆå™¨å†…çš„ä»£ç 
    print('-->', i)

[huawei@n161 ccc]$ python3 1.py
start
continue
end.
--> AAA
--> BBB
------------
start
--> AAA
continue
--> BBB
end.
```


## å¯è¿­ä»£å¯¹è±¡

- ä½¿ç”¨ iter å†…ç½®å‡½æ•°å¯ä»¥è·å–è¿­ä»£å™¨çš„å¯¹è±¡ã€‚
- å¦‚æœå¯¹è±¡å®ç°äº†èƒ½è¿”å›è¿­ä»£å™¨çš„ __iter__ æ–¹æ³•ï¼Œé‚£ä¹ˆå¯¹è±¡å°±æ˜¯å¯è¿­ä»£çš„ã€‚
- åºåˆ—éƒ½å¯ä»¥è¿­ä»£ï¼›
- å®ç°äº† __getitem__ æ–¹æ³•ï¼Œè€Œä¸”å…¶å‚æ•°æ˜¯ä»é›¶å¼€å§‹çš„ç´¢å¼•ï¼Œè¿™ç§å¯¹è±¡ä¹Ÿå¯ä»¥è¿­ä»£ã€‚


### è¿­ä»£å‡½æ•° __getitem__
å¦‚æœæ²¡æœ‰å®ç° __iter__ æ–¹æ³•ï¼Œä½†æ˜¯å®ç°äº† __getitem__ æ–¹æ³•ï¼ŒPython ä¼šåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œå°è¯•æŒ‰é¡ºåºï¼ˆä»ç´¢å¼• 0 å¼€å§‹ï¼‰è·å–å…ƒç´ ã€‚æ­¤å¯¹è±¡åˆ™æ˜¯å¯è¿­ä»£çš„
```
#!/usr/bin/python3
import re
import reprlib
RE_WORD = re.compile('\w+')
class Sentence:
	def __init__(self, text):
		self.text = text
		self.words = RE_WORD.findall(text)
	def __getitem__(self, index):
		return self.words[index]
	def __len__(self):
		return len(self.words)
	def __repr__(self):
		return 'Sentence(%s)' % reprlib.repr(self.text)

s = Sentence('"The time has come," the Walrus said,')

for word in s:
    print(word)
print(s)
print(s[0])
print(s[-1])



[huawei@n161 ccc]$ python3 1.py
The
time
has
come
the
Walrus
said
Sentence('"The time ha... Walrus said,')
The
said
```
### è¿­ä»£å‡½æ•° iterã€next
- iter()å‡½æ•°çš„åŠŸèƒ½æ˜¯ï¼šæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå°†å…¶è½¬æ¢æˆä¸€ä¸ªè¿­ä»£å™¨
- è¿˜å¯ä»¥æœ‰2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸­çš„å¯¹è±¡ä¸æ–­äº§å‡ºå€¼ï¼Œå¦‚æœäº§å‡ºçš„å€¼å’Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œå°±åœæ­¢äº§å‡º

ä¸€èˆ¬ç”¨æ³•
```
a=[1,2,3]
a_iter=iter(a)
print(a_iter)
print(next(a_iter))
print(next(a_iter))


[huawei@n161 ccc]$ python3 1.py
<list_iterator object at 0x7fea017d3240>
1
2
```
ä¸€èˆ¬ç”¨æ³•
```
#!/usr/bin/python3
import re
import reprlib
RE_WORD = re.compile('\w+')
class Sentence:
	def __init__(self, text):
		self.text = text
		self.words = RE_WORD.findall(text)
	def __getitem__(self, index):
		return self.words[index]
	def __len__(self):
		return len(self.words)
	def __repr__(self):
		return 'Sentence(%s)' % reprlib.repr(self.text)

s3 = Sentence('Pig and Pepper')
print(list(iter(s3)))	# ['Pig', 'and', 'Pepper']ï¼Œä½¿ç”¨itæ„å»ºäº†listï¼Œæ­¤æ—¶itå·²ç»ç”¨å®Œäº†ã€‚å¦‚æœæƒ³å†æ¬¡è¿­ä»£ï¼Œè¦é‡æ–°æ„å»ºè¿­ä»£å™¨
it = iter(s3)	# åˆé‡æ–°æ„å»ºäº†it
print(it)	# <iterator object at 0x7f27cb075dd8> æ‰“å°äº†åœ°å€
print(next(it))	# Pig
print(next(it))	# and
print(list(it))	# ['Pepper']ï¼Œä½¿ç”¨itæ„å»ºäº†listï¼Œæ­¤æ—¶itç”¨å®Œäº†
print(list(it))	# []ï¼Œitå·²ç»ç”¨å®Œäº†ï¼Œæ‰€ä»¥æ„å»ºå‡ºç©ºlist
print(next(it))	# errï¼Œitæ²¡æœ‰æ•°æ®äº†ã€‚ã€‚ã€‚

[huawei@n161 ccc]$ python3 1.py
['Pig', 'and', 'Pepper']
<iterator object at 0x7f329c5eddd8>
Pig
and
['Pepper']
[]
Traceback (most recent call last):
  File "1.py", line 24, in <module>
    print(next(it))
StopIteration
[huawei@n161 ccc]$ 
```


é«˜çº§ç”¨æ³•ï¼šéšæœºäº§ç”Ÿ1åˆ°10çš„æ•°å­—ï¼Œå¦‚æœäº§å‡ºæ•°å­—æ˜¯5å°±åœæ­¢ã€‚
```
from random import randint
 
def d10():
    return randint(1, 10)
 
# éšæœºäº§ç”Ÿ1~10ä¹‹é—´çš„æ•°ï¼Œé‡åˆ°5å°±åœæ­¢
for i in iter(d10, 5):
    print(i)
```




# å‡½æ•°
## å®šä¹‰ã€ä¼ å€¼ã€é»˜è®¤å€¼ã€ç±»å‹
```
#!/usr/bin/python3
def describe_pet(pet_name, animal_type='dog'):
	"""æ˜¾ç¤ºå® ç‰©çš„ä¿¡æ¯ã€‚"""
	print(f"\nI have a {animal_type}.")
	print(f"My {animal_type}'s name is {pet_name.title()}.")

describe_pet('hamster', 'harry')
describe_pet(pet_name='harry', animal_type='hamster')
describe_pet(pet_name='willie')
```
- Pythonä¸­çš„ä»»æ„ä¸€ä¸ªå‡½æ•°éƒ½æœ‰æ•°æ®ç±»å‹ï¼Œè¿™ç§æ•°æ®ç±»å‹æ˜¯functionï¼Œè¢«ç§°ä¸ºå‡½æ•°ç±»å‹ã€‚
- ä¸‹é¢æ˜¯ä¸€ä¸ªä¼ é€’å¼•ç”¨ä¸”æœ‰é»˜è®¤å€¼çš„ä½¿ç”¨æ–¹å¼ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š
- é™¤éè¿™ä¸ªæ–¹æ³•ç¡®å®æƒ³ä¿®æ”¹é€šè¿‡å‚æ•°ä¼ å…¥çš„å¯¹è±¡ï¼Œå¦åˆ™åœ¨ç±»ä¸­ç›´æ¥æŠŠå‚æ•°èµ‹å€¼ç»™å®ä¾‹å˜é‡ä¹‹å‰ä¸€å®šè¦ä¸‰æ€ï¼Œå› ä¸ºè¿™æ ·ä¼šä¸ºå‚æ•°å¯¹è±¡åˆ›å»ºåˆ«åã€‚å¦‚æœä¸ç¡®å®šï¼Œé‚£å°±åˆ›å»ºå‰¯æœ¬ã€‚
- æ­¤æ¡ˆä¾‹å…·æœ‰ä»£è¡¨æ„ä¹‰ï¼Œè¯¦è§æµç•…çš„Python8.4.2
```
def __init__(self, passengers=None):
	if passengers is None:
		self.passengers = []
	else:
		self.passengers = list(passengers)
```
## è¿”å›å€¼
```
def get_formatted_name(first_name, last_name, middle_name=''):
	if middle_name:
		full_name = f"{first_name} {middle_name} {last_name}"
	else:
		full_name = f"{first_name} {last_name}"
	return full_name.title()

musician = get_formatted_name('jimi', 'hendrix')
print(musician)
musician = get_formatted_name('john', 'hooker', 'lee')
print(musician)
```
## ï¼ˆä¼ å€ï¼‰ä¼ åˆ—è¡¨ã€ä¼ å­—å…¸
å®é™…æ˜¯ä¼ å¼•ç”¨ï¼Œåœ¨å‡½æ•°å†…åˆ æ‰åå¤–é¢ä¹Ÿéƒ½æ²¡äº†
```
#!/usr/bin/python3

def fun1(arr):
	while(arr):
		arr.pop()

unprinted_designs = ['phone case', 'robot pendant', 'dodecahedron']
print(unprinted_designs)
fun1(unprinted_designs)
print(unprinted_designs)



def fun2(dict):
	del dict['color']

alien_0 = {'color': 'green', 'points': 5}
print(alien_0)
fun2(alien_0)
print(alien_0)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['phone case', 'robot pendant', 'dodecahedron']
[]
{'color': 'green', 'points': 5}
{'points': 5}
```
## ï¼ˆä¼ å€¼ï¼‰ä¼ åˆ—è¡¨åˆ‡ç‰‡
å®åˆ™ä¼ é€’çš„æ˜¯åˆ—è¡¨çš„å‰¯æœ¬ï¼Œå¤–é¢å’Œé‡Œé¢ä¸æ˜¯åŒä¸€ä»½æ•°æ®
```
#!/usr/bin/python3

def fun1(arr):
	while(arr):
		arr.pop()

unprinted_designs = ['phone case', 'robot pendant', 'dodecahedron']
print(unprinted_designs)
fun1(unprinted_designs[:])
print(unprinted_designs)



def fun2(dict):
	del dict['color']

alien_0 = {'color': 'green', 'points': 5}
print(alien_0)
fun2(alien_0)
print(alien_0)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
['phone case', 'robot pendant', 'dodecahedron']
['phone case', 'robot pendant', 'dodecahedron']
{'color': 'green', 'points': 5}
{'points': 5}

```

## å¯å˜å‚æ•°ï¼ˆ*ä¸**ï¼‰
- åˆ†ä¸ºåŸºäºå…ƒç»„çš„å¯å˜å‚æ•°ï¼ˆ*å¯å˜å‚æ•°ï¼‰ä¸åŸºäºå­—å…¸çš„å¯å˜å‚æ•°ï¼ˆ**å¯å˜å‚æ•°ï¼‰
- æ•ˆæœç±»ä¼¼perlçš„ARGVä¸@_

```
ä¸‹ä¾‹* toppingså®åˆ™ä¼šå˜ä¸ºå…ƒç¥–ï¼Œå†…å®¹ä¸º('mushrooms', 'green peppers', 'extra cheese')ã€‚

#!/usr/bin/python3
def make_pizza(size, *toppings):
	print(f"\nMaking a {size}-inch pizza with the following toppings:")
	for topping in toppings:
		print(f"- {topping}")
make_pizza(16, 'pepperoni')
make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')


def build_profile(first, last, **user_info):
	user_info['first_name'] = first
	user_info['last_name'] = last
	return user_info
user_profile = build_profile('albert', 'einstein', location='princeton', field='physics')
print(user_profile)

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"

Making a 16-inch pizza with the following toppings:
- pepperoni

Making a 12-inch pizza with the following toppings:
- mushrooms
- green peppers
- extra cheese
{'location': 'princeton', 'field': 'physics', 'first_name': 'albert', 'last_name': 'einstein'}
```
- å¦‚æœåœ¨å®šä¹‰å’Œè°ƒç”¨å‡½æ•°æ—¶éƒ½ä½¿ç”¨*æˆ–**ï¼Œå°†åªèƒ½ä¼ é€’å…ƒç»„æˆ–å­—å…¸ã€‚åè€Œä¸ä¾¿

å¦‚ä¸‹ï¼Œä¸¤ç§æ–¹å¼ç»“æœä¸€æ ·
```
def with_stars(**kwds): 
	print(kwds['name'], 'is', kwds['age'], 'years old') 

def without_stars(kwds): 
	print(kwds['name'], 'is', kwds['age'], 'years old') 

args = {'name': 'Mr. Gumby', 'age': 42} 
with_stars(**args) 
without_stars(args) 

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Mr. Gumby is 42 years old
Mr. Gumby is 42 years old
```
- åªæœ‰åœ¨å®šä¹‰å‡½æ•°ï¼ˆå…è®¸å¯å˜æ•°é‡çš„å‚æ•°ï¼‰æˆ–è°ƒç”¨å‡½æ•°æ—¶ï¼ˆæ‹†åˆ†å­—å…¸æˆ–åºåˆ—ï¼‰ä½¿ç”¨ï¼Œæ˜Ÿå·æ‰èƒ½å‘æŒ¥ä½œç”¨

ä½¿ç”¨è¿™äº›æ‹†åˆ†è¿ç®—ç¬¦æ¥ä¼ é€’å‚æ•°å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºè¿™æ ·æ— éœ€æ“å¿ƒå‚æ•°ä¸ªæ•°ä¹‹ç±»çš„é—®é¢˜ï¼Œå¦‚ä¸‹è¿™åœ¨è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°æ—¶ç‰¹åˆ«æœ‰ç”¨
```
def foo(x, y, z, m=0, n=0): 
	print(x, y, z, m, n) 
def call_foo(*args, **kwds): 
	print("Calling foo!") 
	foo(*args, **kwds) 
```
ç»¼åˆçš„ç®€å•æ¡ˆä¾‹
```
def story(**kwds): 
	return 'Once upon a time, there was a {job} called {name}.'.format_map(kwds)
def power(x, y, *others): 
	if others: 
		print('Received redundant parameters:', others) 
	return pow(x, y) 
def interval(start, stop=None, step=1): 
	'Imitates range() for step > 0' 
	if stop is None: # å¦‚æœæ²¡æœ‰ç»™å‚æ•°stopæŒ‡å®šå€¼ï¼Œ
		start, stop = 0, start # å°±è°ƒæ•´å‚æ•°startå’Œstopçš„å€¼
	result = [] 
	i = start # ä»startå¼€å§‹å¾€ä¸Šæ•°
	while i < stop:  # æ•°åˆ°stopä½ç½®
		result.append(i) # å°†å½“å‰æ•°çš„æ•°é™„åŠ åˆ°resultæœ«å°¾
		i += step # å¢åŠ åˆ°å½“å‰æ•°å’Œstepï¼ˆ> 0ï¼‰ä¹‹å’Œ
	return result

print(story(job='king', name='Gumby')) 
print(story(name='Sir Robin', job='brave knight')) 
params = {'job': 'language', 'name': 'Python'} 
print(story(**params)) 
del params['job'] 
print(story(job='stroke of genius', **params)) 
print(power(2, 3))
print(power(3, 2))
print(power(y=3, x=2))
params = (5,) * 2 
print(power(*params))
print(power(3, 3, 'Hello, world'))
print(interval(10))
print(interval(1, 5))
print(interval(3, 12, 4))
print(power(*interval(3, 7)))

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Once upon a time, there was a king called Gumby.
Once upon a time, there was a brave knight called Sir Robin.
Once upon a time, there was a language called Python.
Once upon a time, there was a stroke of genius called Python.
8
9
8
3125
Received redundant parameters: ('Hello, world',)
27
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
[1, 2, 3, 4]
[3, 7, 11]
Received redundant parameters: (5, 6)
81
```
å¤æ‚çš„æ¡ˆä¾‹
```
def tag(name, *content, cls=None, **attrs):
	if cls is not None:
		attrs['class'] = cls
	if attrs:
		attr_str = ''.join(' %s="%s"' % (attr, value) for attr, value in sorted(attrs.items()))
	else:
		attr_str = ''
	if content:
		return '\n'.join('<%s%s>%s</%s>' % (name, attr_str, c, name) for c in content)
	else:
		return '<%s%s />' % (name, attr_str)

print(tag('br'))	ä¼ å…¥å•ä¸ªå®šä½å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæŒ‡å®šåç§°çš„ç©ºæ ‡ç­¾ã€‚
print(tag('p', 'hello'))	ç¬¬ä¸€ä¸ªå‚æ•°åé¢çš„ä»»æ„ä¸ªå‚æ•°ä¼šè¢« *content æ•è·ï¼Œå­˜å…¥ä¸€ä¸ªå…ƒç»„
print(tag('p', 'hello', 'world'))
print(tag('p', 'hello', id=33))	tag å‡½æ•°ç­¾åä¸­æ²¡æœ‰æ˜ç¡®æŒ‡å®šåç§°çš„å…³é”®å­—å‚æ•°ä¼šè¢« **attrs æ•è·ï¼Œå­˜å…¥ä¸€ä¸ªå­—å…¸ã€‚
print(tag('p', 'hello', 'world', cls='sidebar'))	cls å‚æ•°åªèƒ½ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ å…¥
print(tag(content='testing', name="img"))	è°ƒç”¨ tag å‡½æ•°æ—¶ï¼Œå³ä¾¿ç¬¬ä¸€ä¸ªå®šä½å‚æ•°ä¹Ÿèƒ½ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ å…¥ã€‚

my_tag = {'name': 'img', 'title': 'Sunset Boulevard','src': 'sunset.jpg', 'cls': 'framed'}
print(tag(**my_tag))	åœ¨ my_tag å‰é¢åŠ ä¸Š **ï¼Œå­—å…¸ä¸­çš„æ‰€æœ‰å…ƒç´ ä½œä¸ºå•ä¸ªå‚æ•°ä¼ å…¥ï¼ŒåŒåé”®ä¼šç»‘å®šåˆ°å¯¹åº”çš„
å…·åå‚æ•°ä¸Šï¼Œä½™ä¸‹çš„åˆ™è¢« **attrs æ•è·ã€‚


[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
<br />
<p>hello</p>
<p>hello</p>
<p>world</p>
<p id="33">hello</p>
<p class="sidebar">hello</p>
<p class="sidebar">world</p>
<img content="testing" />
<img class="framed" src="sunset.jpg" title="Sunset Boulevard" />
```

## å‡½æ•°æŒ‡é’ˆ
å¯ä»¥å°†å˜é‡æŒ‡å‘å‡½æ•°ï¼Œæ­¤å˜é‡ç±»å‹æ˜¯functionï¼Œè™½éƒ½æ˜¯functionä½†ä¸åŒå‡½æ•°ç­¾åçš„åº•å±‚å¹¶ä¸åŒ
```
def add(a,b):
    return a+b

def sub(a,b):
    return a-b

def square(a):
    return a*b

def calc(opr):
    if opr=='+':
        return add
    else:
        return sub

f1 = calc('+')
f2 = calc('-')
print("10+5={0}".format(f1(10,5)))
print("10-5={0}".format(f2(10,5)))
print(type(f1))
print(type(f2))
print(type(square))

[huawei@n161 ccc]$ python3 1.py
10+5=15
10-5=5
<class 'function'>
<class 'function'>
<class 'function'>
```
## è¿‡æ»¤å‡½æ•° filter
filterï¼ˆï¼‰å‡½æ•°ç”¨äºå¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚ä¸‹é¢æ˜¯ç²—ç³™çš„æ¡ˆä¾‹ï¼Œè¿˜å¯ä»¥å‚è€ƒ[ç”¨äºè¿‡æ»¤çš„ç”Ÿæˆå™¨å‡½æ•°](#ç”¨äºè¿‡æ»¤çš„ç”Ÿæˆå™¨å‡½æ•°)
```
def f1(x):
    return x>50

data1 = [10, 30, 60, 100]
data2 = filter(f1, data1)
data3 = list(data2)
print(data3)

[huawei@n161 ccc]$ python3 1.py
[60, 100]

```
## æ˜ å°„å‡½æ•° map
mapï¼ˆï¼‰å‡½æ•°ç”¨äºå¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œæ˜ å°„ï¼ˆæˆ–å˜æ¢ï¼‰ã€‚ä¸‹é¢æ˜¯ç²—ç³™çš„æ¡ˆä¾‹ï¼Œè¿˜å¯ä»¥å‚è€ƒ[ç”¨äºæ˜ å°„çš„ç”Ÿæˆå™¨å‡½æ•°](#ç”¨äºæ˜ å°„çš„ç”Ÿæˆå™¨å‡½æ•°)
```
def f1(x):
    return x*2

data1 = [10, 30, 60, 100]
data2 = map(f1, data1)
data3 = list(data2)
print(data3)

[huawei@n161 ccc]$ python3 1.py
[20, 60, 120, 200]
```

## ä¼ é€’å‡½æ•°

å…¶å®ä¼ çš„æ˜¯ä¸ªå¯¹è±¡
```
def sum_args(*args):
	return sum(args)

def run_with_positional_args(func, *args):
	return func(*args)

print(run_with_positional_args(sum_args, 1, 2, 3, 4))	# 10
```
## å†…éƒ¨å‡½æ•°
```
def outer(a, b):
	def inner(c, d):
		return c + d
	return inner(a, b)

print(outer(4, 7))	# 11
```


## lambda
- lambda å…³é”®å­—åœ¨ Python è¡¨è¾¾å¼å†…åˆ›å»ºåŒ¿åå‡½æ•°ã€‚
- lambda å‡½æ•°çš„å®šä¹‰ä½“ä¸­ä¸èƒ½èµ‹å€¼ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ while å’Œ try ç­‰è¯­å¥ï¼Œä»…å¯ä¸€æ¡è¯­å¥ï¼Œä¸ç”¨å†™return
- lambda å¥æ³•åªæ˜¯è¯­æ³•ç³–ï¼šä¸ def è¯­å¥ä¸€æ ·ï¼Œlambda è¡¨è¾¾å¼ä¼šåˆ›å»ºå‡½æ•°å¯¹è±¡ã€‚  

è¯­æ³•ï¼šâ€œlambda å‚æ•°åˆ—è¡¨ï¼šlabmdaä½“â€ï¼Œæ— éœ€å°æ‹¬å·ä¸return

```
ç®€å•çš„é¢lambdaä½¿ç”¨æ¼”ç¤º
def calc(opr):
    if opr == '+':
        return lambda a, b: (a+b)
    else:
        return lambda a, b: (a-b)

f1 = calc('+')
f2 = calc('-')
print("10+5={0}".format(f1(10,5)))
print("10-5={0}".format(f2(10,5)))

[huawei@n161 ccc]$ python3 1.py
10+5=15
10-5=5

æ¼”ç¤º2
def edit_story(words, func):
	for word in words:
		print(func(word))

def enliven(word):
	return word.capitalize() + '!'


stairs = ['thud', 'meow', 'thud', 'hiss']
print("-----func:")
edit_story(stairs, enliven)

print("-----lambda:")
edit_story(stairs, lambda word: word.capitalize() + '!')

[huawei@n148 postdb_doc]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py"
-----func:
Thud!
Meow!
Thud!
Hiss!
-----lambda:
Thud!
Meow!
Thud!
Hiss!

```
å°†å‰é¢çš„filterä¸mapæ¢ä¸ºlambdaå½¢å¼
```
data1 = [10, 30, 60, 100]
data2 = filter(lambda x: (x > 50), data1)
data3 = list(data2)
print(data3)
data2 = map(lambda x: (x * 2), data1)
data3 = list(data2)
print(data3)

[huawei@n161 ccc]$ python3 1.py
[60, 100]
[20, 60, 120, 200]
```
## è£…é¥°å™¨
- è£…é¥°å™¨æ˜¯å¯è°ƒç”¨çš„å¯¹è±¡ï¼Œå…¶å‚æ•°æ˜¯å¦ä¸€ä¸ªå‡½æ•°ï¼ˆè¢«è£…é¥°çš„å‡½æ•°ï¼‰ã€‚
- å‡½æ•°è£…é¥°å™¨åœ¨å¯¼å…¥æ¨¡å—æ—¶ç«‹å³æ‰§è¡Œï¼Œè€Œè¢«è£…é¥°çš„å‡½æ•°åªåœ¨æ˜ç¡®è°ƒç”¨æ—¶è¿è¡Œã€‚è¿™çªå‡ºäº†æ‰€è°“çš„å¯¼å…¥æ—¶å’Œè¿è¡Œæ—¶ä¹‹é—´çš„åŒºåˆ«ã€‚
- è£…é¥°å™¨å’Œè¢«è£…é¥°çš„å‡½æ•°å¯ä»¥åœ¨2ä¸ªä¸åŒæ¨¡å—é‡Œ
- è£…é¥°å™¨å†…è¿”å›çš„ç»“æœå¯ä»¥æ˜¯å€¼ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°å¯¹è±¡ï¼ˆä¸æ˜¯ä¼ å…¥çš„å‡½æ•°ï¼Œè€Œæ˜¯ä¼šå®šä¹‰ä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œç„¶åå°†å…¶è¿”å›ï¼Œæ›¿æ¢è¢«è£…é¥°çš„å‡½æ•°ï¼‰
- Python å†…ç½®äº†ä¸‰ä¸ªç”¨äºè£…é¥°æ–¹æ³•çš„å‡½æ•°ï¼špropertyã€classmethod å’Œ staticmethodã€‚

ç®€å•çš„æ¼”ç¤ºæ¡ˆä¾‹
```
registry = []
def register(func):	# register çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°
	print('running register(%s)' % func)
	registry.append(func)
	return func	# è¿”å› funcï¼šå¿…é¡»è¿”å›å‡½æ•°ï¼›è¿™é‡Œè¿”å›çš„å‡½æ•°ä¸é€šè¿‡å‚æ•°ä¼ å…¥çš„ä¸€æ ·ã€‚

@register		# f1 å’Œ f2 è¢« @register è£…é¥°
def f1():
	print('running f1()')
@register
def f2():
	print('running f2()')
def f3():		# f3 æ²¡æœ‰è£…é¥°
	print('running f3()')
def main():
	print('running main()')
	print('registry ->', registry)	# æ‰“å°åˆ—è¡¨ï¼Œæ‰§è¡Œf1f2f3
	f1()
	f2()
	f3()
if __name__=='__main__':
	main()

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
running register(<function f1 at 0x7fe2d585b1e0>)	# register åœ¨æ¨¡å—ä¸­å…¶ä»–å‡½æ•°ä¹‹å‰è¿è¡Œäº†ä¸¤æ¬¡
running register(<function f2 at 0x7fe2d585b268>)	# å¦‚æœä»…ä»…æ˜¯å¯¼å…¥æ­¤pyåˆ™åªä¼šæ‰“å°å‡ºè¿™ä¸¤å¥ï¼Œå› ä¸ä¼šæ‰§è¡Œmainå‡½æ•°
running main()
registry -> [<function f1 at 0x7fe2d585b1e0>, <function f2 at 0x7fe2d585b268>]
running f1()
running f2()
running f3()
```
## å‚æ•°åŒ–çš„è£…é¥°å™¨

## é—­åŒ…

é—­åŒ…æ˜¯ä¸€ä¸ªå¯ä»¥ç”±å¦ä¸€ä¸ªå‡½æ•°åŠ¨æ€ç”Ÿæˆçš„å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å˜å’Œå­˜å‚¨å‡½æ•°å¤–åˆ›å»ºçš„å˜é‡çš„å€¼ï¼Œå…¶å®å†…éƒ¨å‡½æ•°å¯ä»¥çœ‹ä½œä¸ºé—­åŒ…ï¼Œåªä¸è¿‡æ²¡æœ‰ä½“ç°å‡ºç²¾é«“è€Œå·²ã€‚
- é—­åŒ…æŒ‡å»¶ä¼¸äº†ä½œç”¨åŸŸçš„å‡½æ•°ï¼Œå…¶ä¸­åŒ…å«å‡½æ•°å®šä¹‰ä½“ä¸­å¼•ç”¨çš„ä½†åˆæ²¡åœ¨å®šä¹‰ä½“ä¸­å®šä¹‰çš„éå…¨å±€å˜é‡
- å‡½æ•°æ˜¯ä¸æ˜¯åŒ¿åçš„æ²¡æœ‰å…³ç³»ï¼Œå…³é”®æ˜¯å®ƒèƒ½è®¿é—®å®šä¹‰ä½“ä¹‹å¤–å®šä¹‰çš„éå…¨å±€å˜é‡

é€šè¿‡ä¸‹æ¡ˆä¾‹ä»‹ç»é—­åŒ…ç‰¹ç‚¹ï¼š
- inner2() ç›´æ¥ä½¿ç”¨å¤–éƒ¨çš„ saying å‚æ•°ï¼Œè€Œä¸æ˜¯é€šè¿‡å¦å¤–ä¸€ä¸ªå‚æ•°è·å–ã€‚ï¼ˆä¸ä¸Šé¢å†…éƒ¨å‡½æ•°çš„æ¡ˆä¾‹ä¸­çš„å‚æ•°ä¼ é€’æ–¹å¼å¯¹æ¯”æŸ¥çœ‹å³å¯ï¼‰
- knights2() è¿”å›å€¼ä¸º inner2 å‡½æ•°ï¼Œè€Œä¸æ˜¯è°ƒç”¨å®ƒã€‚ï¼ˆå¯¹æ¯”åŒä¸Šï¼‰
- inner2() å‡½æ•°å¯ä»¥å¾—åˆ° saying å‚æ•°çš„å€¼å¹¶ä¸”è®°å½•ä¸‹æ¥ã€‚
- return inner2 å‡†ç¡®çš„è¯´æ˜¯è¿”å›1ä¸ªæ²¡æœ‰è¢«è°ƒç”¨è¿‡çš„å‡½æ•°å¯¹è±¡ï¼ˆæ˜¯ä¸€ä¸ªé—­åŒ…ï¼šä¸€ä¸ªè¢«åŠ¨æ€åˆ›å»ºçš„å¯ä»¥è®°å½•å¤–éƒ¨å˜é‡çš„å‡½æ•°ï¼‰ã€‚


```
def knights2(saying):
	def inner2():
		return "We are the knights who say: '%s'" % saying
	return inner2

a = knights2('Duck')
print(type(a))	# açš„typeæ˜¯å‡½æ•°
print(a)	# è¿™æ ·æ‰“å°å‡ºæ¥çš„å†…å®¹è²Œä¼¼æ˜¯açš„åœ°å€
print(a())	# è°ƒç”¨å‡½æ•°å¯¹è±¡


b = knights2('Hasenpfeffer')
print(type(b))
print(b)
print(b())


[huawei@n148 postdb_doc]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pltest/pyth.py"
<type 'function'>
<function inner2 at 0x7f814caec7d0>
We are the knights who say: 'Duck'
<type 'function'>
<function inner2 at 0x7f814caec848>
We are the knights who say: 'Hasenpfeffer'
```
## nonlocal
å¦‚æœä¸º nonlocal å£°æ˜çš„å˜é‡èµ‹äºˆæ–°å€¼ï¼Œé—­åŒ…ä¸­ä¿å­˜çš„ç»‘å®šä¼šæ›´æ–°ã€‚  
```
ä¸‹ä¾‹ä¸­countã€totalå¯ä»¥åœ¨é—­åŒ…é‡Œæ›´æ–°

def make_averager():
	count = 0
	total = 0
	def averager(new_value):
		nonlocal count, total
		count += 1
		total += new_value
		return total / count
	return averager

avg = make_averager()
print(avg(10))
print(avg(20))
print(avg(30))

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
10.0
15.0
20.0
```

# æ¨¡å—
- ç±»æ”¯æŒç»§æ‰¿ï¼Œä½†æ¨¡å—ä¸æ”¯æŒã€‚Python æ¨¡å—æ˜¯å•ä¾‹
## å®šä¹‰
- æ™®é€šå‡½æ•°æ¨¡å—ï¼Œå¦è§ç±»æ¨¡å—
```
[huawei@n148 pythontest]$ cat pizza.py 
#!/usr/bin/python3
def make_pizza(size, *toppings):
        print(f"\nMaking a {size}-inch pizza with the following toppings:")
        for topping in toppings:
                print(f"- {topping}")
```
## æ¨¡å—æœç´¢è·¯å¾„

- æ¨¡å—sysçš„å˜é‡pathæ‰€åŒ…å«çš„è·¯å¾„åˆ—è¡¨å³æ¨¡å—çš„æœç´¢è·¯å¾„
- æ¨¡å—ä½äºç±»ä¼¼äºsite-packagesè¿™æ ·çš„åœ°æ–¹ï¼Œæ‰€æœ‰çš„ç¨‹åºå°±éƒ½èƒ½å¤Ÿå¯¼å…¥å®ƒ

```
#!/usr/bin/python3
import sys, pprint 
pprint.pprint(sys.path) 

[huawei@n148 pytest]$ python3 pyth.py 
['/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pytest',
 '/usr/local/lib/python3.6/site-packages/setuptools-19.6-py3.6.egg',
 '/usr/lib64/python36.zip',
 '/usr/lib64/python3.6',
 '/usr/lib64/python3.6/lib-dynload',
 '/usr/local/lib64/python3.6/site-packages',
 '/usr/local/lib/python3.6/site-packages',
 '/usr/lib64/python3.6/site-packages',
 '/usr/lib/python3.6/site-packages']
```
## å¯¼å…¥ç±»
ç±»æ¨¡å—çš„å®šä¹‰åœ¨ä¸Šé¢
```
#!/usr/bin/python3
from car import Car
my_new_car = Car('audi', 'a4', 2019)
print(my_new_car.get_descriptive_name())
my_new_car.odometer_reading = 23
my_new_car.read_odometer()

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2019 Audi A4
This car has 23 miles on it.
```

## å¯¼å…¥æ•´ä¸ªæ¨¡å—
ä½¿ç”¨importå¯¼å…¥æ–‡ä»¶ä¸»å¹²åï¼Œè°ƒç”¨éœ€è¦ä½œç”¨åŸŸ
```
[huawei@n148 pythontest]$ cat making_pizzas.py 
#!/usr/bin/python3
import pizza
pizza.make_pizza(16, 'pepperoni')
pizza.make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')
[huawei@n148 pythontest]$ python3 making_pizzas.py 

Making a 16-inch pizza with the following toppings:
- pepperoni

Making a 12-inch pizza with the following toppings:
- mushrooms
- green peppers
- extra cheese
```
## å¯¼å…¥æŒ‡å®šå‡½æ•°
è°ƒç”¨å¯ä»¥ç›´æ¥å‡½æ•°åï¼Œä¸éœ€è¦å¸¦ä½œç”¨åŸŸäº†ï¼Œå…¶å®è¿˜å¯ä»¥å…¨éƒ¨éƒ½å¯¼å…¥ï¼Œå¦‚ from pizza import *
```
[huawei@n148 pythontest]$ cat making_pizzas.py 
#!/usr/bin/python3
from pizza import make_pizza
make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')
make_pizza(16, 'pepperoni')
[huawei@n148 pythontest]$ python3 making_pizzas.py 

Making a 12-inch pizza with the following toppings:
- mushrooms
- green peppers
- extra cheese

Making a 16-inch pizza with the following toppings:
- pepperoni
```
## ç»™æ¨¡å—æˆ–å‡½æ•°æŒ‡å®šåˆ«å
ç”¨äºé˜²æ­¢åç§°é‡å¤å†²çª
```
#!/usr/bin/python3
from pizza import make_pizza as mp
mp(12, 'mushrooms', 'green peppers', 'extra cheese')
mp(16, 'pepperoni')
```
```
#!/usr/bin/python3
import pizza as p
p.make_pizza(16, 'pepperoni')
p.make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')
```
## ç±»æ¨¡å—

### å®šä¹‰æ¨¡å—æ–‡ä»¶
è¿™é‡Œå°†å¤šä¸ªç±»å®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œäº†ï¼Œå…¶å®ä¹Ÿå¯ä»¥åˆ†æ•£å¼€ï¼ˆè§æ¨¡å—å¯¼å…¥æ¨¡å—ï¼‰
```
æ–‡ä»¶å car.py

#!/usr/bin/python3
class Car:
	def __init__(self, make, model, year):
		self.make = make
		self.model = model
		self.year = year
		self.odometer_reading = 0

	def get_descriptive_name(self):
		long_name = f"{self.year} {self.make} {self.model}"
		return long_name.title()
	def read_odometer(self):
		print(f"This car has {self.odometer_reading} miles on it.")
	def update_odometer(self, mileage):
		if mileage >= self.odometer_reading:
			self.odometer_reading = mileage
		else:
			print("You can't roll back an odometer!")
	def increment_odometer(self, miles):
		self.odometer_reading += miles


class Battery:
	def __init__(self, battery_size=75):
		self.battery_size = battery_size
	def describe_battery(self):
		print(f"This car has a {self.battery_size}-kWh battery.")
	def get_range(self):
		if self.battery_size == 75:
			range = 260
		elif self.battery_size == 100:
			range = 315
		print(f"This car can go about {range} miles on a full charge.")


class ElectricCar(Car):
	def __init__(self, make, model, year):
		super().__init__(make, model, year)
		self.battery = Battery()
	def describe_battery(self):
		print(f"This car has a {self.battery_size}-kWh battery.")
```
### ä½¿ç”¨ç±»æ¨¡å—
- è¿™é‡Œåˆ†åˆ«å¯¼å…¥äº†åŸºç±»ä¸å­ç±»
```
#!/usr/bin/python3
from car import Car
my_new_car = Car('audi', 'a4', 2019)
print(my_new_car.get_descriptive_name())
my_new_car.odometer_reading = 23
my_new_car.read_odometer()

from car import ElectricCar
my_tesla = ElectricCar('tesla', 'model s', 2019)
print(my_tesla.get_descriptive_name())
my_tesla.battery.describe_battery()
my_tesla.battery.get_range()


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2019 Audi A4
This car has 23 miles on it.
2019 Tesla Model S
This car has a 75-kWh battery.
This car can go about 260 miles on a full charge.

```
- å…¶å®ä¹Ÿå¯ä»¥ä»ä¸€æ¬¡ä»æ¨¡å—ä¸­å¯¼å…¥å¤šä¸ªç±»
```
#!/usr/bin/python3
from car import Car, ElectricCar
my_beetle = Car('volkswagen', 'beetle', 2019)
print(my_beetle.get_descriptive_name())
my_tesla = ElectricCar('tesla', 'roadster', 2019)
print(my_tesla.get_descriptive_name())

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2019 Volkswagen Beetle
2019 Tesla Roadster
```
- è¿˜å¯ä»¥å¯¼å…¥æ•´ä¸ªæ¨¡å—
```
#!/usr/bin/python3

import car
my_beetle = car.Car('volkswagen', 'beetle', 2019)
print(my_beetle.get_descriptive_name())
my_tesla = car.ElectricCar('tesla', 'roadster', 2019)
print(my_tesla.get_descriptive_name())
```

## æ¨¡å—å¯¼å…¥æ¨¡å—
å³å°†ä¸åŒç±»åˆ†æ•£åˆ°ä¸åŒæ–‡ä»¶ä¸­
- åŸºç±»æ¨¡å—
```
[huawei@n148 pythontest]$ cat car.py 
#!/usr/bin/python3

class Car:
        def __init__(self, make, model, year):
                self.make = make
                self.model = model
                self.year = year
                self.odometer_reading = 0

        def get_descriptive_name(self):
                long_name = f"{self.year} {self.make} {self.model}"
                return long_name.title()
        def read_odometer(self):
                print(f"This car has {self.odometer_reading} miles on it.")
        def update_odometer(self, mileage):
                if mileage >= self.odometer_reading:
                        self.odometer_reading = mileage
                else:
                        print("You can't roll back an odometer!")
        def increment_odometer(self, miles):
                self.odometer_reading += miles
```
- å­ç±»æ¨¡å—ï¼Œæ­¤æ¨¡å—éœ€å¯¼å…¥åŸºç±»æ¨¡å—
```
[huawei@n148 pythontest]$ cat electric_car.py 
#!/usr/bin/python3
from car import Car

class Battery:
        def __init__(self, battery_size=75):
                self.battery_size = battery_size
        def describe_battery(self):
                print(f"This car has a {self.battery_size}-kWh battery.")
        def get_range(self):
                if self.battery_size == 75:
                        range = 260
                elif self.battery_size == 100:
                        range = 315
                print(f"This car can go about {range} miles on a full charge.")


class ElectricCar(Car):
        def __init__(self, make, model, year):
                super().__init__(make, model, year)
                self.battery = Battery()
        def describe_battery(self):
                print(f"This car has a {self.battery_size}-kWh battery.")
```
- ä½¿ç”¨çš„ä»£ç ï¼Œå¯¼å…¥å¤šä¸ªæ¨¡å—å³å¯
```
#!/usr/bin/python3

from car import Car
from electric_car import ElectricCar
my_beetle = Car('volkswagen', 'beetle', 2019)
print(my_beetle.get_descriptive_name())
my_tesla = ElectricCar('tesla', 'roadster', 2019)
print(my_tesla.get_descriptive_name())

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2019 Volkswagen Beetle
2019 Tesla Roadster
```
## æ¨¡å—çš„æµ‹è¯•æ–¹æ³•
```
æ¨¡å—æ–‡ä»¶æä¾›äº†ä¸€ä¸ªæ–¹æ³•ä¸æµ‹è¯•å‡½æ•°ï¼Œæ ¹æ®__name__å˜é‡çš„å€¼æ¥è¿›è¡Œåˆ¤æ–­æ˜¯å¦è¿è¡Œtestæ–¹æ³•
[huawei@n148 pytest]$ cat hello.py 
#!/usr/bin/python3
def hello(): 
        print("Hello, world!") 
def test(): 
        hello() 

print(__name__)
if __name__ == '__main__': test() 

ä¸‹é¢æ˜¯mainä»£ç 
[huawei@n148 pytest]$ cat pyth.py 
#!/usr/bin/python3
import hello;
hello.hello()

æ‰§è¡Œæ¨¡å—è‡ªèº«åˆ™ä¼šè°ƒç”¨test
[huawei@n148 pytest]$ python3 hello.py
__main__
Hello, world!

æ‰§è¡Œmainä»£ç åˆ™ä¸è§¦å‘test
[huawei@n148 pytest]$ python3 pyth.py 
hello
```
## åŒ…
- åŒ…æ˜¯ä¸€ä¸ªç›®å½•ï¼Œç›®å½•å†…å¿…é¡»åŒ…å«æ–‡ä»¶__init__.py
- å¦‚æœåƒæ™®é€šæ¨¡å—ä¸€æ ·å¯¼å…¥åŒ…ï¼Œæ–‡ä»¶__init__.pyçš„å†…å®¹å°±å°†æ˜¯åŒ…çš„å†…å®¹
- è¦å°†æ¨¡å—åŠ å…¥åŒ…ä¸­ï¼Œåªéœ€å°†æ¨¡å—æ–‡ä»¶æ”¾åœ¨åŒ…ç›®å½•ä¸­å³å¯
- åŒ…ä¸­å¯ä»¥åµŒå¥—å…¶ä»–åŒ…ï¼Œå³ç›®å½•å¯ä»¥å¤šå±‚ï¼Œå¦‚ä¸‹
	- ~/python/ PYTHONPATHä¸­çš„ç›®å½•
	- ~/python/drawing/ åŒ…ç›®å½•ï¼ˆåŒ…drawingï¼‰
	- ~/python/drawing/__init__.py åŒ…ä»£ç ï¼ˆæ¨¡å—drawingï¼‰
	- ~/python/drawing/colors.py æ¨¡å—colors
	- ~/python/drawing/shapes.py æ¨¡å—shapes
- è²Œä¼¼ä¹Ÿå¯ä»¥å«init.pyã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥æ˜¯ç©ºçš„ï¼Œä½†æ˜¯ Python éœ€è¦å®ƒï¼Œä»¥ä¾¿æŠŠè¯¥ç›®å½•ä½œä¸ºä¸€ä¸ªåŒ…ã€‚
```
	å®Œæˆè¿™äº›å‡†å¤‡å·¥ä½œåï¼Œä¸‹é¢çš„è¯­å¥éƒ½æ˜¯åˆæ³•çš„ï¼š
	import drawing # (1) å¯¼å…¥drawingåŒ…
	import drawing.colors # (2) å¯¼å…¥drawingåŒ…ä¸­çš„æ¨¡å—colors 
	from drawing import shapes # (3) å¯¼å…¥æ¨¡å—shapes
```

# unittest

## æµ‹è¯•å‡½æ•°
```
å®šä¹‰ä¸€ä¸ªæ–¹æ³•
[huawei@n148 pytest]$ cat name_function.py 
#!/usr/bin/python3
def get_formatted_name(first, last, middle=''):
	if middle:
		full_name = f"{first} {middle} {last}"
	else:
		full_name = f"{first} {last}"
	return full_name.title()



ä¸‹é¢æ˜¯æµ‹è¯•ä»£ç 
[huawei@n148 pytest]$ cat test_name_function.py 
import unittest
from name_function import get_formatted_name

class NamesTestCase(unittest.TestCase):
	def test_first_last_name(self):
		formatted_name = get_formatted_name('janis', 'joplin')
		self.assertEqual(formatted_name, 'Janis Joplin')
	def test_first_last_middle_name(self):
		formatted_name = get_formatted_name('wolfgang', 'mozart', 'amadeus')
		self.assertEqual(formatted_name, 'Wolfgang Amadeus Mozart')

if __name__ == '__main__':
	unittest.main()


è¿è¡Œç»“æœ
[huawei@n148 pytest]$ python3 test_name_function.py 
.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK
```
## unittestçš„setUpå’ŒtearDown

æ–¹æ³•setUpå’ŒtearDownï¼Œå®ƒä»¬å°†åˆ†åˆ«åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹å‰å’Œä¹‹åæ‰§è¡Œã€‚å¯ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥æ‰§è¡Œé€‚ç”¨äºæ‰€æœ‰æµ‹è¯•çš„åˆå§‹åŒ–ä»£ç å’Œæ¸…ç†ä»£ç 

## æµ‹è¯•ç±»


```
[huawei@n148 pytest]$ cat survey.py 
#!/usr/bin/python3
class AnonymousSurvey:
        def __init__(self, question):
                self.question = question
                self.responses = []
        def show_question(self):
                print(self.question)
        def store_response(self, new_response):
                self.responses.append(new_response)
        def show_results(self):
                print("Survey results:")
                for response in self.responses:
                        print(f"- {response}")


[huawei@n148 pytest]$ cat test_survey.py 
import unittest
from survey import AnonymousSurvey
class TestAnonymousSurvey(unittest.TestCase):
        def setUp(self):
                question = "What language did you first learn to speak?"
                self.my_survey = AnonymousSurvey(question)
                self.responses = ['English', 'Spanish', 'Mandarin']
        def test_store_single_response(self):
                self.my_survey.store_response(self.responses[0])
                self.assertIn(self.responses[0], self.my_survey.responses)
        def test_store_three_responses(self):
                for response in self.responses:
                        self.my_survey.store_response(response)
                for response in self.responses:
                        self.assertIn(response, self.my_survey.responses)

if __name__ == '__main__':
        unittest.main()


[huawei@n148 pytest]$ python3 test_survey.py 
..
----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK
```
## æµ‹è¯•çš„è¾“å‡º
è¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ¯å®Œæˆä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼ŒPythonéƒ½æ‰“å°ä¸€ä¸ªå­—ç¬¦
- æµ‹è¯•é€šè¿‡æ—¶æ‰“å°ä¸€ä¸ªå¥ç‚¹
- æµ‹è¯•å¼•å‘é”™è¯¯æ—¶æ‰“å°ä¸€ä¸ªE
- æµ‹è¯•å¯¼è‡´æ–­è¨€å¤±è´¥æ—¶åˆ™æ‰“å°ä¸€ä¸ªF
# æ–‡ä»¶è¯»å†™

## openæ¨¡å¼

open()çš„æ¨¡å¼å¦‚ä¸‹ï¼Œå¦‚æœçœç•¥ï¼ŒPythonå°†ä»¥é»˜è®¤çš„åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚
- è¯»å–æ¨¡å¼ ï¼ˆ'r' ï¼‰
- å†™å…¥æ¨¡å¼ ï¼ˆ'w' ï¼‰
- é™„åŠ æ¨¡å¼ ï¼ˆ'a' ï¼‰
- è¯»å†™æ¨¡å¼ ï¼ˆ'r+' ï¼‰
- 'b' äºŒè¿›åˆ¶æ¨¡å¼ï¼ˆä¸å…¶ä»–æ¨¡å¼ç»“åˆä½¿ç”¨ï¼‰
- 't' æ–‡æœ¬æ¨¡å¼ï¼ˆé»˜è®¤å€¼ï¼Œä¸å…¶ä»–æ¨¡å¼ç»“åˆä½¿ç”¨ï¼‰

## ä½¿ç”¨withè‡ªåŠ¨å…³é—­æ–‡ä»¶
Python çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆcontext managerï¼‰ä¼šæ¸…ç†ä¸€äº›èµ„æºï¼Œä¾‹å¦‚æ‰“å¼€çš„æ–‡ä»¶ã€‚ä½¿ç”¨æ–¹å¼è§ä¸‹é¢çš„æ¡ˆä¾‹
## ä¸€æ¬¡è¯»å…¥æ‰€æœ‰
```
#!/usr/bin/python3
with open('pi_digits.txt') as file_object:
	contents = file_object.read()
print(contents.rstrip())
```
## è¯»å–æ‰€æœ‰è¡Œ
```
#!/usr/bin/python3
with open('pi_digits.txt') as file_object:
    lines = file_object.readlines()
for line in lines:
	print(line.rstrip())
```
## è¯»å–æŒ‡å®šå­—èŠ‚
```
with open('pi_digits.txt') as file_object:
	contents = file_object.read(5)
print(contents.rstrip())

[huawei@n148 pytest]$ cat alice.txt | python3 pyth.py
3.141
```
## æ¯æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦æˆ–å­—èŠ‚
è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶å³ä¸ºå­—èŠ‚~
```
with open(filename) as f: 
	while True: 
		char = f.read(1) 
		if not char: break 
		print(char) 
```
ä¹Ÿå¯ä»¥ä¸€æ¬¡è¯»å–ï¼Œéå†å­—ç¬¦
```
with open(filename) as f: 
	for char in f.read(): 
 		process(char) 
```
## æ¯æ¬¡è¯»ä¸€è¡Œ
```
filename = 'username.json';
with open(filename) as f: 
	while True: 
		line = f.readline() 
		if not line: break 
		print(line) 
```
ä¹Ÿå¯ä»¥ä¸€æ¬¡è¯»å–åˆ°å­—ç¬¦ä¸²æ•°ç»„ï¼Œç„¶åè¿­ä»£æ­¤æ•°ç»„
```
with open(filename) as f: 
 	for line in f.readlines(): 
		process(line) 
```

## è¿æ¥æ–‡ä»¶æ‰€æœ‰è¡Œ
ä½¿ç”¨stripå»é™¤æ¯è¡Œçš„ä¸¤ç«¯ç©ºç™½ï¼Œç„¶åç›¸è¿ï¼ŒåŠæ³•æ„Ÿè§‰å¾ˆç¹ç
```
with open('pi_digits.txt') as file_object:
    lines = file_object.readlines()
pi_string = ''
for line in lines:
	pi_string += line.strip()
print(pi_string)
```
## å†™å…¥ä¸è¿½åŠ 
- å‡½æ•° write() è¿”å›å†™å…¥æ–‡ä»¶çš„å­—èŠ‚æ•°
- å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨print()ï¼Œè§pythonè¯­è¨€åŠå…¶åº”ç”¨8.1.1
```
#!/usr/bin/python3
filename = 'programming.txt'
with open(filename, 'w') as file_object:
	file_object.write("I love programming.\n")
	file_object.write("I love creating new games.\n")


with open(filename, 'a') as file_object:
	file_object.write("I also love finding meaning in large datasets.\n")
	file_object.write("I love creating apps that can run in a browser.\n")

[huawei@n148 pythontest]$ cat programming.txt 
I love programming.
I love creating new games.
I also love finding meaning in large datasets.
I love creating apps that can run in a browser.
```
## è¯»å–åæ”¹å†å†™å›
```
#!/usr/bin/python3
fname = 'username.json';
f = open(fname) 
lines = f.readlines()
f.close() 
lines[0] = "new test" 
f = open(fname, 'w') 
f.writelines(lines) 
f.close() 
```

## å†™äºŒè¿›åˆ¶æ–‡ä»¶
å¦‚æœæ–‡ä»¶æ¨¡å¼å­—ç¬¦ä¸²ä¸­åŒ…å« 'b'ï¼Œé‚£ä¹ˆæ–‡ä»¶ä¼šä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¯»å†™çš„æ˜¯å­—èŠ‚è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚


```
ä¸€æ¬¡æ€§å†™å…¥

bdata = bytes(range(0, 256))
fout = open('bfile', 'wb')
fout.write(bdata)
fout.close()
```

```
åˆ†å—å†™å…¥

fout = open('bfile2', 'wb')
size = len(bdata)
offset = 0
chunk = 100
while True:
	if offset > size:
		break
	fout.write(bdata[offset:offset+chunk])
	offset += chunk
fout.close()

```

## è¯»äºŒè¿›åˆ¶æ–‡ä»¶
```
fin = open('bfile', 'rb')
bdata = fin.read()
print(len(bdata))
fin.close()
```
## seekã€tell
å¾…å®Œå–„
## json
å†™json
```
#!/usr/bin/python3
import json
numbers = [2, 3, 5, 7, 11, 13]
filename = 'numbers.json'
with open(filename, 'w') as f:
	json.dump(numbers, f)
```
è¯»json
```
#!/usr/bin/python3
import json
filename = 'numbers.json'
numbers = []
with open(filename) as f:
	numbers = json.load(f)
print(numbers)
```
è¯»å†™æ¡ˆä¾‹  
æ²¡æœ‰è®°å½•åˆ™å†™æ–‡ä»¶ï¼Œæœ‰è®°å½•åˆ™è¯»æ–‡ä»¶å¹¶å±•ç¤º
```
#!/usr/bin/python3

import json
def get_stored_username():
	filename = 'username.json'
	try:
		with open(filename) as f:
			username = json.load(f)
	except FileNotFoundError:
		return None
	else:
		return username

def get_new_username():
	username = input("What is your name? ")
	filename = 'username.json'
	with open(filename, 'w') as f:
		json.dump(username, f)
	return username

def greet_user():
	username = get_stored_username()
	if username:
		print(f"Welcome back, {username}!")
	else:
		username = get_new_username()
		print(f"We'll remember you when you come back, {username}!")

greet_user()
```
## cvs

# æ–‡ä»¶ä¸ç›®å½•
## æ–‡ä»¶æ“ä½œ
- exists
- isfile
- isdir
- isabs
- rename
- copy
- link
- symlink
- islink
- realpath
- chmod
- chown
- abspath
- remove
```
import os
os.path.exists('bfile')	# æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œæ”¯æŒç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„å
os.path.isfile('bfile')	# æ˜¯å¦ä¸ºæ–‡ä»¶
os.path.isdir('bfile')	# åˆ¤æ–­æ–‡ä»¶å¤¹
os.path.isabs('bfile')	# åˆ¤æ–­ç»å¯¹è·¯å¾„
os.rename('bfile', 'ohwell.txt')	# æŠŠæ–‡ä»¶é‡å‘½åä¸ºohno.txt

import shutil
shutil.copy('ohwell.txt', 'ohno.txt')	# æŠŠæ–‡ä»¶å¤åˆ¶åˆ°ohno.txt

os.link('ohno.txt', 'yikes.txt')	# æŠŠå·²æœ‰æ–‡ä»¶ç¡¬é“¾æ¥åˆ°ä¸€ä¸ªæ–°æ–‡ä»¶yikes.txt
os.symlink('ohno.txt', 'jeepers.txt')	# symlink()åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥
os.path.islink('jeepers.txt')	# islink() å‡½æ•°ä¼šæ£€æŸ¥å‚æ•°æ˜¯æ–‡ä»¶è¿˜æ˜¯ç¬¦å·é“¾æ¥
os.path.realpath('jeepers.txt')	# è·å–ç¬¦å·æ–‡ä»¶æŒ‡å‘çš„æ–‡ä»¶è·¯å¾„å


print(os.path.abspath('pyth.py'))	# ç›¸å¯¹è½¬ç»å¯¹è·¯å¾„
os.remove('oops.txt')	# åˆ é™¤

```
## ç›®å½•æ“ä½œ
```
os.mkdir('poems')
os.chdir('poems')	
os.listdir('.')	# è·å–ç›®å½•åˆ—è¡¨
os.rmdir('poems')
```
## grob
```
import glob
print(glob.glob('m*'))
```
# æ—¥æœŸä¸æ—¶é—´
## å½“å‰æ—¥æœŸ
```
import datetime
halloween = datetime.date(2014, 10, 31)
print(halloween)
halloween = datetime.date(2014,10,31)
print(halloween.day)
print(halloween.month)
print(halloween.year)
print(halloween.isoformat())
now = datetime.datetime.today()
print(now)
print(now.strftime("%Y:%m:%d %H:%M:%S"))

strdate = "2022:10:08 17:15:39";
data = datetime.datetime.strptime(strdate, "%Y:%m:%d %H:%M:%S");
print(data)

[huawei@n161 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/ccc/1.py"
2014-10-31
31
10
2014
2014-10-31
2022-10-08 17:17:43.038717
2022:10:08 17:17:43
2022-10-08 17:15:39
```
## æ—¥æœŸåŠ å‡
- date çš„èŒƒå›´ æ˜¯ date.minï¼ˆ å¹´ = 1ï¼Œ æœˆ = 1ï¼Œ æ—¥ = 1ï¼‰ åˆ°date.maxï¼ˆ å¹´ = 9999ï¼Œ æœˆ = 12ï¼Œ æ—¥ = 31ï¼‰ã€‚ä¸èƒ½ä½¿ç”¨å®ƒæ¥è¿›è¡Œå’Œå†å²æˆ–è€…å¤©æ–‡ç›¸å…³çš„è®¡ç®—ã€‚


```
from datetime import date
from datetime import timedelta
one_day = timedelta(days=1)
now = date.today()
tomorrow = now + one_day
print(tomorrow)
print(now + 17*one_day)
yesterday = now - one_day
print(yesterday)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
2022-09-09
2022-09-25
2022-09-07
```
## æ—¶é—´
```
import time
now = time.time()
print(now)
print(time.ctime(now))
print(time.localtime(now))
print(time.gmtime(now))

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
1662626412.5671046
Thu Sep  8 16:40:12 2022
time.struct_time(tm_year=2022, tm_mon=9, tm_mday=8, tm_hour=16, tm_min=40, tm_sec=12, tm_wday=3, tm_yday=251, tm_isdst=0)
time.struct_time(tm_year=2022, tm_mon=9, tm_mday=8, tm_hour=8, tm_min=40, tm_sec=12, tm_wday=3, tm_yday=251, tm_isdst=0)
```
# ç®¡é“
## ç®€å•ä½¿ç”¨
ä¾ç„¶æ˜¯ä½¿ç”¨ç®¡é“ç¬¦å·è¿›è¡Œæ“ä½œï¼Œpythonä»stdinä¸­è¿›è¡Œè¯»å–
```
import sys 
text = sys.stdin.read() 
words = text.split() 
wordcount = len(words) 
print('Wordcount:', wordcount) 

[huawei@n148 pytest]$ cat alice.txt | python3 pyth.py
Wordcount: 29465
```
ä¹Ÿå¯ä»¥è¿­ä»£stdin
```
import sys 
for line in sys.stdin: 
	process(line) 
```


# æ­£åˆ™ re
å»ºè®®å­—ç¬¦ä¸²éƒ½ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²å³r""  

## åŒ¹é… match
ä½¿ç”¨matchï¼ˆpattern ,string ,flags ï¼‰å‡½æ•°è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…ï¼Œre.match()æ–¹æ³•è¦æ±‚å¿…é¡»ä»å­—ç¬¦ä¸²çš„å¼€å¤´è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœå­—ç¬¦ä¸²çš„å¼€å¤´ä¸åŒ¹é…ï¼Œæ•´ä¸ªåŒ¹é…å°±å¤±è´¥äº†

- pattern : æ˜¯åŒ¹é…çš„è§„åˆ™å†…å®¹
- string : è¦åŒ¹é…çš„å­—ç¬¦ä¸²
- flag : å¯é€‰ï¼Œè¡¨ç¤ºåŒ¹é…æ¨¡å¼ï¼Œæ¯”å¦‚å¿½ç•¥å¤§å°å†™ï¼Œå¤šè¡Œæ¨¡å¼ç­‰ï¼Œå…·ä½“å‚æ•°ä¸ºï¼š
	- re.I å¿½ç•¥å¤§å°å†™
	- re.L è¡¨ç¤ºç‰¹æ®Šå­—ç¬¦é›† \w, \W, \b, \B, \s, \S ä¾èµ–äºå½“å‰ç¯å¢ƒ
	- re.M å¤šè¡Œæ¨¡å¼
	- re.S å³ä¸º . å¹¶ä¸”åŒ…æ‹¬æ¢è¡Œç¬¦åœ¨å†…çš„ä»»æ„å­—ç¬¦ï¼ˆ. ä¸åŒ…æ‹¬æ¢è¡Œç¬¦ï¼‰
	- re.U è¡¨ç¤ºç‰¹æ®Šå­—ç¬¦é›† \w, \W, \b, \B, \d, \D, \s, \S ä¾èµ–äº Unicode å­—ç¬¦å±æ€§æ•°æ®åº“
	- re.X ä¸ºäº†å¢åŠ å¯è¯»æ€§ï¼Œå¿½ç•¥ç©ºæ ¼å’Œ # åé¢çš„æ³¨é‡Š
- å¦‚æœåŒ¹é…æˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªMatchå¯¹è±¡ï¼ˆåŒ¹é…å¯¹è±¡ï¼‰ï¼Œå¦åˆ™è¿”å›Noneã€‚

```
import re
str_content = "Python is a good language"  # è¦åŒ¹é…çš„å†…å®¹, å¯¹åº”match é‡Œé¢çš„string
str_pattern = "Python"  # pattern åŒ¹é…çš„è§„åˆ™
re_content = re.match("Python", str_content)
print(re_content)

re_content = re.match("Python", str_content).span()
print(re_content)

re_content = re.match("PYTHON", str_content, re.I)
if re_content:
    print(re_content.group())
else:
    print("æ²¡æœ‰åŒ¹é…åˆ°å†…å®¹")

[huawei@n161 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/ccc/1.py"
<_sre.SRE_Match object; span=(0, 6), match='Python'>
(0, 6)
Python
```
## æŸ¥æ‰¾ search
ä½¿ç”¨re.search(pattern, string, flags=0)æ–¹æ³•æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„åŒ¹é…ã€‚å¦‚æœåŒ¹é…å¤±è´¥ï¼Œåˆ™è¿”å›Noneã€‚
- pattern : æ­£åˆ™ä¸­çš„æ¨¡å¼å­—ç¬¦ä¸²ã€‚
- string : è¦è¢«æŸ¥æ‰¾æ›¿æ¢çš„åŸå§‹å­—ç¬¦ä¸²ã€‚
- flags : æ ‡å¿—ä½ï¼Œç”¨äºæ§åˆ¶æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼ï¼Œå¦‚ï¼šæ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œå¤šè¡ŒåŒ¹é…ç­‰ç­‰ã€‚
```
import re
content = 'Hello 123456789 Word_This is just a test 666 Test'
result = re.search('(\d+).*?(\d+).*', content)  
 
print(result)
print(result.group())    # print(result.group(0)) åŒæ ·æ•ˆæœå­—ç¬¦ä¸²
print(result.groups())
print(result.group(1))
print(result.group(2))

[huawei@n161 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/ccc/1.py"
<_sre.SRE_Match object; span=(6, 49), match='123456789 Word_This is just a test 666 Test'>
123456789 Word_This is just a test 666 Test
('123456789', '666')
123456789
666

```

## æŸ¥æ‰¾ findall
findallï¼ˆpï¼Œtextï¼‰ï¼šåœ¨textå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„å†…å®¹ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™è¿”å›æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼›å¦‚æœä¸€ä¸ªéƒ½æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›Noneã€‚pæ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚

- findall()è¿”å›çš„æ˜¯æ‹¬å·æ‰€åŒ¹é…åˆ°çš„ç»“æœï¼Œå¤šä¸ªæ‹¬å·å°±ä¼šè¿”å›å¤šä¸ªæ‹¬å·åˆ†åˆ«åŒ¹é…åˆ°çš„ç»“æœï¼Œ
- å¦‚æœæ²¡æœ‰æ‹¬å·å°±è¿”å›å°±è¿”å›æ•´æ¡è¯­å¥æ‰€åŒ¹é…åˆ°çš„ç»“æœã€‚
- è¿™ä¸ªç‰¹æ€§æ˜¯æ­£åˆ™è¡¨è¾¾å¼ç‰¹æœ‰çš„ï¼Œè€Œä¸ä»…ä»…åªæ˜¯pythonè¯­è¨€ã€‚
```
import re
kk = re.compile(r'\d+')
print(kk.findall('one1two2three3four4'))
#[1,2,3,4]
 
#æ³¨æ„æ­¤å¤„findall()çš„ç”¨æ³•ï¼Œå¯ä¼ ä¸¤ä¸ªå‚æ•°;
kk = re.compile(r'\d+')
print(re.findall(kk,"one123"))
#[1,2,3]



string="abcdefg  acbdgef  abcdgfe  cadbgfe"
#å¸¦æ‹¬å·ä¸ä¸å¸¦æ‹¬å·çš„åŒºåˆ«
#ä¸å¸¦æ‹¬å·,regex ä¸­å¸¦æœ‰2ä¸ªæ‹¬å·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶è¾“å‡ºæ˜¯ä¸€ä¸ªlistä¸­åŒ…å«2ä¸ªtupleã€‚
regex=re.compile("((\w+)\s+\w+)")
print(regex.findall(string))
#è¾“å‡ºï¼š[('abcdefg  acbdgef', 'abcdefg'), ('abcdgfe  cadbgfe', 'abcdgfe')]

# regex ä¸­å¸¦æœ‰1ä¸ªæ‹¬å·ï¼Œå…¶è¾“å‡ºçš„å†…å®¹å°±æ˜¯æ‹¬å·åŒ¹é…åˆ°çš„å†…å®¹ï¼Œè€Œä¸æ˜¯æ•´ä¸ªè¡¨è¾¾å¼æ‰€åŒ¹é…åˆ°çš„ç»“æœã€‚
regex1=re.compile("(\w+)\s+\w+")
print(regex1.findall(string))
#è¾“å‡ºï¼š['abcdefg', 'abcdgfe']

# regex ä¸­ä¸å¸¦æœ‰æ‹¬å·ï¼Œå…¶è¾“å‡ºçš„å†…å®¹å°±æ˜¯æ•´ä¸ªè¡¨è¾¾å¼æ‰€åŒ¹é…åˆ°çš„å†…å®¹ã€‚
regex2=re.compile("\w+\s+\w+")
print(regex2.findall(string))
#è¾“å‡ºï¼š['abcdefg  acbdgef', 'abcdgfe  cadbgfe']


[huawei@n161 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/ccc/1.py"
['1', '2', '3', '4']
['123']
[('abcdefg  acbdgef', 'abcdefg'), ('abcdgfe  cadbgfe', 'abcdgfe')]
['abcdefg', 'abcdgfe']
['abcdefg  acbdgef', 'abcdgfe  cadbgfe']
```

# ç±»
## æ„é€ å‡½æ•° __init__
```
class Dog:
	def __init__(self, name, age):
		self.name = name
		self.age = age
	def sit(self):
 		print(f"{self.name} is now sitting.")
	def roll_over(self):
		print(f"{self.name} rolled over!")

my_dog = Dog('Willie', 6)
your_dog = Dog('Lucy', 3)
print(f"My dog's name is {my_dog.name}.")
print(f"My dog is {my_dog.age} years old.")
my_dog.sit()
print(f"\nYour dog's name is {your_dog.name}.")
print(f"Your dog is {your_dog.age} years old.")
your_dog.sit()

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
My dog's name is Willie.
My dog is 6 years old.
Willie is now sitting.

Your dog's name is Lucy.
Your dog is 3 years old.
Lucy is now sitting.
```
å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å€¼
```
class FooBar: 
	def __init__(self, v = 1): 
		self.somevar = v

f = FooBar("aaaaaaaaaaaaaaa")  è°ƒç”¨å¯ä»¥ä¼ é€’å‚æ•°
print(f.somevar)
```

## ææ„å‡½æ•° __del__
- å‡½æ•°å__del__ï¼Œé€šå¸¸æ— éœ€æ‰‹åŠ¨è°ƒç”¨
## ä¿®æ”¹æˆå‘˜å˜é‡å€¼
- ç›´æ¥ä¿®æ”¹å±æ€§çš„å€¼ï¼Œå³ç›´æ¥é€šè¿‡å¯¹è±¡è¿›è¡Œèµ‹å€¼ï¼Œå¦‚ my_new_car.odometer_reading = 23
- å°è£…æˆå‘˜æ–¹æ³•æ›´æ”¹å±æ€§å€¼

## ç§æœ‰æ–¹æ³•
```
class Secretive: 
	def __inaccessible(self): 
		print("Bet you can't see me ...") 
	def accessible(self): 
		print("The secret message is:") 
		self.__inaccessible() 

s = Secretive() 
s.accessible()
s.__inaccessible()	ä¸èƒ½è°ƒç”¨ç§æœ‰æ–¹æ³•ï¼Œä¼šå¤±è´¥
```
## ä½¿ç”¨property()æ“ä½œå±æ€§
ä½œç”¨ç±»ä¼¼setterã€getter
```
class Duck():
	def __init__(self, input_name):
		self.hidden_name = input_name
	def get_name(self):
		print('inside the getter')
		return self.hidden_name
	def set_name(self, input_name):
		print('inside the setter')
		self.hidden_name = input_name
	name = property(get_name, set_name)	# æ­¤å¥æ˜¯é‡ç‚¹

fowl = Duck('Howard')
print(fowl.name)	# ä¼šè°ƒç”¨ get_name
fowl.get_name()
fowl.name = 'Daffy'	# ä¼šè°ƒç”¨ set_name
print(fowl.name)
fowl.set_name('Daffy')
print(fowl.name)


[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
inside the getter
Howard
inside the getter
inside the setter
inside the getter
Daffy
inside the setter
inside the getter
Daffy
```

## ä½¿ç”¨setter()ã€@propertyæ“ä½œå±æ€§
```

class Duck():
	def __init__(self, input_name):
		self.hidden_name = input_name
	@property	# @propertyï¼Œç”¨äºæŒ‡ç¤º getter æ–¹æ³•ï¼›
	def name(self):
		print('inside the getter')
		return self.hidden_name
	@name.setter	# @name.setterï¼Œç”¨äºæŒ‡ç¤º setter æ–¹æ³•
	def name(self, input_name):
		print('inside the setter')
		self.hidden_name = input_name

fowl = Duck('Howard')
print(fowl.name)
fowl.name = 'Donald'
print(fowl.name)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
inside the getter
Howard
inside the setter
inside the getter
Donald
```

## __ç§æœ‰å˜é‡
Pythonå¯¹é‚£äº›éœ€è¦åˆ»æ„éšè—åœ¨ç±»å†…éƒ¨çš„ç‰¹æ€§æœ‰å‘½åè§„èŒƒï¼šç”±è¿ç»­çš„ä¸¤ä¸ªä¸‹åˆ’çº¿å¼€å¤´
```
class Duck():
	def __init__(self, input_name):
		self.__name = input_name
	@property
	def name(self):
		print('inside the getter')
		return self.__name
	@name.setter
	def name(self, input_name):
		print('inside the setter')
		self.__name = input_name
 
fowl = Duck('Howard')
print(fowl.name)
fowl.name = 'Donald'
print(fowl.name)
print(fowl.__name)	æ­¤å¥ä¼šerrï¼Œå¤–éƒ¨æ— æ³•è®¿é—®ï¼Œprint(fowl._Duck__name)å°±è¡Œã€‚ã€‚ã€‚
```
## å®ä¾‹æ–¹æ³•
- ä»¥selfä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•éƒ½æ˜¯å®ä¾‹æ–¹æ³•ã€‚å½“è¢«è°ƒç”¨æ—¶PythonæŠŠè°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ä½œä¸ºselfå‚æ•°ä¼ å…¥



## ç±»æ–¹æ³•classmethodä¸ç±»å˜é‡
- åœ¨ç±»å®šä¹‰å†…éƒ¨ï¼Œç”¨å‰ç¼€ä¿®é¥°ç¬¦ @classmethod æŒ‡å®šçš„æ–¹æ³•éƒ½æ˜¯ç±»æ–¹æ³•ã€‚
- ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»æœ¬èº«ï¼ˆè¿™ä¸ªå‚æ•°å¸¸è¢«å†™ä½œclsï¼Œå³classï¼‰ã€‚
- ä½œç”¨äºæ•´ä¸ªç±»ï¼Œå¯¹ç±»ä½œå‡ºçš„ä»»ä½•æ”¹å˜ä¼šå¯¹å®ƒçš„æ‰€æœ‰å®ä¾‹å¯¹è±¡äº§ç”Ÿå½±å“
```
class A():
	count = 0	ç±»å˜é‡ï¼Œæ­¤å˜é‡ä¸å±äºself
	def __init__(self):
		A.count += 1	æ³¨æ„è¿™é‡Œçš„è°ƒç”¨æ–¹å¼ä¸æ˜¯self
	def exclaim(self):
		print("I'm an A!")
	@classmethod
	def kids(cls):	ç±»æ–¹æ³•ä½¿ç”¨classmethodè£…é¥°ï¼Œå‚æ•°1ä»£è¡¨å½“å‰ç±»ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ›´å¤šå‚æ•°
		print("A has", cls.count, "little objects.")

easy_a = A()
breezy_a = A()
wheezy_a = A()
A.kids()

[huawei@n161 aaa]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/v2.py"
('A has', 3, 'little objects.')
```

## é™æ€æ–¹æ³• staticmethod
- é™æ€æ–¹æ³•ä½¿ç”¨@staticmethodè£…é¥°å™¨ï¼Œå®ƒæ—¢ä¸éœ€è¦ self å‚æ•°ä¹Ÿä¸éœ€è¦ class å‚æ•°
- å…¶å®é™æ€æ–¹æ³•å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œåªæ˜¯å®šä¹‰åœ¨äº†ç±»ä½“ä¸­ï¼Œè€Œä¸æ˜¯åœ¨æ¨¡å—é‡Œ

```
class Demo:
	@classmethod
	def klassmeth(*args):
		return args
	@staticmethod
	def statmeth(*args):
		return args

print(Demo.klassmeth())		ç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆæ˜¯ Demo ç±»
print(Demo.klassmeth('spam'))
print(Demo.statmeth())		è¡Œä¸ºä¸æ™®é€šçš„å‡½æ•°ç›¸ä¼¼
print(Demo.statmeth('spam'))



[huawei@n161 aaa]$ python -u "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/v2.py"
(<class __main__.Demo at 0x7fbaf2b19530>,)
(<class __main__.Demo at 0x7fbaf2b19530>, 'spam')
()
('spam',)
```


```
class MyClass: 
	@staticmethod 
	def smeth(): 
 		print('This is a static method') 
	@classmethod 
	def cmeth(cls): 
		print('This is a class method of', cls) 
  
MyClass.smeth() 
MyClass.cmeth()

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
This is a static method
This is a class method of <class '__main__.MyClass'>
```
## ç»¼åˆå¤§æ¡ˆä¾‹
ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•å’Œçº¦å®šçš„ç»“æ„ï¼Œå®šä¹‰è¡Œä¸ºè‰¯å¥½ä¸”ç¬¦åˆ Python é£æ ¼çš„ç±»ã€‚

```
from array import array
import math

class Vector2d:
	typecode = 'd'
	def __init__(self, x, y):
    # æŠŠxå’Œyè½¬æ¢æˆæµ®ç‚¹æ•°ï¼ŒæŠŠå±æ€§æ ‡è®°ä¸ºç§æœ‰çš„ï¼ˆå³__å¼€å¤´ï¼‰
		self.__x = float(x)
		self.__y = float(y)
	@property
	# propertyè£…é¥°å™¨æŠŠè¯»å€¼æ–¹æ³•æ ‡è®°ä¸ºç‰¹æ€§ï¼Œè¯»å€¼æ–¹æ³•ä¸å…¬å¼€å±æ€§åŒåï¼Œéƒ½æ˜¯xï¼Œç›´æ¥è¿”å›self.__x
	def x(self):
		return self.__x
	@property
	def y(self):
		return self.__y
	def __iter__(self):
    # æŠŠå®ä¾‹å˜æˆå¯è¿­ä»£çš„å¯¹è±¡ï¼Œè¿™æ ·æ‰èƒ½æ‹†åŒ…,å¦‚x,y=my_vector
    # é€šè¿‡ self.x å’Œ self.y è¯»å–å…¬å¼€ç‰¹æ€§ï¼Œè€Œä¸å¿…è¯»å–ç§æœ‰å±æ€§
    # è°ƒç”¨ç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸€ä¸ªæ¥ä¸€ä¸ªäº§å‡ºåˆ†é‡
    # ä¹Ÿå¯ä»¥å†™æˆ yield self.x; yield.self.y
		return (i for i in (self.x, self.y))	
	def __repr__(self):
    # ä½¿ç”¨ {!r} è·å–å„ä¸ªåˆ†é‡çš„è¡¨ç¤ºå½¢å¼ï¼Œç„¶åæ’å€¼ï¼Œæ„æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼›å› ä¸º
    # Vector2d å®ä¾‹æ˜¯å¯è¿­ä»£çš„å¯¹è±¡ï¼Œæ‰€ä»¥ *self ä¼šæŠŠ x å’Œ y åˆ†é‡æä¾›ç»™ format å‡½æ•°ã€‚
		class_name = type(self).__name__
		return '{}({!r}, {!r})'.format(class_name, *self)
	def __str__(self):
    # ä»å¯è¿­ä»£çš„ Vector2d å®ä¾‹ä¸­å¯ä»¥è½»æ¾åœ°å¾—åˆ°ä¸€ä¸ªå…ƒç»„ï¼Œæ˜¾ç¤ºä¸ºä¸€ä¸ªæœ‰åºå¯¹
		return str(tuple(self))
	def __bytes__(self):
    # æŠŠtypecodeè½¬æ¢æˆå­—èŠ‚åºåˆ—ï¼Œå¹¶è¿­ä»£Vector2då®ä¾‹ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå†æŠŠæ•°ç»„è½¬æ¢æˆå­—èŠ‚åºåˆ—
		return (bytes([ord(self.typecode)]) + bytes(array(self.typecode, self)))
	def __eq__(self, other):
    # æ­¤å®ç°æ¯”è¾ƒå…ƒç»„ï¼Œä½†å‰¯ä½œç”¨æ˜¯Vector(3, 4)==[3, 4]ä¹Ÿä¼šè¿”å›æ­£ç¡®
		return tuple(self) == tuple(other)
	# ä¸ºäº†æŠŠ Vector2d å®ä¾‹å˜æˆå¯æ•£åˆ—çš„ï¼Œè¦æœ‰__hash__ã€__eq__ï¼Œè¿˜è¦è®©å‘é‡ä¸å¯å˜
	# ä½¿ç”¨ä½è¿ç®—ç¬¦å¼‚æˆ–ï¼ˆ^ï¼‰æ··åˆå„åˆ†é‡çš„æ•£åˆ—å€¼
	def __hash__(self):
 		return hash(self.x) ^ hash(self.y)
	def __abs__(self):
    # æ¨¡æ˜¯ x å’Œ y åˆ†é‡æ„æˆçš„ç›´è§’ä¸‰è§’å½¢çš„æ–œè¾¹é•¿
		return math.hypot(self.x, self.y)
	def __bool__(self):
    # è®¡ç®—æ¨¡ç„¶åæŠŠç»“æœè½¬æ¢æˆå¸ƒå°”å€¼
		return bool(abs(self))
	def __format__(self, fmt_spec=''):
    # å¦‚æœæ ¼å¼ä»£ç ä»¥ 'p' ç»“å°¾ï¼Œä½¿ç”¨æåæ ‡
		if fmt_spec.endswith('p'):
    # ä» fmt_spec ä¸­åˆ é™¤ 'p' åç¼€ã€‚
			fmt_spec = fmt_spec[:-1]
	# æ„å»ºä¸€ä¸ªå…ƒç»„ï¼Œè¡¨ç¤ºæåæ ‡ï¼š(magnitude, angle)ã€‚
			coords = (abs(self), self.angle())
			outer_fmt = '<{}, {}>'
		else:
    # å¦‚æœä¸ä»¥ 'p' ç»“å°¾ï¼Œä½¿ç”¨ self çš„ x å’Œ y åˆ†é‡æ„å»ºç›´è§’åæ ‡ã€‚
			coords = self
			outer_fmt = '({}, {})'
	# ä½¿ç”¨formatå‡½æ•°æŠŠfmt_specåº”ç”¨åˆ°å„ä¸ªåˆ†é‡ä¸Šï¼Œæ„å»ºä¸€ä¸ªå¯è¿­ä»£çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²
		components = (format(c, fmt_spec) for c in coords)
		return outer_fmt.format(*components)
	@classmethod
	# ç±»æ–¹æ³•è£…é¥°å™¨ï¼Œä»å­—èŠ‚åºåˆ—è½¬æ¢æˆ Vector2då®ä¾‹
	def frombytes(cls, octets):
    # è¯»å–ç¬¬ä¸€ä¸ªå­—èŠ‚èµ‹å€¼ç»™typecode
		typecode = chr(octets[0])
	# ä½¿ç”¨ä¼ å…¥çš„ octets å­—èŠ‚åºåˆ—åˆ›å»ºä¸€ä¸ª memoryviewï¼Œç„¶åä½¿ç”¨ typecode è½¬æ¢
		memv = memoryview(octets[1:]).cast(typecode)
	# æ‹†åŒ…è½¬æ¢åçš„ memoryviewï¼Œå¾—åˆ°æ„é€ æ–¹æ³•æ‰€éœ€çš„ä¸€å¯¹å‚æ•°
		return cls(*memv)

	# è®¡ç®—è§’åº¦
	def angle(self):
		return math.atan2(self.y, self.x)


v1 = Vector2d(3, 4)
print(v1.x, v1.y)
x, y = v1	# æ‹†åŒ…
print(x, y)
v1_clone = eval(repr(v1))
print(v1 == v1_clone)	# è°ƒç”¨æ¯”è¾ƒ__eq__
print(v1)	# ä¼šè°ƒç”¨__str__
octets = bytes(v1)	# è°ƒç”¨ __bytes__
print(octets)
print(abs(v1))	# è°ƒç”¨ __abs__
print(bool(v1), bool(Vector2d(0, 0))) # è°ƒç”¨ __bool__

v1_clone = Vector2d.frombytes(bytes(v1))
print(v1_clone)
print(v1 == v1_clone)

print(format(v1))
print(format(v1, '.2f'))	# è°ƒç”¨__format__
print(format(v1, '.3e'))

print(Vector2d(0, 0).angle())
print(Vector2d(1, 0).angle())
epsilon = 10**-8
print(abs(Vector2d(0, 1).angle() - math.pi/2) < epsilon)
print(abs(Vector2d(1, 1).angle() - math.pi/4) < epsilon)

print(format(Vector2d(1, 1), 'p'))
print(format(Vector2d(1, 1), '.3ep'))
print(format(Vector2d(1, 1), '0.5fp'))


print(v1.x, v1.y)
# v1.x = 123	ä¸èƒ½ä¿®æ”¹å±æ€§

v1 = Vector2d(3, 4)
v2 = Vector2d(3.1, 4.2)
print(hash(v1), hash(v2))
print(len(set([v1, v2])))

print(v1.__dict__)
print(v1._Vector2d__x)

[huawei@n161 aaa]$ python3 v2.py
3.0 4.0
3.0 4.0
True
(3.0, 4.0)
b'd\x00\x00\x00\x00\x00\x00\x08@\x00\x00\x00\x00\x00\x00\x10@'
5.0
True False
(3.0, 4.0)
True
(3.0, 4.0)
(3.00, 4.00)
(3.000e+00, 4.000e+00)
0.0
0.0
True
True
<1.4142135623730951, 0.7853981633974483>
<1.414e+00, 7.854e-01>
<1.41421, 0.78540>
3.0 4.0
7 384307168202284039
2
{'_Vector2d__x': 3.0, '_Vector2d__y': 4.0}
3.0

```
## __slots__å±æ€§
- é»˜è®¤æƒ…å†µä¸‹ï¼ŒPython åœ¨å„ä¸ªå®ä¾‹ä¸­åä¸º __dict__ çš„å­—å…¸é‡Œå­˜å‚¨å®ä¾‹å±æ€§ã€‚
- é€šè¿‡ __slots__ ç±»å±æ€§ï¼Œèƒ½èŠ‚çœå¤§é‡å†…å­˜ï¼Œæ–¹æ³•æ˜¯è®©è§£é‡Šå™¨åœ¨å…ƒç»„ä¸­å­˜å‚¨å®ä¾‹å±æ€§ï¼Œè€Œä¸ç”¨å­—å…¸
- å…·ä½“è§æµç•…çš„Python9.8
## æ“ä½œç¬¦é‡è½½ __eq__
æ¼”ç¤ºäº†é‡è½½ç­‰å·ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶å®ƒç¬¦å·ï¼Œè¯¦è§pythonè¯­è¨€åŠå…¶åº”ç”¨6.12
```
class Word():
	def __init__(self, text):
		self.text = text
	def __eq__(self, word2):
		return self.text.lower() == word2.text.lower()

first = Word('ha')
second = Word('HA')
third = Word('eh')
print(first == second)
print(first == third)
```
## ç”¨æˆ·å®šä¹‰çš„å¯è°ƒç”¨ç±»å‹ __call__
- ä¸ä»… Python å‡½æ•°æ˜¯çœŸæ­£çš„å¯¹è±¡ï¼Œä»»ä½• Python å¯¹è±¡éƒ½å¯ä»¥è¡¨ç°å¾—åƒå‡½æ•°ã€‚ä¸ºæ­¤ï¼Œåªéœ€å®ç°å®ä¾‹æ–¹æ³• __call__ã€‚
- å…¶å®å°±æ˜¯å¯¹è±¡åç§°åæ¥ï¼ˆï¼‰è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºç±»ä¼¼é‡è½½æ“ä½œç¬¦ï¼ˆï¼‰
```
import random
class BingoCage:
	def __init__(self, items):
		self._items = list(items)	# æ¥å—ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼›åœ¨æœ¬åœ°æ„å»ºä¸€ä¸ªå‰¯æœ¬
		random.shuffle(self._items)
	def pick(self):
		try:
			return self._items.pop()
		except IndexError:	# å¦‚æœ self._items ä¸ºç©ºï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶è®¾å®šé”™è¯¯æ¶ˆæ¯ã€‚
			raise LookupError('pick from empty BingoCage')
	def __call__(self):
		return self.pick()	# bingo.pick() çš„å¿«æ·æ–¹å¼æ˜¯ bingo()ã€‚

bingo = BingoCage(range(3))
print(bingo.pick())
print(bingo())

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/bbb/src/pyth.py"
0
2
```

# ç»§æ‰¿
## ç®€å•ç»§æ‰¿
```
class A: 
	def hello(self): 
		print("Hello, I'm A.") 
class B(A):
	pass

a = A() 
b = B() 
a.hello() 
b.hello() 

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Hello, I'm A.
Hello, I'm A.
```
## å¤šç»§æ‰¿
å½“å­ç±»ç»§æ‰¿å¤šä¸ªçˆ¶ç±»æ—¶ï¼Œå¦‚æœåœ¨å¤šä¸ªçˆ¶ç±»ä¸­æœ‰ç›¸åŒçš„æˆå‘˜æ–¹æ³•æˆ–æˆå‘˜å˜é‡ï¼Œåˆ™å­ç±»ä¼˜å…ˆç»§æ‰¿å·¦è¾¹çˆ¶ç±»ä¸­çš„æˆå‘˜æ–¹æ³•æˆ–æˆå‘˜å˜é‡ï¼Œä»å·¦åˆ°å³ç»§æ‰¿çº§åˆ«ä»é«˜åˆ°ä½ã€‚

æ¡ˆä¾‹è§çœ‹æ¼«ç”»å­¦python9.6.2

## æ·»åŠ æ–°æ–¹æ³•
```
class Car():
	def exclaim(self):
		print("I'm a Car!")

class Yugo(Car):
	def exclaim(self):
		print("I'm a Yugo! Much like a Car, but more Yugoï¿¾ish.")
	def need_a_push(self):
		print("A little help here?")

give_me_a_car = Car()
give_me_a_yugo = Yugo()
give_me_a_yugo.need_a_push()
# give_me_a_car.need_a_push()	çˆ¶ç±»æ²¡æœ‰æ­¤æ–¹æ³•ï¼Œä¼šæŠ¥é”™
```

## é‡å†™çˆ¶ç±»æ–¹æ³• override

```
class A: 
	def hello(self): 
		print("Hello, I'm A.") 
class B(A): 
	def hello(self): 	åœ¨å­ç±»ä¸­ï¼Œå¯ä»¥è¦†ç›–ä»»ä½•çˆ¶ç±»çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ __init__()ï¼Œè§ä¸‹ä¾‹
 		print("Hello, I'm B.") 

a = A() 
b = B() 
a.hello() 
b.hello() 

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Hello, I'm A.
Hello, I'm B.
```

- å¦‚æœæ²¡æœ‰è¦†ç›–çˆ¶ç±»çš„ __init__() æ–¹æ³•ï¼ŒPython ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–å‡½æ•° __init__()
- å¦‚æœå­ç±»é‡å†™äº†initï¼Œåˆ™ä¸ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„initï¼Œä½†å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ï¼Œè§superæ¡ˆä¾‹

```
#!/usr/bin/python3
class Person():
	def __init__(self, name):
		self.name = name

class MDPerson(Person):
	def __init__(self, name):
		self.name = "Doctor " + name

class JDPerson(Person):
	def __init__(self, name):
		self.name = name + ", Esquire"

person = Person('Fudd')
doctor = MDPerson('Fudd')
lawyer = JDPerson('Fudd')
print(person.name)
print(doctor.name)
print(lawyer.name)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Fudd
Doctor Fudd
Fudd, Esquire
```
## è°ƒç”¨çˆ¶ç±»æ–¹æ³• super
æ³¨æ„æ²¡æœ‰super()é‚£å¥åˆ™ä¼šå¤±è´¥ï¼Œå› ä¸ºå­ç±»é‡æ–°å®ç°äº†è‡ªå·±çš„æ„é€ ï¼Œä¸”æœªè°ƒç”¨çˆ¶ç±»æ„é€ ï¼Œæ‰€ä»¥æ²¡æœ‰å¯¹åº”çš„æˆå‘˜hungry
```
class Bird: 
	def __init__(self): 
		self.hungry = True 
	def eat(self): 
		if self.hungry: 
 			print('Aaaah ...') 
 			self.hungry = False 
		else:
 			print('No, thanks!') 
    
class SongBird(Bird): 
	def __init__(self): 
		super().__init__()
		self.sound = 'Squawk!' 
	def sing(self): 
		print(self.sound)

sb = SongBird() 
sb.sing() 
sb.eat() 
sb.eat() 

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Squawk!
Aaaah ...
No, thanks!
```
å¦ä¸€ä¸ªåœ¨å­ç±»æ„é€ ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ çš„æ¡ˆä¾‹
```
class Person():
	def __init__(self, name):
		self.name = name

class EmailPerson(Person):
	def __init__(self, name, email):
		super().__init__(name)
		self.email = email

bob = EmailPerson('Bob Frapples', 'bob@frapples.com')
print(bob.name)
print(bob.email)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Bob Frapples
bob@frapples.com
```

## ç»„åˆ
æ¡ˆä¾‹æ¼”ç¤ºäº†ç»„åˆç±»çš„ä½¿ç”¨æ–¹å¼ï¼Œæ±½è½¦çˆ¶ç±»ã€ç”µåŠ¨è½¦å­ç±»ï¼Œå¹¶ä¸”ç”µåŠ¨è½¦ç±»ç»„åˆäº†ç”µæ± ç±»
```
#!/usr/bin/python3

class Car:
	def __init__(self, make, model, year):
		self.make = make
		self.model = model
		self.year = year
		self.odometer_reading = 0

	def get_descriptive_name(self):
		long_name = f"{self.year} {self.make} {self.model}"
		return long_name.title()
	def read_odometer(self):
		print(f"This car has {self.odometer_reading} miles on it.")
	def update_odometer(self, mileage):
		if mileage >= self.odometer_reading:
			self.odometer_reading = mileage
		else:
			print("You can't roll back an odometer!")
	def increment_odometer(self, miles):
		self.odometer_reading += miles

class Battery:
	def __init__(self, battery_size=75):
		self.battery_size = battery_size
	def describe_battery(self):
		print(f"This car has a {self.battery_size}-kWh battery.")
	def get_range(self):
		if self.battery_size == 75:
			range = 260
		elif self.battery_size == 100:
			range = 315
		print(f"This car can go about {range} miles on a full charge.")


class ElectricCar(Car):
	def __init__(self, make, model, year):
		super().__init__(make, model, year)
		self.battery = Battery()
	def describe_battery(self):
		print(f"This car has a {self.battery_size}-kWh battery.")


my_tesla = ElectricCar('tesla', 'model s', 2019)
print(my_tesla.get_descriptive_name())
my_tesla.battery.describe_battery()
my_tesla.battery.get_range()

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
2019 Tesla Model S
This car has a 75-kWh battery.
This car can go about 260 miles on a full charge.

```
å¦ä¸€ä¸ªæ¡ˆä¾‹
```
class Bill():
	def __init__(self, description):
		self.description = description
class Tail():
	def __init__(self, length):
		self.length = length
class Duck():
	def __init__(self, bill, tail):
		self.bill = bill
		self.tail = tail
	def about(self):
		print('This duck has a', self.bill.description, 'bill and a', self.tail.length, 'tail')

tail = Tail('long')
bill = Bill('wide orange')
duck = Duck(bill, tail)
duck.about()

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
This duck has a wide orange bill and a long tail
```
# å¤šæ€
## åƒåœ¾å®ç°
è¿™ç§æ–¹å¼æœ‰æ—¶è¢«ç§°ä½œé¸­å­ç±»å‹ï¼ˆduck typingï¼‰ï¼Œè¿™ä¸ªå‘½åæºè‡ªä¸€å¥åè¨€ï¼šå¦‚æœå®ƒåƒé¸­å­ä¸€æ ·èµ°è·¯ï¼Œåƒé¸­å­ä¸€æ ·å«ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€åªé¸­å­ã€‚

```
#!/usr/bin/python3

class Quote():
	def __init__(self, person, words):
		self.person = person
		self.words = words
	def who(self):
		return self.person
	def says(self):
		return self.words + '.'
class QuestionQuote(Quote):
	def says(self):
		return self.words + '?'
class ExclamationQuote(Quote):
	def says(self):
		return self.words + '!'

hunter = Quote('Elmer Fudd', "I'm hunting wabbits")
print(hunter.who(), 'says:', hunter.says())
hunted1 = QuestionQuote('Bugs Bunny', "What's up, doc")
print(hunted1.who(), 'says:', hunted1.says())
hunted2 = ExclamationQuote('Daffy Duck', "It's rabbit season")
print(hunted2.who(), 'says:', hunted2.says())




class BabblingBrook():
	def who(self):
		return 'Brook'
	def says(self):
		return 'Babble'

def who_says(obj):
		print(obj.who(), 'says', obj.says())

brook = BabblingBrook()
who_says(hunter)
who_says(hunted1)
who_says(hunted2)
who_says(brook)

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Elmer Fudd says: I'm hunting wabbits.
Bugs Bunny says: What's up, doc?
Daffy Duck says: It's rabbit season!
Elmer Fudd says I'm hunting wabbits.
Bugs Bunny says What's up, doc?
Daffy Duck says It's rabbit season!
Brook says Babble

```

# å¼‚å¸¸å¤„ç†

## æŠ›å‡ºå¼‚å¸¸
- ä½¿ç”¨raiseè¯­å¥ï¼Œå¹¶å°†ä¸€ä¸ªç±»ï¼ˆå¿…é¡»æ˜¯Exceptionçš„å­ç±»ï¼‰æˆ–å®ä¾‹ä½œä¸ºå‚æ•°ã€‚
- å°†ç±»ä½œä¸ºå‚æ•°æ—¶ï¼Œå°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ•è·åˆ°çš„å³æ˜¯æ­¤å¯¹è±¡
```
raise Exception('hyperdrive overload') 
ä¹Ÿå¯ä¸æŒ‡å®šç±»å‹ï¼Œé‚£æ ·ä¸‹é¢çš„ä¿¡æ¯å°±ä¼šå‡å°‘ä¸€äº›


[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Traceback (most recent call last):
  File "/home/huawei/playground/pythontest/pyth.py", line 2, in <module>
    raise Exception('hyperdrive overload') 
Exception: hyperdrive overload
```
## å¼‚å¸¸ç±»å‹
è§pythonåŸºç¡€æ•™ç¨‹ç¬¬ä¸‰ç‰ˆp133
## è‡ªå®šä¹‰çš„å¼‚å¸¸ç±»
ç»§æ‰¿è‡ªException

class SomeCustomException(Exception): pass 
## tryã€exceptã€elseã€finally
- elseæ˜¯æœªè§¦å‘å¼‚å¸¸çš„è·¯å¾„
- finally å­å¥ä¸­çš„ä»£ç é€šå¸¸ç”¨äºé‡Šæ”¾é‡è¦çš„èµ„æºï¼Œæˆ–è€…è¿˜åŸä¸´æ—¶å˜æ›´çš„çŠ¶æ€
```
#!/usr/bin/python3
filename = 'alice.txt'
try:
	with open(filename, encoding='utf-8') as f:
		contents = f.read()
except FileNotFoundError:
	print(f"Sorry, the file {filename} does not exist.")
else:
	print("loaded")

[huawei@n148 pythontest]$ /usr/bin/python3 "/home/huawei/playground/pythontest/pyth.py"
Sorry, the file alice.txt does not exist.
```
ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ•è·
```
try: 
 	x = int(input('Enter the first number: ')) 
	y = int(input('Enter the second number: ')) 
	print(x / y) 
except ZeroDivisionError: 
	print("The second number can't be zero!") 
except TypeError: 
	print("That wasn't a number, was it?") 
```
è¿™æ ·æ›´ç²¾ç®€
```
try: 
	x = int(input('Enter the first number: ')) 
	y = int(input('Enter the second number: ')) 
	print(x / y) 
except (ZeroDivisionError, TypeError, NameError): 
 	print('Your numbers were bogus ...') 
```
å¸¦æœ‰finally
```
#!/usr/bin/python3
try: 
	1 / 0 
except NameError: 
	print("Unknown variable") 
else: 
	print("That went well!") 
finally: 
	print("Cleaning up.") 
```

## ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸with
- ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®åŒ…å« __enter__ å’Œ __exit__ ä¸¤ä¸ªæ–¹æ³•ã€‚
- with è¯­å¥å¼€å§‹è¿è¡Œæ—¶ï¼Œä¼šåœ¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ä¸Šè°ƒç”¨ __enter__ æ–¹æ³•ã€‚
- with è¯­å¥è¿è¡Œç»“æŸåï¼Œä¼šåœ¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡ä¸Šè°ƒç”¨ __exit__ æ–¹æ³•
- with è¯­å¥çš„ç›®çš„æ˜¯ç®€åŒ– try/finally æ¨¡å¼ã€‚
- è¿™ç§æ¨¡å¼ç”¨äºä¿è¯ä¸€æ®µä»£ç è¿è¡Œå®Œæ¯•åæ‰§è¡ŒæŸé¡¹æ“ä½œï¼Œå³ä¾¿é‚£æ®µä»£ç ç”±äºå¼‚å¸¸ã€return è¯­å¥æˆ– sys.exit() è°ƒç”¨è€Œä¸­æ­¢ï¼Œä¹Ÿä¼šæ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚

## æ•è·å¯¹è±¡
ä¸‹é¢çš„eå³æ˜¯å¼‚å¸¸å¯¹è±¡
```
try: 
	x = int(input('Enter the first number: ')) 
	y = int(input('Enter the second number: ')) 
	print(x / y) 
except (ZeroDivisionError, TypeError) as e: 
	print(e) 
```
## æ•è·æ‰€æœ‰
- åœ¨exceptè¯­å¥ä¸­ä¸æŒ‡å®šä»»ä½•å¼‚å¸¸ç±»å³å¯
- æ›´å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨except Exception as eå¹¶å¯¹å¼‚å¸¸å¯¹è±¡è¿›è¡Œæ£€æŸ¥ã€‚è¿™æ ·åšå°†è®©ä¸æ˜¯ä»Exceptionæ´¾ç”Ÿè€Œæ¥çš„ä¸ºæ•°ä¸å¤šçš„å¼‚å¸¸æˆä¸ºæ¼ç½‘ä¹‹é±¼ï¼Œå…¶ä¸­åŒ…æ‹¬SystemExitå’ŒKeyboardInterruptï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä»BaseExceptionï¼ˆExceptionçš„è¶…ç±»ï¼‰æ´¾ç”Ÿè€Œæ¥çš„ã€‚

```
try: 
	x = int(input('Enter the first number: ')) 
	y = int(input('Enter the second number: ')) 
	print(x / y) 
except: 
	print('Something wrong happened ...') 
```

# è¿›ç¨‹ä¸çº¿ç¨‹
## è¿›ç¨‹ä¿¡æ¯
```
import os
os.getpid()		# å½“å‰Pythonè§£é‡Šå™¨çš„è¿›ç¨‹å·
os.getcwd()		# å½“å‰å·¥ä½œç›®å½•
os.getuid()		# ç”¨æˆ· ID 
os.getgid()		# ç”¨æˆ·ç»„ ID
```
## åˆ›å»ºè¿›ç¨‹
- getoutput
	- åªæ˜¯åœ¨shellä¸­è¿è¡Œå…¶ä»–ç¨‹åºå¹¶è¿”å›è¾“å‡ºï¼ˆæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºï¼‰
	- å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥è¡¨ç¤ºä¸€ä¸ªå®Œæ•´çš„shellå‘½ä»¤
	- å¯ä»¥ä½¿ç”¨å‚æ•°ã€ç®¡é“ã€I/O é‡å®šå‘ç­‰
- check_output
	- æ¥å—ä¸€ä¸ªå‘½ä»¤å’Œå‚æ•°åˆ—è¡¨ã€‚
	- é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›çš„ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å­—èŠ‚ç±»å‹çš„æ ‡å‡†è¾“å‡ºã€‚
	- å¹¶æ²¡æœ‰ä½¿ç”¨ shell
- getstatusoutput
	- å¯ä»¥è·å–é€€å‡ºçŠ¶æ€ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«çŠ¶æ€ç å’Œè¾“å‡ºçš„å…ƒç»„
- call
	- ç¨‹åºçš„è¾“å‡ºä¼šæ‰“å°åˆ°å¯¹åº”çš„stdä¸­ï¼Œåªè¿”å›é€€å‡ºçŠ¶æ€
	- åœ¨ Unix ç±»æ“ä½œç³»ç»Ÿä¸­ï¼Œé€€å‡ºçŠ¶æ€ 0 é€šå¸¸è¡¨ç¤ºè¿è¡ŒæˆåŠŸ

```
import subprocess
ret = subprocess.getoutput('date')
print(ret)	# Thu Sep  8 15:43:03 CST 2022
ret = subprocess.getoutput('date -u | wc')
print(ret)	#       1       6      29
ret = subprocess.check_output(['date', '-u'])	
print(ret)	# b'Thu Sep  8 07:51:23 UTC 2022\n'

ret = subprocess.getstatusoutput('date')
print(ret)	# (0, 'Thu Sep  8 15:53:54 CST 2022')

ä¸‹é¢3ç§æ•ˆæœä¸€æ ·
ret = subprocess.call('date')
ret = subprocess.call('date -u', shell=True)
ret = subprocess.call(['date', '-u'])
print(ret)
```

## ç®€å•å¤šè¿›ç¨‹
```
import multiprocessing
import os
def do_this(what):
	whoami(what)
def whoami(what):
	print("Process %s says: %s" % (os.getpid(), what))

if __name__ == "__main__":
	whoami("I'm the main program")
	for n in range(4):
		p = multiprocessing.Process(target=do_this, args=("I'm function %s" % n,))
		p.start()

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Process 54726 says: I'm the main program
Process 54727 says: I'm function 0
Process 54728 says: I'm function 1
Process 54729 says: I'm function 2
Process 54730 says: I'm function 3
```

## ç»ˆæ­¢è¿›ç¨‹
- ä½¿ç”¨terminate()ç»ˆæ­¢è¿›ç¨‹
- æ³¨æ„æ²¡æœ‰ç”¨äºçº¿ç¨‹çš„ç»ˆæ­¢æ–¹æ³•ï¼
```
import multiprocessing
import time
import os
def whoami(name):
	print("I'm %s, in process %s" % (name, os.getpid()))
def loopy(name):
	whoami(name)
	start = 1
	stop = 1000000
	for num in range(start, stop):
 		print("\tNumber %s of %s. Honk!" % (num, stop))
 		time.sleep(1)

if __name__ == "__main__":
	whoami("main")
	p = multiprocessing.Process(target=loopy, args=("loopy",))
	p.start()
	time.sleep(5)
	p.terminate()


[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
I'm main, in process 54825
I'm loopy, in process 54826
        Number 1 of 1000000. Honk!
        Number 2 of 1000000. Honk!
        Number 3 of 1000000. Honk!
        Number 4 of 1000000. Honk!
        Number 5 of 1000000. Honk!
```

## ç®€å•å¤šè¿›ç¨‹å¹¶å‘
ä½¿ç”¨multiprocessingçš„JoinableQueueé˜Ÿåˆ—å®ç°
```
import multiprocessing as mp
def washer(dishes, output):
	for dish in dishes:
		print('Washing', dish, 'dish')
		output.put(dish)

def dryer(input):
	while True:
		dish = input.get()
		print('Drying', dish, 'dish')
		input.task_done()

dish_queue = mp.JoinableQueue()
dryer_proc = mp.Process(target=dryer, args=(dish_queue,))
dryer_proc.daemon = True
dryer_proc.start()
dishes = ['salad', 'bread', 'entree', 'dessert']
washer(dishes, dish_queue)
dish_queue.join()


[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Washing salad dish
Washing bread dish
Washing entree dish
Washing dessert dish
Drying salad dish
Drying bread dish
Drying entree dish
Drying dessert dish
```

## ç®€å•å¤šçº¿ç¨‹
```
import threading
def do_this(what):
	whoami(what)
def whoami(what):
	print("Thread %s says: %s" % (threading.current_thread(), what))

if __name__ == "__main__":
	whoami("I'm the main program")
	for n in range(4):
 		p = threading.Thread(target=do_this, args=("I'm function %s" % n,))
 		p.start()

[huawei@n148 postdb_doc]$ /usr/bin/python3 "/home/huawei/hwwork/postdb_doc/mdbooks/aaa/pyth.py"
Thread <_MainThread(MainThread, started 140689071798080)> says: I'm the main program
Thread <Thread(Thread-1, started 140688941364992)> says: I'm function 0
Thread <Thread(Thread-2, started 140688932972288)> says: I'm function 1
Thread <Thread(Thread-3, started 140688924579584)> says: I'm function 2
Thread <Thread(Thread-4, started 140688916186880)> says: I'm function 3
```